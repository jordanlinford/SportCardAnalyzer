var iE=t=>{throw TypeError(t)};var cg=(t,e,n)=>e.has(t)||iE("Cannot "+n);var L=(t,e,n)=>(cg(t,e,"read from private field"),n?n.call(t):e.get(t)),_e=(t,e,n)=>e.has(t)?iE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),oe=(t,e,n,r)=>(cg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ne=(t,e,n)=>(cg(t,e,"access private method"),n);var bf=(t,e,n,r)=>({set _(s){oe(t,e,s,n)},get _(){return L(t,e,r)}});function rO(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function lC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uC={exports:{}},Wp={},cC={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kd=Symbol.for("react.element"),sO=Symbol.for("react.portal"),iO=Symbol.for("react.fragment"),oO=Symbol.for("react.strict_mode"),aO=Symbol.for("react.profiler"),lO=Symbol.for("react.provider"),uO=Symbol.for("react.context"),cO=Symbol.for("react.forward_ref"),dO=Symbol.for("react.suspense"),fO=Symbol.for("react.memo"),hO=Symbol.for("react.lazy"),oE=Symbol.iterator;function pO(t){return t===null||typeof t!="object"?null:(t=oE&&t[oE]||t["@@iterator"],typeof t=="function"?t:null)}var dC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fC=Object.assign,hC={};function hu(t,e,n){this.props=t,this.context=e,this.refs=hC,this.updater=n||dC}hu.prototype.isReactComponent={};hu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};hu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pC(){}pC.prototype=hu.prototype;function b_(t,e,n){this.props=t,this.context=e,this.refs=hC,this.updater=n||dC}var T_=b_.prototype=new pC;T_.constructor=b_;fC(T_,hu.prototype);T_.isPureReactComponent=!0;var aE=Array.isArray,mC=Object.prototype.hasOwnProperty,S_={current:null},gC={key:!0,ref:!0,__self:!0,__source:!0};function yC(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)mC.call(e,r)&&!gC.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:kd,type:t,key:i,ref:o,props:s,_owner:S_.current}}function mO(t,e){return{$$typeof:kd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function C_(t){return typeof t=="object"&&t!==null&&t.$$typeof===kd}function gO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var lE=/\/+/g;function dg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gO(""+t.key):e.toString(36)}function ah(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case kd:case sO:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+dg(o,0):r,aE(s)?(n="",t!=null&&(n=t.replace(lE,"$&/")+"/"),ah(s,e,n,"",function(u){return u})):s!=null&&(C_(s)&&(s=mO(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(lE,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",aE(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+dg(i,a);o+=ah(i,e,n,l,s)}else if(l=pO(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+dg(i,a++),o+=ah(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Tf(t,e,n){if(t==null)return t;var r=[],s=0;return ah(t,r,"","",function(i){return e.call(n,i,s++)}),r}function yO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var jn={current:null},lh={transition:null},vO={ReactCurrentDispatcher:jn,ReactCurrentBatchConfig:lh,ReactCurrentOwner:S_};function vC(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:Tf,forEach:function(t,e,n){Tf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tf(t,function(){e++}),e},toArray:function(t){return Tf(t,function(e){return e})||[]},only:function(t){if(!C_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ve.Component=hu;Ve.Fragment=iO;Ve.Profiler=aO;Ve.PureComponent=b_;Ve.StrictMode=oO;Ve.Suspense=dO;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vO;Ve.act=vC;Ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=fC({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=S_.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)mC.call(e,l)&&!gC.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:kd,type:t.type,key:s,ref:i,props:r,_owner:o}};Ve.createContext=function(t){return t={$$typeof:uO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lO,_context:t},t.Consumer=t};Ve.createElement=yC;Ve.createFactory=function(t){var e=yC.bind(null,t);return e.type=t,e};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(t){return{$$typeof:cO,render:t}};Ve.isValidElement=C_;Ve.lazy=function(t){return{$$typeof:hO,_payload:{_status:-1,_result:t},_init:yO}};Ve.memo=function(t,e){return{$$typeof:fO,type:t,compare:e===void 0?null:e}};Ve.startTransition=function(t){var e=lh.transition;lh.transition={};try{t()}finally{lh.transition=e}};Ve.unstable_act=vC;Ve.useCallback=function(t,e){return jn.current.useCallback(t,e)};Ve.useContext=function(t){return jn.current.useContext(t)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(t){return jn.current.useDeferredValue(t)};Ve.useEffect=function(t,e){return jn.current.useEffect(t,e)};Ve.useId=function(){return jn.current.useId()};Ve.useImperativeHandle=function(t,e,n){return jn.current.useImperativeHandle(t,e,n)};Ve.useInsertionEffect=function(t,e){return jn.current.useInsertionEffect(t,e)};Ve.useLayoutEffect=function(t,e){return jn.current.useLayoutEffect(t,e)};Ve.useMemo=function(t,e){return jn.current.useMemo(t,e)};Ve.useReducer=function(t,e,n){return jn.current.useReducer(t,e,n)};Ve.useRef=function(t){return jn.current.useRef(t)};Ve.useState=function(t){return jn.current.useState(t)};Ve.useSyncExternalStore=function(t,e,n){return jn.current.useSyncExternalStore(t,e,n)};Ve.useTransition=function(){return jn.current.useTransition()};Ve.version="18.3.1";cC.exports=Ve;var y=cC.exports;const q=lC(y),_C=rO({__proto__:null,default:q},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _O=y,wO=Symbol.for("react.element"),xO=Symbol.for("react.fragment"),EO=Object.prototype.hasOwnProperty,bO=_O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TO={key:!0,ref:!0,__self:!0,__source:!0};function wC(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)EO.call(e,r)&&!TO.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:wO,type:t,key:i,ref:o,props:s,_owner:bO.current}}Wp.Fragment=xO;Wp.jsx=wC;Wp.jsxs=wC;uC.exports=Wp;var p=uC.exports,_y={},xC={exports:{}},dr={},EC={exports:{}},bC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,B){var X=j.length;j.push(B);e:for(;0<X;){var te=X-1>>>1,le=j[te];if(0<s(le,B))j[te]=B,j[X]=le,X=te;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var B=j[0],X=j.pop();if(X!==B){j[0]=X;e:for(var te=0,le=j.length,se=le>>>1;te<se;){var Ie=2*(te+1)-1,Ge=j[Ie],Ce=Ie+1,be=j[Ce];if(0>s(Ge,X))Ce<le&&0>s(be,Ge)?(j[te]=be,j[Ce]=X,te=Ce):(j[te]=Ge,j[Ie]=X,te=Ie);else if(Ce<le&&0>s(be,X))j[te]=be,j[Ce]=X,te=Ce;else break e}}return B}function s(j,B){var X=j.sortIndex-B.sortIndex;return X!==0?X:j.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],f=1,d=null,h=3,g=!1,_=!1,E=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(j){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=j)r(u),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(u)}}function A(j){if(E=!1,T(j),!_)if(n(l)!==null)_=!0,Z(O);else{var B=n(u);B!==null&&ge(A,B.startTime-j)}}function O(j,B){_=!1,E&&(E=!1,v(S),S=-1),g=!0;var X=h;try{for(T(B),d=n(l);d!==null&&(!(d.expirationTime>B)||j&&!N());){var te=d.callback;if(typeof te=="function"){d.callback=null,h=d.priorityLevel;var le=te(d.expirationTime<=B);B=t.unstable_now(),typeof le=="function"?d.callback=le:d===n(l)&&r(l),T(B)}else r(l);d=n(l)}if(d!==null)var se=!0;else{var Ie=n(u);Ie!==null&&ge(A,Ie.startTime-B),se=!1}return se}finally{d=null,h=X,g=!1}}var V=!1,C=null,S=-1,R=5,k=-1;function N(){return!(t.unstable_now()-k<R)}function D(){if(C!==null){var j=t.unstable_now();k=j;var B=!0;try{B=C(!0,j)}finally{B?P():(V=!1,C=null)}}else V=!1}var P;if(typeof b=="function")P=function(){b(D)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,pe=ce.port2;ce.port1.onmessage=D,P=function(){pe.postMessage(null)}}else P=function(){x(D,0)};function Z(j){C=j,V||(V=!0,P())}function ge(j,B){S=x(function(){j(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,Z(O))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var X=h;h=B;try{return j()}finally{h=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,B){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var X=h;h=j;try{return B()}finally{h=X}},t.unstable_scheduleCallback=function(j,B,X){var te=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?te+X:te):X=te,j){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=X+le,j={id:f++,callback:B,priorityLevel:j,startTime:X,expirationTime:le,sortIndex:-1},X>te?(j.sortIndex=X,e(u,j),n(l)===null&&j===n(u)&&(E?(v(S),S=-1):E=!0,ge(A,X-te))):(j.sortIndex=le,e(l,j),_||g||(_=!0,Z(O))),j},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(j){var B=h;return function(){var X=h;h=B;try{return j.apply(this,arguments)}finally{h=X}}}})(bC);EC.exports=bC;var SO=EC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CO=y,cr=SO;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TC=new Set,Pc={};function Aa(t,e){Wl(t,e),Wl(t+"Capture",e)}function Wl(t,e){for(Pc[t]=e,t=0;t<e.length;t++)TC.add(e[t])}var si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wy=Object.prototype.hasOwnProperty,IO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uE={},cE={};function RO(t){return wy.call(cE,t)?!0:wy.call(uE,t)?!1:IO.test(t)?cE[t]=!0:(uE[t]=!0,!1)}function kO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function AO(t,e,n,r){if(e===null||typeof e>"u"||kO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ln={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ln[t]=new Vn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ln[e]=new Vn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ln[t]=new Vn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ln[t]=new Vn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ln[t]=new Vn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ln[t]=new Vn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ln[t]=new Vn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ln[t]=new Vn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ln[t]=new Vn(t,5,!1,t.toLowerCase(),null,!1,!1)});var I_=/[\-:]([a-z])/g;function R_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(I_,R_);ln[e]=new Vn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(I_,R_);ln[e]=new Vn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(I_,R_);ln[e]=new Vn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ln[t]=new Vn(t,1,!1,t.toLowerCase(),null,!1,!1)});ln.xlinkHref=new Vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ln[t]=new Vn(t,1,!1,t.toLowerCase(),null,!0,!0)});function k_(t,e,n,r){var s=ln.hasOwnProperty(e)?ln[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AO(e,n,s,r)&&(n=null),r||s===null?RO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var yi=CO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sf=Symbol.for("react.element"),nl=Symbol.for("react.portal"),rl=Symbol.for("react.fragment"),A_=Symbol.for("react.strict_mode"),xy=Symbol.for("react.profiler"),SC=Symbol.for("react.provider"),CC=Symbol.for("react.context"),P_=Symbol.for("react.forward_ref"),Ey=Symbol.for("react.suspense"),by=Symbol.for("react.suspense_list"),N_=Symbol.for("react.memo"),Ni=Symbol.for("react.lazy"),IC=Symbol.for("react.offscreen"),dE=Symbol.iterator;function Vu(t){return t===null||typeof t!="object"?null:(t=dE&&t[dE]||t["@@iterator"],typeof t=="function"?t:null)}var gt=Object.assign,fg;function tc(t){if(fg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fg=e&&e[1]||""}return`
`+fg+t}var hg=!1;function pg(t,e){if(!t||hg)return"";hg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{hg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?tc(t):""}function PO(t){switch(t.tag){case 5:return tc(t.type);case 16:return tc("Lazy");case 13:return tc("Suspense");case 19:return tc("SuspenseList");case 0:case 2:case 15:return t=pg(t.type,!1),t;case 11:return t=pg(t.type.render,!1),t;case 1:return t=pg(t.type,!0),t;default:return""}}function Ty(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case rl:return"Fragment";case nl:return"Portal";case xy:return"Profiler";case A_:return"StrictMode";case Ey:return"Suspense";case by:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case CC:return(t.displayName||"Context")+".Consumer";case SC:return(t._context.displayName||"Context")+".Provider";case P_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N_:return e=t.displayName||null,e!==null?e:Ty(t.type)||"Memo";case Ni:e=t._payload,t=t._init;try{return Ty(t(e))}catch{}}return null}function NO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ty(e);case 8:return e===A_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function RC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DO(t){var e=RC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cf(t){t._valueTracker||(t._valueTracker=DO(t))}function kC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=RC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function jh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sy(t,e){var n=e.checked;return gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function fE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=mo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function AC(t,e){e=e.checked,e!=null&&k_(t,"checked",e,!1)}function Cy(t,e){AC(t,e);var n=mo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Iy(t,e.type,n):e.hasOwnProperty("defaultValue")&&Iy(t,e.type,mo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Iy(t,e,n){(e!=="number"||jh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var nc=Array.isArray;function ml(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mo(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ry(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return gt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(nc(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:mo(n)}}function PC(t,e){var n=mo(e.value),r=mo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function mE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function NC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ky(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?NC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var If,DC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(If=If||document.createElement("div"),If.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=If.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Nc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OO=["Webkit","ms","Moz","O"];Object.keys(pc).forEach(function(t){OO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pc[e]=pc[t]})});function OC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pc.hasOwnProperty(t)&&pc[t]?(""+e).trim():e+"px"}function MC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=OC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var MO=gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ay(t,e){if(e){if(MO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Py(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ny=null;function D_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dy=null,gl=null,yl=null;function gE(t){if(t=Nd(t)){if(typeof Dy!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Qp(e),Dy(t.stateNode,t.type,e))}}function LC(t){gl?yl?yl.push(t):yl=[t]:gl=t}function jC(){if(gl){var t=gl,e=yl;if(yl=gl=null,gE(t),e)for(t=0;t<e.length;t++)gE(e[t])}}function VC(t,e){return t(e)}function FC(){}var mg=!1;function UC(t,e,n){if(mg)return t(e,n);mg=!0;try{return VC(t,e,n)}finally{mg=!1,(gl!==null||yl!==null)&&(FC(),jC())}}function Dc(t,e){var n=t.stateNode;if(n===null)return null;var r=Qp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Oy=!1;if(si)try{var Fu={};Object.defineProperty(Fu,"passive",{get:function(){Oy=!0}}),window.addEventListener("test",Fu,Fu),window.removeEventListener("test",Fu,Fu)}catch{Oy=!1}function LO(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var mc=!1,Vh=null,Fh=!1,My=null,jO={onError:function(t){mc=!0,Vh=t}};function VO(t,e,n,r,s,i,o,a,l){mc=!1,Vh=null,LO.apply(jO,arguments)}function FO(t,e,n,r,s,i,o,a,l){if(VO.apply(this,arguments),mc){if(mc){var u=Vh;mc=!1,Vh=null}else throw Error(Y(198));Fh||(Fh=!0,My=u)}}function Pa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $C(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yE(t){if(Pa(t)!==t)throw Error(Y(188))}function UO(t){var e=t.alternate;if(!e){if(e=Pa(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return yE(s),t;if(i===r)return yE(s),e;i=i.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function BC(t){return t=UO(t),t!==null?zC(t):null}function zC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zC(t);if(e!==null)return e;t=t.sibling}return null}var WC=cr.unstable_scheduleCallback,vE=cr.unstable_cancelCallback,$O=cr.unstable_shouldYield,BO=cr.unstable_requestPaint,Rt=cr.unstable_now,zO=cr.unstable_getCurrentPriorityLevel,O_=cr.unstable_ImmediatePriority,HC=cr.unstable_UserBlockingPriority,Uh=cr.unstable_NormalPriority,WO=cr.unstable_LowPriority,qC=cr.unstable_IdlePriority,Hp=null,hs=null;function HO(t){if(hs&&typeof hs.onCommitFiberRoot=="function")try{hs.onCommitFiberRoot(Hp,t,void 0,(t.current.flags&128)===128)}catch{}}var jr=Math.clz32?Math.clz32:KO,qO=Math.log,GO=Math.LN2;function KO(t){return t>>>=0,t===0?32:31-(qO(t)/GO|0)|0}var Rf=64,kf=4194304;function rc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $h(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=rc(a):(i&=o,i!==0&&(r=rc(i)))}else o=n&~s,o!==0?r=rc(o):i!==0&&(r=rc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-jr(e),s=1<<n,r|=t[n],e&=~s;return r}function QO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-jr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=QO(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Ly(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function GC(){var t=Rf;return Rf<<=1,!(Rf&4194240)&&(Rf=64),t}function gg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ad(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jr(e),t[e]=n}function ZO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-jr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function M_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-jr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ze=0;function KC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var QC,L_,YC,ZC,XC,jy=!1,Af=[],no=null,ro=null,so=null,Oc=new Map,Mc=new Map,Oi=[],XO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _E(t,e){switch(t){case"focusin":case"focusout":no=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":so=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mc.delete(e.pointerId)}}function Uu(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Nd(e),e!==null&&L_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function JO(t,e,n,r,s){switch(e){case"focusin":return no=Uu(no,t,e,n,r,s),!0;case"dragenter":return ro=Uu(ro,t,e,n,r,s),!0;case"mouseover":return so=Uu(so,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Oc.set(i,Uu(Oc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Mc.set(i,Uu(Mc.get(i)||null,t,e,n,r,s)),!0}return!1}function JC(t){var e=qo(t.target);if(e!==null){var n=Pa(e);if(n!==null){if(e=n.tag,e===13){if(e=$C(n),e!==null){t.blockedOn=e,XC(t.priority,function(){YC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function uh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ny=r,n.target.dispatchEvent(r),Ny=null}else return e=Nd(n),e!==null&&L_(e),t.blockedOn=n,!1;e.shift()}return!0}function wE(t,e,n){uh(t)&&n.delete(e)}function eM(){jy=!1,no!==null&&uh(no)&&(no=null),ro!==null&&uh(ro)&&(ro=null),so!==null&&uh(so)&&(so=null),Oc.forEach(wE),Mc.forEach(wE)}function $u(t,e){t.blockedOn===e&&(t.blockedOn=null,jy||(jy=!0,cr.unstable_scheduleCallback(cr.unstable_NormalPriority,eM)))}function Lc(t){function e(s){return $u(s,t)}if(0<Af.length){$u(Af[0],t);for(var n=1;n<Af.length;n++){var r=Af[n];r.blockedOn===t&&(r.blockedOn=null)}}for(no!==null&&$u(no,t),ro!==null&&$u(ro,t),so!==null&&$u(so,t),Oc.forEach(e),Mc.forEach(e),n=0;n<Oi.length;n++)r=Oi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Oi.length&&(n=Oi[0],n.blockedOn===null);)JC(n),n.blockedOn===null&&Oi.shift()}var vl=yi.ReactCurrentBatchConfig,Bh=!0;function tM(t,e,n,r){var s=Ze,i=vl.transition;vl.transition=null;try{Ze=1,j_(t,e,n,r)}finally{Ze=s,vl.transition=i}}function nM(t,e,n,r){var s=Ze,i=vl.transition;vl.transition=null;try{Ze=4,j_(t,e,n,r)}finally{Ze=s,vl.transition=i}}function j_(t,e,n,r){if(Bh){var s=Vy(t,e,n,r);if(s===null)Cg(t,e,r,zh,n),_E(t,r);else if(JO(s,t,e,n,r))r.stopPropagation();else if(_E(t,r),e&4&&-1<XO.indexOf(t)){for(;s!==null;){var i=Nd(s);if(i!==null&&QC(i),i=Vy(t,e,n,r),i===null&&Cg(t,e,r,zh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Cg(t,e,r,null,n)}}var zh=null;function Vy(t,e,n,r){if(zh=null,t=D_(r),t=qo(t),t!==null)if(e=Pa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$C(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zh=t,null}function eI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zO()){case O_:return 1;case HC:return 4;case Uh:case WO:return 16;case qC:return 536870912;default:return 16}default:return 16}}var Ji=null,V_=null,ch=null;function tI(){if(ch)return ch;var t,e=V_,n=e.length,r,s="value"in Ji?Ji.value:Ji.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ch=s.slice(t,1<r?1-r:void 0)}function dh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Pf(){return!0}function xE(){return!1}function fr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Pf:xE,this.isPropagationStopped=xE,this}return gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pf)},persist:function(){},isPersistent:Pf}),e}var pu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},F_=fr(pu),Pd=gt({},pu,{view:0,detail:0}),rM=fr(Pd),yg,vg,Bu,qp=gt({},Pd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:U_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bu&&(Bu&&t.type==="mousemove"?(yg=t.screenX-Bu.screenX,vg=t.screenY-Bu.screenY):vg=yg=0,Bu=t),yg)},movementY:function(t){return"movementY"in t?t.movementY:vg}}),EE=fr(qp),sM=gt({},qp,{dataTransfer:0}),iM=fr(sM),oM=gt({},Pd,{relatedTarget:0}),_g=fr(oM),aM=gt({},pu,{animationName:0,elapsedTime:0,pseudoElement:0}),lM=fr(aM),uM=gt({},pu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cM=fr(uM),dM=gt({},pu,{data:0}),bE=fr(dM),fM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pM[t])?!!e[t]:!1}function U_(){return mM}var gM=gt({},Pd,{key:function(t){if(t.key){var e=fM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=dh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:U_,charCode:function(t){return t.type==="keypress"?dh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?dh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yM=fr(gM),vM=gt({},qp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),TE=fr(vM),_M=gt({},Pd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:U_}),wM=fr(_M),xM=gt({},pu,{propertyName:0,elapsedTime:0,pseudoElement:0}),EM=fr(xM),bM=gt({},qp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TM=fr(bM),SM=[9,13,27,32],$_=si&&"CompositionEvent"in window,gc=null;si&&"documentMode"in document&&(gc=document.documentMode);var CM=si&&"TextEvent"in window&&!gc,nI=si&&(!$_||gc&&8<gc&&11>=gc),SE=" ",CE=!1;function rI(t,e){switch(t){case"keyup":return SM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var sl=!1;function IM(t,e){switch(t){case"compositionend":return sI(e);case"keypress":return e.which!==32?null:(CE=!0,SE);case"textInput":return t=e.data,t===SE&&CE?null:t;default:return null}}function RM(t,e){if(sl)return t==="compositionend"||!$_&&rI(t,e)?(t=tI(),ch=V_=Ji=null,sl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nI&&e.locale!=="ko"?null:e.data;default:return null}}var kM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function IE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kM[t.type]:e==="textarea"}function iI(t,e,n,r){LC(r),e=Wh(e,"onChange"),0<e.length&&(n=new F_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yc=null,jc=null;function AM(t){gI(t,0)}function Gp(t){var e=al(t);if(kC(e))return t}function PM(t,e){if(t==="change")return e}var oI=!1;if(si){var wg;if(si){var xg="oninput"in document;if(!xg){var RE=document.createElement("div");RE.setAttribute("oninput","return;"),xg=typeof RE.oninput=="function"}wg=xg}else wg=!1;oI=wg&&(!document.documentMode||9<document.documentMode)}function kE(){yc&&(yc.detachEvent("onpropertychange",aI),jc=yc=null)}function aI(t){if(t.propertyName==="value"&&Gp(jc)){var e=[];iI(e,jc,t,D_(t)),UC(AM,e)}}function NM(t,e,n){t==="focusin"?(kE(),yc=e,jc=n,yc.attachEvent("onpropertychange",aI)):t==="focusout"&&kE()}function DM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gp(jc)}function OM(t,e){if(t==="click")return Gp(e)}function MM(t,e){if(t==="input"||t==="change")return Gp(e)}function LM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $r=typeof Object.is=="function"?Object.is:LM;function Vc(t,e){if($r(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!wy.call(e,s)||!$r(t[s],e[s]))return!1}return!0}function AE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function PE(t,e){var n=AE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=AE(n)}}function lI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?lI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uI(){for(var t=window,e=jh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=jh(t.document)}return e}function B_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jM(t){var e=uI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&lI(n.ownerDocument.documentElement,n)){if(r!==null&&B_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=PE(n,i);var o=PE(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var VM=si&&"documentMode"in document&&11>=document.documentMode,il=null,Fy=null,vc=null,Uy=!1;function NE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uy||il==null||il!==jh(r)||(r=il,"selectionStart"in r&&B_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vc&&Vc(vc,r)||(vc=r,r=Wh(Fy,"onSelect"),0<r.length&&(e=new F_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=il)))}function Nf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ol={animationend:Nf("Animation","AnimationEnd"),animationiteration:Nf("Animation","AnimationIteration"),animationstart:Nf("Animation","AnimationStart"),transitionend:Nf("Transition","TransitionEnd")},Eg={},cI={};si&&(cI=document.createElement("div").style,"AnimationEvent"in window||(delete ol.animationend.animation,delete ol.animationiteration.animation,delete ol.animationstart.animation),"TransitionEvent"in window||delete ol.transitionend.transition);function Kp(t){if(Eg[t])return Eg[t];if(!ol[t])return t;var e=ol[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in cI)return Eg[t]=e[n];return t}var dI=Kp("animationend"),fI=Kp("animationiteration"),hI=Kp("animationstart"),pI=Kp("transitionend"),mI=new Map,DE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Io(t,e){mI.set(t,e),Aa(e,[t])}for(var bg=0;bg<DE.length;bg++){var Tg=DE[bg],FM=Tg.toLowerCase(),UM=Tg[0].toUpperCase()+Tg.slice(1);Io(FM,"on"+UM)}Io(dI,"onAnimationEnd");Io(fI,"onAnimationIteration");Io(hI,"onAnimationStart");Io("dblclick","onDoubleClick");Io("focusin","onFocus");Io("focusout","onBlur");Io(pI,"onTransitionEnd");Wl("onMouseEnter",["mouseout","mouseover"]);Wl("onMouseLeave",["mouseout","mouseover"]);Wl("onPointerEnter",["pointerout","pointerover"]);Wl("onPointerLeave",["pointerout","pointerover"]);Aa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Aa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Aa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Aa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Aa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Aa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$M=new Set("cancel close invalid load scroll toggle".split(" ").concat(sc));function OE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,FO(r,e,void 0,t),t.currentTarget=null}function gI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;OE(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;OE(s,a,u),i=l}}}if(Fh)throw t=My,Fh=!1,My=null,t}function it(t,e){var n=e[Hy];n===void 0&&(n=e[Hy]=new Set);var r=t+"__bubble";n.has(r)||(yI(e,t,2,!1),n.add(r))}function Sg(t,e,n){var r=0;e&&(r|=4),yI(n,t,r,e)}var Df="_reactListening"+Math.random().toString(36).slice(2);function Fc(t){if(!t[Df]){t[Df]=!0,TC.forEach(function(n){n!=="selectionchange"&&($M.has(n)||Sg(n,!1,t),Sg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Df]||(e[Df]=!0,Sg("selectionchange",!1,e))}}function yI(t,e,n,r){switch(eI(e)){case 1:var s=tM;break;case 4:s=nM;break;default:s=j_}n=s.bind(null,e,n,t),s=void 0,!Oy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Cg(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=qo(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}UC(function(){var u=i,f=D_(n),d=[];e:{var h=mI.get(t);if(h!==void 0){var g=F_,_=t;switch(t){case"keypress":if(dh(n)===0)break e;case"keydown":case"keyup":g=yM;break;case"focusin":_="focus",g=_g;break;case"focusout":_="blur",g=_g;break;case"beforeblur":case"afterblur":g=_g;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=EE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=iM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=wM;break;case dI:case fI:case hI:g=lM;break;case pI:g=EM;break;case"scroll":g=rM;break;case"wheel":g=TM;break;case"copy":case"cut":case"paste":g=cM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=TE}var E=(e&4)!==0,x=!E&&t==="scroll",v=E?h!==null?h+"Capture":null:h;E=[];for(var b=u,T;b!==null;){T=b;var A=T.stateNode;if(T.tag===5&&A!==null&&(T=A,v!==null&&(A=Dc(b,v),A!=null&&E.push(Uc(b,A,T)))),x)break;b=b.return}0<E.length&&(h=new g(h,_,null,n,f),d.push({event:h,listeners:E}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&n!==Ny&&(_=n.relatedTarget||n.fromElement)&&(qo(_)||_[ii]))break e;if((g||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=u,_=_?qo(_):null,_!==null&&(x=Pa(_),_!==x||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=u),g!==_)){if(E=EE,A="onMouseLeave",v="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(E=TE,A="onPointerLeave",v="onPointerEnter",b="pointer"),x=g==null?h:al(g),T=_==null?h:al(_),h=new E(A,b+"leave",g,n,f),h.target=x,h.relatedTarget=T,A=null,qo(f)===u&&(E=new E(v,b+"enter",_,n,f),E.target=T,E.relatedTarget=x,A=E),x=A,g&&_)t:{for(E=g,v=_,b=0,T=E;T;T=qa(T))b++;for(T=0,A=v;A;A=qa(A))T++;for(;0<b-T;)E=qa(E),b--;for(;0<T-b;)v=qa(v),T--;for(;b--;){if(E===v||v!==null&&E===v.alternate)break t;E=qa(E),v=qa(v)}E=null}else E=null;g!==null&&ME(d,h,g,E,!1),_!==null&&x!==null&&ME(d,x,_,E,!0)}}e:{if(h=u?al(u):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var O=PM;else if(IE(h))if(oI)O=MM;else{O=DM;var V=NM}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(O=OM);if(O&&(O=O(t,u))){iI(d,O,n,f);break e}V&&V(t,h,u),t==="focusout"&&(V=h._wrapperState)&&V.controlled&&h.type==="number"&&Iy(h,"number",h.value)}switch(V=u?al(u):window,t){case"focusin":(IE(V)||V.contentEditable==="true")&&(il=V,Fy=u,vc=null);break;case"focusout":vc=Fy=il=null;break;case"mousedown":Uy=!0;break;case"contextmenu":case"mouseup":case"dragend":Uy=!1,NE(d,n,f);break;case"selectionchange":if(VM)break;case"keydown":case"keyup":NE(d,n,f)}var C;if($_)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else sl?rI(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(nI&&n.locale!=="ko"&&(sl||S!=="onCompositionStart"?S==="onCompositionEnd"&&sl&&(C=tI()):(Ji=f,V_="value"in Ji?Ji.value:Ji.textContent,sl=!0)),V=Wh(u,S),0<V.length&&(S=new bE(S,t,null,n,f),d.push({event:S,listeners:V}),C?S.data=C:(C=sI(n),C!==null&&(S.data=C)))),(C=CM?IM(t,n):RM(t,n))&&(u=Wh(u,"onBeforeInput"),0<u.length&&(f=new bE("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=C))}gI(d,e)})}function Uc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Dc(t,n),i!=null&&r.unshift(Uc(t,i,s)),i=Dc(t,e),i!=null&&r.push(Uc(t,i,s))),t=t.return}return r}function qa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ME(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Dc(n,i),l!=null&&o.unshift(Uc(n,l,a))):s||(l=Dc(n,i),l!=null&&o.push(Uc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var BM=/\r\n?/g,zM=/\u0000|\uFFFD/g;function LE(t){return(typeof t=="string"?t:""+t).replace(BM,`
`).replace(zM,"")}function Of(t,e,n){if(e=LE(e),LE(t)!==e&&n)throw Error(Y(425))}function Hh(){}var $y=null,By=null;function zy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wy=typeof setTimeout=="function"?setTimeout:void 0,WM=typeof clearTimeout=="function"?clearTimeout:void 0,jE=typeof Promise=="function"?Promise:void 0,HM=typeof queueMicrotask=="function"?queueMicrotask:typeof jE<"u"?function(t){return jE.resolve(null).then(t).catch(qM)}:Wy;function qM(t){setTimeout(function(){throw t})}function Ig(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Lc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Lc(e)}function io(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function VE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var mu=Math.random().toString(36).slice(2),us="__reactFiber$"+mu,$c="__reactProps$"+mu,ii="__reactContainer$"+mu,Hy="__reactEvents$"+mu,GM="__reactListeners$"+mu,KM="__reactHandles$"+mu;function qo(t){var e=t[us];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ii]||n[us]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=VE(t);t!==null;){if(n=t[us])return n;t=VE(t)}return e}t=n,n=t.parentNode}return null}function Nd(t){return t=t[us]||t[ii],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function al(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Qp(t){return t[$c]||null}var qy=[],ll=-1;function Ro(t){return{current:t}}function ot(t){0>ll||(t.current=qy[ll],qy[ll]=null,ll--)}function rt(t,e){ll++,qy[ll]=t.current,t.current=e}var go={},bn=Ro(go),Qn=Ro(!1),fa=go;function Hl(t,e){var n=t.type.contextTypes;if(!n)return go;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Yn(t){return t=t.childContextTypes,t!=null}function qh(){ot(Qn),ot(bn)}function FE(t,e,n){if(bn.current!==go)throw Error(Y(168));rt(bn,e),rt(Qn,n)}function vI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Y(108,NO(t)||"Unknown",s));return gt({},n,r)}function Gh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||go,fa=bn.current,rt(bn,t),rt(Qn,Qn.current),!0}function UE(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=vI(t,e,fa),r.__reactInternalMemoizedMergedChildContext=t,ot(Qn),ot(bn),rt(bn,t)):ot(Qn),rt(Qn,n)}var Bs=null,Yp=!1,Rg=!1;function _I(t){Bs===null?Bs=[t]:Bs.push(t)}function QM(t){Yp=!0,_I(t)}function ko(){if(!Rg&&Bs!==null){Rg=!0;var t=0,e=Ze;try{var n=Bs;for(Ze=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bs=null,Yp=!1}catch(s){throw Bs!==null&&(Bs=Bs.slice(t+1)),WC(O_,ko),s}finally{Ze=e,Rg=!1}}return null}var ul=[],cl=0,Kh=null,Qh=0,gr=[],yr=0,ha=null,Gs=1,Ks="";function zo(t,e){ul[cl++]=Qh,ul[cl++]=Kh,Kh=t,Qh=e}function wI(t,e,n){gr[yr++]=Gs,gr[yr++]=Ks,gr[yr++]=ha,ha=t;var r=Gs;t=Ks;var s=32-jr(r)-1;r&=~(1<<s),n+=1;var i=32-jr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Gs=1<<32-jr(e)+s|n<<s|r,Ks=i+t}else Gs=1<<i|n<<s|r,Ks=t}function z_(t){t.return!==null&&(zo(t,1),wI(t,1,0))}function W_(t){for(;t===Kh;)Kh=ul[--cl],ul[cl]=null,Qh=ul[--cl],ul[cl]=null;for(;t===ha;)ha=gr[--yr],gr[yr]=null,Ks=gr[--yr],gr[yr]=null,Gs=gr[--yr],gr[yr]=null}var or=null,rr=null,ct=!1,Pr=null;function xI(t,e){var n=vr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $E(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,or=t,rr=io(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,or=t,rr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ha!==null?{id:Gs,overflow:Ks}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,or=t,rr=null,!0):!1;default:return!1}}function Gy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ky(t){if(ct){var e=rr;if(e){var n=e;if(!$E(t,e)){if(Gy(t))throw Error(Y(418));e=io(n.nextSibling);var r=or;e&&$E(t,e)?xI(r,n):(t.flags=t.flags&-4097|2,ct=!1,or=t)}}else{if(Gy(t))throw Error(Y(418));t.flags=t.flags&-4097|2,ct=!1,or=t}}}function BE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;or=t}function Mf(t){if(t!==or)return!1;if(!ct)return BE(t),ct=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zy(t.type,t.memoizedProps)),e&&(e=rr)){if(Gy(t))throw EI(),Error(Y(418));for(;e;)xI(t,e),e=io(e.nextSibling)}if(BE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rr=io(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rr=null}}else rr=or?io(t.stateNode.nextSibling):null;return!0}function EI(){for(var t=rr;t;)t=io(t.nextSibling)}function ql(){rr=or=null,ct=!1}function H_(t){Pr===null?Pr=[t]:Pr.push(t)}var YM=yi.ReactCurrentBatchConfig;function zu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function Lf(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zE(t){var e=t._init;return e(t._payload)}function bI(t){function e(v,b){if(t){var T=v.deletions;T===null?(v.deletions=[b],v.flags|=16):T.push(b)}}function n(v,b){if(!t)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function r(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function s(v,b){return v=uo(v,b),v.index=0,v.sibling=null,v}function i(v,b,T){return v.index=T,t?(T=v.alternate,T!==null?(T=T.index,T<b?(v.flags|=2,b):T):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,b,T,A){return b===null||b.tag!==6?(b=Mg(T,v.mode,A),b.return=v,b):(b=s(b,T),b.return=v,b)}function l(v,b,T,A){var O=T.type;return O===rl?f(v,b,T.props.children,A,T.key):b!==null&&(b.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ni&&zE(O)===b.type)?(A=s(b,T.props),A.ref=zu(v,b,T),A.return=v,A):(A=vh(T.type,T.key,T.props,null,v.mode,A),A.ref=zu(v,b,T),A.return=v,A)}function u(v,b,T,A){return b===null||b.tag!==4||b.stateNode.containerInfo!==T.containerInfo||b.stateNode.implementation!==T.implementation?(b=Lg(T,v.mode,A),b.return=v,b):(b=s(b,T.children||[]),b.return=v,b)}function f(v,b,T,A,O){return b===null||b.tag!==7?(b=aa(T,v.mode,A,O),b.return=v,b):(b=s(b,T),b.return=v,b)}function d(v,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Mg(""+b,v.mode,T),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Sf:return T=vh(b.type,b.key,b.props,null,v.mode,T),T.ref=zu(v,null,b),T.return=v,T;case nl:return b=Lg(b,v.mode,T),b.return=v,b;case Ni:var A=b._init;return d(v,A(b._payload),T)}if(nc(b)||Vu(b))return b=aa(b,v.mode,T,null),b.return=v,b;Lf(v,b)}return null}function h(v,b,T,A){var O=b!==null?b.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return O!==null?null:a(v,b,""+T,A);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Sf:return T.key===O?l(v,b,T,A):null;case nl:return T.key===O?u(v,b,T,A):null;case Ni:return O=T._init,h(v,b,O(T._payload),A)}if(nc(T)||Vu(T))return O!==null?null:f(v,b,T,A,null);Lf(v,T)}return null}function g(v,b,T,A,O){if(typeof A=="string"&&A!==""||typeof A=="number")return v=v.get(T)||null,a(b,v,""+A,O);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Sf:return v=v.get(A.key===null?T:A.key)||null,l(b,v,A,O);case nl:return v=v.get(A.key===null?T:A.key)||null,u(b,v,A,O);case Ni:var V=A._init;return g(v,b,T,V(A._payload),O)}if(nc(A)||Vu(A))return v=v.get(T)||null,f(b,v,A,O,null);Lf(b,A)}return null}function _(v,b,T,A){for(var O=null,V=null,C=b,S=b=0,R=null;C!==null&&S<T.length;S++){C.index>S?(R=C,C=null):R=C.sibling;var k=h(v,C,T[S],A);if(k===null){C===null&&(C=R);break}t&&C&&k.alternate===null&&e(v,C),b=i(k,b,S),V===null?O=k:V.sibling=k,V=k,C=R}if(S===T.length)return n(v,C),ct&&zo(v,S),O;if(C===null){for(;S<T.length;S++)C=d(v,T[S],A),C!==null&&(b=i(C,b,S),V===null?O=C:V.sibling=C,V=C);return ct&&zo(v,S),O}for(C=r(v,C);S<T.length;S++)R=g(C,v,S,T[S],A),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?S:R.key),b=i(R,b,S),V===null?O=R:V.sibling=R,V=R);return t&&C.forEach(function(N){return e(v,N)}),ct&&zo(v,S),O}function E(v,b,T,A){var O=Vu(T);if(typeof O!="function")throw Error(Y(150));if(T=O.call(T),T==null)throw Error(Y(151));for(var V=O=null,C=b,S=b=0,R=null,k=T.next();C!==null&&!k.done;S++,k=T.next()){C.index>S?(R=C,C=null):R=C.sibling;var N=h(v,C,k.value,A);if(N===null){C===null&&(C=R);break}t&&C&&N.alternate===null&&e(v,C),b=i(N,b,S),V===null?O=N:V.sibling=N,V=N,C=R}if(k.done)return n(v,C),ct&&zo(v,S),O;if(C===null){for(;!k.done;S++,k=T.next())k=d(v,k.value,A),k!==null&&(b=i(k,b,S),V===null?O=k:V.sibling=k,V=k);return ct&&zo(v,S),O}for(C=r(v,C);!k.done;S++,k=T.next())k=g(C,v,S,k.value,A),k!==null&&(t&&k.alternate!==null&&C.delete(k.key===null?S:k.key),b=i(k,b,S),V===null?O=k:V.sibling=k,V=k);return t&&C.forEach(function(D){return e(v,D)}),ct&&zo(v,S),O}function x(v,b,T,A){if(typeof T=="object"&&T!==null&&T.type===rl&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Sf:e:{for(var O=T.key,V=b;V!==null;){if(V.key===O){if(O=T.type,O===rl){if(V.tag===7){n(v,V.sibling),b=s(V,T.props.children),b.return=v,v=b;break e}}else if(V.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ni&&zE(O)===V.type){n(v,V.sibling),b=s(V,T.props),b.ref=zu(v,V,T),b.return=v,v=b;break e}n(v,V);break}else e(v,V);V=V.sibling}T.type===rl?(b=aa(T.props.children,v.mode,A,T.key),b.return=v,v=b):(A=vh(T.type,T.key,T.props,null,v.mode,A),A.ref=zu(v,b,T),A.return=v,v=A)}return o(v);case nl:e:{for(V=T.key;b!==null;){if(b.key===V)if(b.tag===4&&b.stateNode.containerInfo===T.containerInfo&&b.stateNode.implementation===T.implementation){n(v,b.sibling),b=s(b,T.children||[]),b.return=v,v=b;break e}else{n(v,b);break}else e(v,b);b=b.sibling}b=Lg(T,v.mode,A),b.return=v,v=b}return o(v);case Ni:return V=T._init,x(v,b,V(T._payload),A)}if(nc(T))return _(v,b,T,A);if(Vu(T))return E(v,b,T,A);Lf(v,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,b!==null&&b.tag===6?(n(v,b.sibling),b=s(b,T),b.return=v,v=b):(n(v,b),b=Mg(T,v.mode,A),b.return=v,v=b),o(v)):n(v,b)}return x}var Gl=bI(!0),TI=bI(!1),Yh=Ro(null),Zh=null,dl=null,q_=null;function G_(){q_=dl=Zh=null}function K_(t){var e=Yh.current;ot(Yh),t._currentValue=e}function Qy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _l(t,e){Zh=t,q_=dl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kn=!0),t.firstContext=null)}function xr(t){var e=t._currentValue;if(q_!==t)if(t={context:t,memoizedValue:e,next:null},dl===null){if(Zh===null)throw Error(Y(308));dl=t,Zh.dependencies={lanes:0,firstContext:t}}else dl=dl.next=t;return e}var Go=null;function Q_(t){Go===null?Go=[t]:Go.push(t)}function SI(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Q_(e)):(n.next=s.next,s.next=n),e.interleaved=n,oi(t,r)}function oi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Di=!1;function Y_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Js(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function oo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,We&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,oi(t,n)}return s=r.interleaved,s===null?(e.next=e,Q_(r)):(e.next=s.next,s.next=e),r.interleaved=e,oi(t,n)}function fh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,M_(t,n)}}function WE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xh(t,e,n,r){var s=t.updateQueue;Di=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=u:a.next=u,f.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,f=u=l=null,a=i;do{var h=a.lane,g=a.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,E=a;switch(h=e,g=n,E.tag){case 1:if(_=E.payload,typeof _=="function"){d=_.call(g,d,h);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=E.payload,h=typeof _=="function"?_.call(g,d,h):_,h==null)break e;d=gt({},d,h);break e;case 2:Di=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else g={eventTime:g,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(u=f=g,l=d):f=f.next=g,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(f===null&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ma|=o,t.lanes=o,t.memoizedState=d}}function HE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var Dd={},ps=Ro(Dd),Bc=Ro(Dd),zc=Ro(Dd);function Ko(t){if(t===Dd)throw Error(Y(174));return t}function Z_(t,e){switch(rt(zc,e),rt(Bc,t),rt(ps,Dd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ky(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ky(e,t)}ot(ps),rt(ps,e)}function Kl(){ot(ps),ot(Bc),ot(zc)}function II(t){Ko(zc.current);var e=Ko(ps.current),n=ky(e,t.type);e!==n&&(rt(Bc,t),rt(ps,n))}function X_(t){Bc.current===t&&(ot(ps),ot(Bc))}var pt=Ro(0);function Jh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kg=[];function J_(){for(var t=0;t<kg.length;t++)kg[t]._workInProgressVersionPrimary=null;kg.length=0}var hh=yi.ReactCurrentDispatcher,Ag=yi.ReactCurrentBatchConfig,pa=0,mt=null,zt=null,Gt=null,ep=!1,_c=!1,Wc=0,ZM=0;function hn(){throw Error(Y(321))}function ew(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$r(t[n],e[n]))return!1;return!0}function tw(t,e,n,r,s,i){if(pa=i,mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hh.current=t===null||t.memoizedState===null?t2:n2,t=n(r,s),_c){i=0;do{if(_c=!1,Wc=0,25<=i)throw Error(Y(301));i+=1,Gt=zt=null,e.updateQueue=null,hh.current=r2,t=n(r,s)}while(_c)}if(hh.current=tp,e=zt!==null&&zt.next!==null,pa=0,Gt=zt=mt=null,ep=!1,e)throw Error(Y(300));return t}function nw(){var t=Wc!==0;return Wc=0,t}function ss(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?mt.memoizedState=Gt=t:Gt=Gt.next=t,Gt}function Er(){if(zt===null){var t=mt.alternate;t=t!==null?t.memoizedState:null}else t=zt.next;var e=Gt===null?mt.memoizedState:Gt.next;if(e!==null)Gt=e,zt=t;else{if(t===null)throw Error(Y(310));zt=t,t={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Gt===null?mt.memoizedState=Gt=t:Gt=Gt.next=t}return Gt}function Hc(t,e){return typeof e=="function"?e(t):e}function Pg(t){var e=Er(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=zt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var f=u.lane;if((pa&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,mt.lanes|=f,ma|=f}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,$r(r,e.memoizedState)||(Kn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,mt.lanes|=i,ma|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ng(t){var e=Er(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);$r(i,e.memoizedState)||(Kn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function RI(){}function kI(t,e){var n=mt,r=Er(),s=e(),i=!$r(r.memoizedState,s);if(i&&(r.memoizedState=s,Kn=!0),r=r.queue,rw(NI.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Gt!==null&&Gt.memoizedState.tag&1){if(n.flags|=2048,qc(9,PI.bind(null,n,r,s,e),void 0,null),Kt===null)throw Error(Y(349));pa&30||AI(n,e,s)}return s}function AI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function PI(t,e,n,r){e.value=n,e.getSnapshot=r,DI(e)&&OI(t)}function NI(t,e,n){return n(function(){DI(e)&&OI(t)})}function DI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$r(t,n)}catch{return!0}}function OI(t){var e=oi(t,1);e!==null&&Vr(e,t,1,-1)}function qE(t){var e=ss();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hc,lastRenderedState:t},e.queue=t,t=t.dispatch=e2.bind(null,mt,t),[e.memoizedState,t]}function qc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function MI(){return Er().memoizedState}function ph(t,e,n,r){var s=ss();mt.flags|=t,s.memoizedState=qc(1|e,n,void 0,r===void 0?null:r)}function Zp(t,e,n,r){var s=Er();r=r===void 0?null:r;var i=void 0;if(zt!==null){var o=zt.memoizedState;if(i=o.destroy,r!==null&&ew(r,o.deps)){s.memoizedState=qc(e,n,i,r);return}}mt.flags|=t,s.memoizedState=qc(1|e,n,i,r)}function GE(t,e){return ph(8390656,8,t,e)}function rw(t,e){return Zp(2048,8,t,e)}function LI(t,e){return Zp(4,2,t,e)}function jI(t,e){return Zp(4,4,t,e)}function VI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function FI(t,e,n){return n=n!=null?n.concat([t]):null,Zp(4,4,VI.bind(null,e,t),n)}function sw(){}function UI(t,e){var n=Er();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ew(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $I(t,e){var n=Er();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ew(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function BI(t,e,n){return pa&21?($r(n,e)||(n=GC(),mt.lanes|=n,ma|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kn=!0),t.memoizedState=n)}function XM(t,e){var n=Ze;Ze=n!==0&&4>n?n:4,t(!0);var r=Ag.transition;Ag.transition={};try{t(!1),e()}finally{Ze=n,Ag.transition=r}}function zI(){return Er().memoizedState}function JM(t,e,n){var r=lo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},WI(t))HI(e,n);else if(n=SI(t,e,n,r),n!==null){var s=Dn();Vr(n,t,r,s),qI(n,e,r)}}function e2(t,e,n){var r=lo(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(WI(t))HI(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,$r(a,o)){var l=e.interleaved;l===null?(s.next=s,Q_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=SI(t,e,s,r),n!==null&&(s=Dn(),Vr(n,t,r,s),qI(n,e,r))}}function WI(t){var e=t.alternate;return t===mt||e!==null&&e===mt}function HI(t,e){_c=ep=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function qI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,M_(t,n)}}var tp={readContext:xr,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useInsertionEffect:hn,useLayoutEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useMutableSource:hn,useSyncExternalStore:hn,useId:hn,unstable_isNewReconciler:!1},t2={readContext:xr,useCallback:function(t,e){return ss().memoizedState=[t,e===void 0?null:e],t},useContext:xr,useEffect:GE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ph(4194308,4,VI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ph(4194308,4,t,e)},useInsertionEffect:function(t,e){return ph(4,2,t,e)},useMemo:function(t,e){var n=ss();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ss();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=JM.bind(null,mt,t),[r.memoizedState,t]},useRef:function(t){var e=ss();return t={current:t},e.memoizedState=t},useState:qE,useDebugValue:sw,useDeferredValue:function(t){return ss().memoizedState=t},useTransition:function(){var t=qE(!1),e=t[0];return t=XM.bind(null,t[1]),ss().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=mt,s=ss();if(ct){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),Kt===null)throw Error(Y(349));pa&30||AI(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,GE(NI.bind(null,r,i,t),[t]),r.flags|=2048,qc(9,PI.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ss(),e=Kt.identifierPrefix;if(ct){var n=Ks,r=Gs;n=(r&~(1<<32-jr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ZM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},n2={readContext:xr,useCallback:UI,useContext:xr,useEffect:rw,useImperativeHandle:FI,useInsertionEffect:LI,useLayoutEffect:jI,useMemo:$I,useReducer:Pg,useRef:MI,useState:function(){return Pg(Hc)},useDebugValue:sw,useDeferredValue:function(t){var e=Er();return BI(e,zt.memoizedState,t)},useTransition:function(){var t=Pg(Hc)[0],e=Er().memoizedState;return[t,e]},useMutableSource:RI,useSyncExternalStore:kI,useId:zI,unstable_isNewReconciler:!1},r2={readContext:xr,useCallback:UI,useContext:xr,useEffect:rw,useImperativeHandle:FI,useInsertionEffect:LI,useLayoutEffect:jI,useMemo:$I,useReducer:Ng,useRef:MI,useState:function(){return Ng(Hc)},useDebugValue:sw,useDeferredValue:function(t){var e=Er();return zt===null?e.memoizedState=t:BI(e,zt.memoizedState,t)},useTransition:function(){var t=Ng(Hc)[0],e=Er().memoizedState;return[t,e]},useMutableSource:RI,useSyncExternalStore:kI,useId:zI,unstable_isNewReconciler:!1};function Ir(t,e){if(t&&t.defaultProps){e=gt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Yy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:gt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xp={isMounted:function(t){return(t=t._reactInternals)?Pa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Dn(),s=lo(t),i=Js(r,s);i.payload=e,n!=null&&(i.callback=n),e=oo(t,i,s),e!==null&&(Vr(e,t,s,r),fh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Dn(),s=lo(t),i=Js(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=oo(t,i,s),e!==null&&(Vr(e,t,s,r),fh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dn(),r=lo(t),s=Js(n,r);s.tag=2,e!=null&&(s.callback=e),e=oo(t,s,r),e!==null&&(Vr(e,t,r,n),fh(e,t,r))}};function KE(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Vc(n,r)||!Vc(s,i):!0}function GI(t,e,n){var r=!1,s=go,i=e.contextType;return typeof i=="object"&&i!==null?i=xr(i):(s=Yn(e)?fa:bn.current,r=e.contextTypes,i=(r=r!=null)?Hl(t,s):go),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function QE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xp.enqueueReplaceState(e,e.state,null)}function Zy(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Y_(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=xr(i):(i=Yn(e)?fa:bn.current,s.context=Hl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Yy(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Xp.enqueueReplaceState(s,s.state,null),Xh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ql(t,e){try{var n="",r=e;do n+=PO(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Dg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var s2=typeof WeakMap=="function"?WeakMap:Map;function KI(t,e,n){n=Js(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){rp||(rp=!0,lv=r),Xy(t,e)},n}function QI(t,e,n){n=Js(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Xy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Xy(t,e),typeof r!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function YE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new s2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=v2.bind(null,t,e,n),e.then(t,t))}function ZE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function XE(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Js(-1,1),e.tag=2,oo(n,e,1))),n.lanes|=1),t)}var i2=yi.ReactCurrentOwner,Kn=!1;function Pn(t,e,n,r){e.child=t===null?TI(e,null,n,r):Gl(e,t.child,n,r)}function JE(t,e,n,r,s){n=n.render;var i=e.ref;return _l(e,s),r=tw(t,e,n,r,i,s),n=nw(),t!==null&&!Kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ai(t,e,s)):(ct&&n&&z_(e),e.flags|=1,Pn(t,e,r,s),e.child)}function eb(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!fw(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,YI(t,e,i,r,s)):(t=vh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Vc,n(o,r)&&t.ref===e.ref)return ai(t,e,s)}return e.flags|=1,t=uo(i,r),t.ref=e.ref,t.return=e,e.child=t}function YI(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Vc(i,r)&&t.ref===e.ref)if(Kn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Kn=!0);else return e.lanes=t.lanes,ai(t,e,s)}return Jy(t,e,n,r,s)}function ZI(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(hl,tr),tr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rt(hl,tr),tr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,rt(hl,tr),tr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,rt(hl,tr),tr|=r;return Pn(t,e,s,n),e.child}function XI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Jy(t,e,n,r,s){var i=Yn(n)?fa:bn.current;return i=Hl(e,i),_l(e,s),n=tw(t,e,n,r,i,s),r=nw(),t!==null&&!Kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ai(t,e,s)):(ct&&r&&z_(e),e.flags|=1,Pn(t,e,n,s),e.child)}function tb(t,e,n,r,s){if(Yn(n)){var i=!0;Gh(e)}else i=!1;if(_l(e,s),e.stateNode===null)mh(t,e),GI(e,n,r),Zy(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=xr(u):(u=Yn(n)?fa:bn.current,u=Hl(e,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&QE(e,o,r,u),Di=!1;var h=e.memoizedState;o.state=h,Xh(e,r,o,s),l=e.memoizedState,a!==r||h!==l||Qn.current||Di?(typeof f=="function"&&(Yy(e,n,f,r),l=e.memoizedState),(a=Di||KE(e,n,a,r,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,CI(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ir(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=xr(l):(l=Yn(n)?fa:bn.current,l=Hl(e,l));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&QE(e,o,r,l),Di=!1,h=e.memoizedState,o.state=h,Xh(e,r,o,s);var _=e.memoizedState;a!==d||h!==_||Qn.current||Di?(typeof g=="function"&&(Yy(e,n,g,r),_=e.memoizedState),(u=Di||KE(e,n,u,r,h,_,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return ev(t,e,n,r,i,s)}function ev(t,e,n,r,s,i){XI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&UE(e,n,!1),ai(t,e,i);r=e.stateNode,i2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Gl(e,t.child,null,i),e.child=Gl(e,null,a,i)):Pn(t,e,a,i),e.memoizedState=r.state,s&&UE(e,n,!0),e.child}function JI(t){var e=t.stateNode;e.pendingContext?FE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&FE(t,e.context,!1),Z_(t,e.containerInfo)}function nb(t,e,n,r,s){return ql(),H_(s),e.flags|=256,Pn(t,e,n,r),e.child}var tv={dehydrated:null,treeContext:null,retryLane:0};function nv(t){return{baseLanes:t,cachePool:null,transitions:null}}function eR(t,e,n){var r=e.pendingProps,s=pt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),rt(pt,s&1),t===null)return Ky(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=tm(o,r,0,null),t=aa(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=nv(n),e.memoizedState=tv,t):iw(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return o2(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=uo(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=uo(a,i):(i=aa(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?nv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=tv,r}return i=t.child,t=i.sibling,r=uo(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function iw(t,e){return e=tm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jf(t,e,n,r){return r!==null&&H_(r),Gl(e,t.child,null,n),t=iw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function o2(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Dg(Error(Y(422))),jf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=tm({mode:"visible",children:r.children},s,0,null),i=aa(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Gl(e,t.child,null,o),e.child.memoizedState=nv(o),e.memoizedState=tv,i);if(!(e.mode&1))return jf(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Y(419)),r=Dg(i,r,void 0),jf(t,e,o,r)}if(a=(o&t.childLanes)!==0,Kn||a){if(r=Kt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,oi(t,s),Vr(r,t,s,-1))}return dw(),r=Dg(Error(Y(421))),jf(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=_2.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,rr=io(s.nextSibling),or=e,ct=!0,Pr=null,t!==null&&(gr[yr++]=Gs,gr[yr++]=Ks,gr[yr++]=ha,Gs=t.id,Ks=t.overflow,ha=e),e=iw(e,r.children),e.flags|=4096,e)}function rb(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qy(t.return,e,n)}function Og(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function tR(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Pn(t,e,r.children,n),r=pt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rb(t,n,e);else if(t.tag===19)rb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(rt(pt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Jh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Og(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Jh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Og(e,!0,n,null,i);break;case"together":Og(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ai(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ma|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=uo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=uo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function a2(t,e,n){switch(e.tag){case 3:JI(e),ql();break;case 5:II(e);break;case 1:Yn(e.type)&&Gh(e);break;case 4:Z_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;rt(Yh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(rt(pt,pt.current&1),e.flags|=128,null):n&e.child.childLanes?eR(t,e,n):(rt(pt,pt.current&1),t=ai(t,e,n),t!==null?t.sibling:null);rt(pt,pt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return tR(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),rt(pt,pt.current),r)break;return null;case 22:case 23:return e.lanes=0,ZI(t,e,n)}return ai(t,e,n)}var nR,rv,rR,sR;nR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rv=function(){};rR=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ko(ps.current);var i=null;switch(n){case"input":s=Sy(t,s),r=Sy(t,r),i=[];break;case"select":s=gt({},s,{value:void 0}),r=gt({},r,{value:void 0}),i=[];break;case"textarea":s=Ry(t,s),r=Ry(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Hh)}Ay(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Pc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Pc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&it("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};sR=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wu(t,e){if(!ct)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function l2(t,e,n){var r=e.pendingProps;switch(W_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(e),null;case 1:return Yn(e.type)&&qh(),pn(e),null;case 3:return r=e.stateNode,Kl(),ot(Qn),ot(bn),J_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Mf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pr!==null&&(dv(Pr),Pr=null))),rv(t,e),pn(e),null;case 5:X_(e);var s=Ko(zc.current);if(n=e.type,t!==null&&e.stateNode!=null)rR(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return pn(e),null}if(t=Ko(ps.current),Mf(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[us]=e,r[$c]=i,t=(e.mode&1)!==0,n){case"dialog":it("cancel",r),it("close",r);break;case"iframe":case"object":case"embed":it("load",r);break;case"video":case"audio":for(s=0;s<sc.length;s++)it(sc[s],r);break;case"source":it("error",r);break;case"img":case"image":case"link":it("error",r),it("load",r);break;case"details":it("toggle",r);break;case"input":fE(r,i),it("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},it("invalid",r);break;case"textarea":pE(r,i),it("invalid",r)}Ay(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Of(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Of(r.textContent,a,t),s=["children",""+a]):Pc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&it("scroll",r)}switch(n){case"input":Cf(r),hE(r,i,!0);break;case"textarea":Cf(r),mE(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Hh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=NC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[us]=e,t[$c]=r,nR(t,e,!1,!1),e.stateNode=t;e:{switch(o=Py(n,r),n){case"dialog":it("cancel",t),it("close",t),s=r;break;case"iframe":case"object":case"embed":it("load",t),s=r;break;case"video":case"audio":for(s=0;s<sc.length;s++)it(sc[s],t);s=r;break;case"source":it("error",t),s=r;break;case"img":case"image":case"link":it("error",t),it("load",t),s=r;break;case"details":it("toggle",t),s=r;break;case"input":fE(t,r),s=Sy(t,r),it("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=gt({},r,{value:void 0}),it("invalid",t);break;case"textarea":pE(t,r),s=Ry(t,r),it("invalid",t);break;default:s=r}Ay(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?MC(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&DC(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Nc(t,l):typeof l=="number"&&Nc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Pc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&it("scroll",t):l!=null&&k_(t,i,l,o))}switch(n){case"input":Cf(t),hE(t,r,!1);break;case"textarea":Cf(t),mE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+mo(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ml(t,!!r.multiple,i,!1):r.defaultValue!=null&&ml(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Hh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pn(e),null;case 6:if(t&&e.stateNode!=null)sR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Ko(zc.current),Ko(ps.current),Mf(e)){if(r=e.stateNode,n=e.memoizedProps,r[us]=e,(i=r.nodeValue!==n)&&(t=or,t!==null))switch(t.tag){case 3:Of(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Of(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[us]=e,e.stateNode=r}return pn(e),null;case 13:if(ot(pt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ct&&rr!==null&&e.mode&1&&!(e.flags&128))EI(),ql(),e.flags|=98560,i=!1;else if(i=Mf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Y(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Y(317));i[us]=e}else ql(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pn(e),i=!1}else Pr!==null&&(dv(Pr),Pr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pt.current&1?Ht===0&&(Ht=3):dw())),e.updateQueue!==null&&(e.flags|=4),pn(e),null);case 4:return Kl(),rv(t,e),t===null&&Fc(e.stateNode.containerInfo),pn(e),null;case 10:return K_(e.type._context),pn(e),null;case 17:return Yn(e.type)&&qh(),pn(e),null;case 19:if(ot(pt),i=e.memoizedState,i===null)return pn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Wu(i,!1);else{if(Ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Jh(t),o!==null){for(e.flags|=128,Wu(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return rt(pt,pt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Rt()>Yl&&(e.flags|=128,r=!0,Wu(i,!1),e.lanes=4194304)}else{if(!r)if(t=Jh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ct)return pn(e),null}else 2*Rt()-i.renderingStartTime>Yl&&n!==1073741824&&(e.flags|=128,r=!0,Wu(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Rt(),e.sibling=null,n=pt.current,rt(pt,r?n&1|2:n&1),e):(pn(e),null);case 22:case 23:return cw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?tr&1073741824&&(pn(e),e.subtreeFlags&6&&(e.flags|=8192)):pn(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function u2(t,e){switch(W_(e),e.tag){case 1:return Yn(e.type)&&qh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Kl(),ot(Qn),ot(bn),J_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return X_(e),null;case 13:if(ot(pt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));ql()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ot(pt),null;case 4:return Kl(),null;case 10:return K_(e.type._context),null;case 22:case 23:return cw(),null;case 24:return null;default:return null}}var Vf=!1,_n=!1,c2=typeof WeakSet=="function"?WeakSet:Set,ue=null;function fl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){wt(t,e,r)}else n.current=null}function sv(t,e,n){try{n()}catch(r){wt(t,e,r)}}var sb=!1;function d2(t,e){if($y=Bh,t=uI(),B_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,f=0,d=t,h=null;t:for(;;){for(var g;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)h=d,d=g;for(;;){if(d===t)break t;if(h===n&&++u===s&&(a=o),h===i&&++f===r&&(l=o),(g=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(By={focusedElem:t,selectionRange:n},Bh=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var E=_.memoizedProps,x=_.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?E:Ir(e.type,E),x);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(A){wt(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return _=sb,sb=!1,_}function wc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&sv(e,n,i)}s=s.next}while(s!==r)}}function Jp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function iv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function iR(t){var e=t.alternate;e!==null&&(t.alternate=null,iR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[us],delete e[$c],delete e[Hy],delete e[GM],delete e[KM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function oR(t){return t.tag===5||t.tag===3||t.tag===4}function ib(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||oR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ov(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Hh));else if(r!==4&&(t=t.child,t!==null))for(ov(t,e,n),t=t.sibling;t!==null;)ov(t,e,n),t=t.sibling}function av(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(av(t,e,n),t=t.sibling;t!==null;)av(t,e,n),t=t.sibling}var nn=null,Ar=!1;function Ci(t,e,n){for(n=n.child;n!==null;)aR(t,e,n),n=n.sibling}function aR(t,e,n){if(hs&&typeof hs.onCommitFiberUnmount=="function")try{hs.onCommitFiberUnmount(Hp,n)}catch{}switch(n.tag){case 5:_n||fl(n,e);case 6:var r=nn,s=Ar;nn=null,Ci(t,e,n),nn=r,Ar=s,nn!==null&&(Ar?(t=nn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nn.removeChild(n.stateNode));break;case 18:nn!==null&&(Ar?(t=nn,n=n.stateNode,t.nodeType===8?Ig(t.parentNode,n):t.nodeType===1&&Ig(t,n),Lc(t)):Ig(nn,n.stateNode));break;case 4:r=nn,s=Ar,nn=n.stateNode.containerInfo,Ar=!0,Ci(t,e,n),nn=r,Ar=s;break;case 0:case 11:case 14:case 15:if(!_n&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&sv(n,e,o),s=s.next}while(s!==r)}Ci(t,e,n);break;case 1:if(!_n&&(fl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){wt(n,e,a)}Ci(t,e,n);break;case 21:Ci(t,e,n);break;case 22:n.mode&1?(_n=(r=_n)||n.memoizedState!==null,Ci(t,e,n),_n=r):Ci(t,e,n);break;default:Ci(t,e,n)}}function ob(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new c2),e.forEach(function(r){var s=w2.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Sr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:nn=a.stateNode,Ar=!1;break e;case 3:nn=a.stateNode.containerInfo,Ar=!0;break e;case 4:nn=a.stateNode.containerInfo,Ar=!0;break e}a=a.return}if(nn===null)throw Error(Y(160));aR(i,o,s),nn=null,Ar=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){wt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)lR(e,t),e=e.sibling}function lR(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Sr(e,t),ns(t),r&4){try{wc(3,t,t.return),Jp(3,t)}catch(E){wt(t,t.return,E)}try{wc(5,t,t.return)}catch(E){wt(t,t.return,E)}}break;case 1:Sr(e,t),ns(t),r&512&&n!==null&&fl(n,n.return);break;case 5:if(Sr(e,t),ns(t),r&512&&n!==null&&fl(n,n.return),t.flags&32){var s=t.stateNode;try{Nc(s,"")}catch(E){wt(t,t.return,E)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&AC(s,i),Py(a,o);var u=Py(a,i);for(o=0;o<l.length;o+=2){var f=l[o],d=l[o+1];f==="style"?MC(s,d):f==="dangerouslySetInnerHTML"?DC(s,d):f==="children"?Nc(s,d):k_(s,f,d,u)}switch(a){case"input":Cy(s,i);break;case"textarea":PC(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?ml(s,!!i.multiple,g,!1):h!==!!i.multiple&&(i.defaultValue!=null?ml(s,!!i.multiple,i.defaultValue,!0):ml(s,!!i.multiple,i.multiple?[]:"",!1))}s[$c]=i}catch(E){wt(t,t.return,E)}}break;case 6:if(Sr(e,t),ns(t),r&4){if(t.stateNode===null)throw Error(Y(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(E){wt(t,t.return,E)}}break;case 3:if(Sr(e,t),ns(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Lc(e.containerInfo)}catch(E){wt(t,t.return,E)}break;case 4:Sr(e,t),ns(t);break;case 13:Sr(e,t),ns(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(lw=Rt())),r&4&&ob(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(_n=(u=_n)||f,Sr(e,t),_n=u):Sr(e,t),ns(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(ue=t,f=t.child;f!==null;){for(d=ue=f;ue!==null;){switch(h=ue,g=h.child,h.tag){case 0:case 11:case 14:case 15:wc(4,h,h.return);break;case 1:fl(h,h.return);var _=h.stateNode;if(typeof _.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(E){wt(r,n,E)}}break;case 5:fl(h,h.return);break;case 22:if(h.memoizedState!==null){lb(d);continue}}g!==null?(g.return=h,ue=g):lb(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=OC("display",o))}catch(E){wt(t,t.return,E)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(E){wt(t,t.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Sr(e,t),ns(t),r&4&&ob(t);break;case 21:break;default:Sr(e,t),ns(t)}}function ns(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(oR(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Nc(s,""),r.flags&=-33);var i=ib(t);av(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ib(t);ov(t,a,o);break;default:throw Error(Y(161))}}catch(l){wt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function f2(t,e,n){ue=t,uR(t)}function uR(t,e,n){for(var r=(t.mode&1)!==0;ue!==null;){var s=ue,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Vf;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||_n;a=Vf;var u=_n;if(Vf=o,(_n=l)&&!u)for(ue=s;ue!==null;)o=ue,l=o.child,o.tag===22&&o.memoizedState!==null?ub(s):l!==null?(l.return=o,ue=l):ub(s);for(;i!==null;)ue=i,uR(i),i=i.sibling;ue=s,Vf=a,_n=u}ab(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ue=i):ab(t)}}function ab(t){for(;ue!==null;){var e=ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_n||Jp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!_n)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ir(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&HE(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}HE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Lc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}_n||e.flags&512&&iv(e)}catch(h){wt(e,e.return,h)}}if(e===t){ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,ue=n;break}ue=e.return}}function lb(t){for(;ue!==null;){var e=ue;if(e===t){ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ue=n;break}ue=e.return}}function ub(t){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Jp(4,e)}catch(l){wt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){wt(e,s,l)}}var i=e.return;try{iv(e)}catch(l){wt(e,i,l)}break;case 5:var o=e.return;try{iv(e)}catch(l){wt(e,o,l)}}}catch(l){wt(e,e.return,l)}if(e===t){ue=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ue=a;break}ue=e.return}}var h2=Math.ceil,np=yi.ReactCurrentDispatcher,ow=yi.ReactCurrentOwner,_r=yi.ReactCurrentBatchConfig,We=0,Kt=null,Mt=null,on=0,tr=0,hl=Ro(0),Ht=0,Gc=null,ma=0,em=0,aw=0,xc=null,Hn=null,lw=0,Yl=1/0,$s=null,rp=!1,lv=null,ao=null,Ff=!1,eo=null,sp=0,Ec=0,uv=null,gh=-1,yh=0;function Dn(){return We&6?Rt():gh!==-1?gh:gh=Rt()}function lo(t){return t.mode&1?We&2&&on!==0?on&-on:YM.transition!==null?(yh===0&&(yh=GC()),yh):(t=Ze,t!==0||(t=window.event,t=t===void 0?16:eI(t.type)),t):1}function Vr(t,e,n,r){if(50<Ec)throw Ec=0,uv=null,Error(Y(185));Ad(t,n,r),(!(We&2)||t!==Kt)&&(t===Kt&&(!(We&2)&&(em|=n),Ht===4&&Mi(t,on)),Zn(t,r),n===1&&We===0&&!(e.mode&1)&&(Yl=Rt()+500,Yp&&ko()))}function Zn(t,e){var n=t.callbackNode;YO(t,e);var r=$h(t,t===Kt?on:0);if(r===0)n!==null&&vE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&vE(n),e===1)t.tag===0?QM(cb.bind(null,t)):_I(cb.bind(null,t)),HM(function(){!(We&6)&&ko()}),n=null;else{switch(KC(r)){case 1:n=O_;break;case 4:n=HC;break;case 16:n=Uh;break;case 536870912:n=qC;break;default:n=Uh}n=yR(n,cR.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function cR(t,e){if(gh=-1,yh=0,We&6)throw Error(Y(327));var n=t.callbackNode;if(wl()&&t.callbackNode!==n)return null;var r=$h(t,t===Kt?on:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ip(t,r);else{e=r;var s=We;We|=2;var i=fR();(Kt!==t||on!==e)&&($s=null,Yl=Rt()+500,oa(t,e));do try{g2();break}catch(a){dR(t,a)}while(!0);G_(),np.current=i,We=s,Mt!==null?e=0:(Kt=null,on=0,e=Ht)}if(e!==0){if(e===2&&(s=Ly(t),s!==0&&(r=s,e=cv(t,s))),e===1)throw n=Gc,oa(t,0),Mi(t,r),Zn(t,Rt()),n;if(e===6)Mi(t,r);else{if(s=t.current.alternate,!(r&30)&&!p2(s)&&(e=ip(t,r),e===2&&(i=Ly(t),i!==0&&(r=i,e=cv(t,i))),e===1))throw n=Gc,oa(t,0),Mi(t,r),Zn(t,Rt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:Wo(t,Hn,$s);break;case 3:if(Mi(t,r),(r&130023424)===r&&(e=lw+500-Rt(),10<e)){if($h(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Dn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Wy(Wo.bind(null,t,Hn,$s),e);break}Wo(t,Hn,$s);break;case 4:if(Mi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-jr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*h2(r/1960))-r,10<r){t.timeoutHandle=Wy(Wo.bind(null,t,Hn,$s),r);break}Wo(t,Hn,$s);break;case 5:Wo(t,Hn,$s);break;default:throw Error(Y(329))}}}return Zn(t,Rt()),t.callbackNode===n?cR.bind(null,t):null}function cv(t,e){var n=xc;return t.current.memoizedState.isDehydrated&&(oa(t,e).flags|=256),t=ip(t,e),t!==2&&(e=Hn,Hn=n,e!==null&&dv(e)),t}function dv(t){Hn===null?Hn=t:Hn.push.apply(Hn,t)}function p2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!$r(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mi(t,e){for(e&=~aw,e&=~em,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-jr(e),r=1<<n;t[n]=-1,e&=~r}}function cb(t){if(We&6)throw Error(Y(327));wl();var e=$h(t,0);if(!(e&1))return Zn(t,Rt()),null;var n=ip(t,e);if(t.tag!==0&&n===2){var r=Ly(t);r!==0&&(e=r,n=cv(t,r))}if(n===1)throw n=Gc,oa(t,0),Mi(t,e),Zn(t,Rt()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wo(t,Hn,$s),Zn(t,Rt()),null}function uw(t,e){var n=We;We|=1;try{return t(e)}finally{We=n,We===0&&(Yl=Rt()+500,Yp&&ko())}}function ga(t){eo!==null&&eo.tag===0&&!(We&6)&&wl();var e=We;We|=1;var n=_r.transition,r=Ze;try{if(_r.transition=null,Ze=1,t)return t()}finally{Ze=r,_r.transition=n,We=e,!(We&6)&&ko()}}function cw(){tr=hl.current,ot(hl)}function oa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,WM(n)),Mt!==null)for(n=Mt.return;n!==null;){var r=n;switch(W_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&qh();break;case 3:Kl(),ot(Qn),ot(bn),J_();break;case 5:X_(r);break;case 4:Kl();break;case 13:ot(pt);break;case 19:ot(pt);break;case 10:K_(r.type._context);break;case 22:case 23:cw()}n=n.return}if(Kt=t,Mt=t=uo(t.current,null),on=tr=e,Ht=0,Gc=null,aw=em=ma=0,Hn=xc=null,Go!==null){for(e=0;e<Go.length;e++)if(n=Go[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Go=null}return t}function dR(t,e){do{var n=Mt;try{if(G_(),hh.current=tp,ep){for(var r=mt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ep=!1}if(pa=0,Gt=zt=mt=null,_c=!1,Wc=0,ow.current=null,n===null||n.return===null){Ht=1,Gc=e,Mt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=on,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=a,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=ZE(o);if(g!==null){g.flags&=-257,XE(g,o,a,i,e),g.mode&1&&YE(i,u,e),e=g,l=u;var _=e.updateQueue;if(_===null){var E=new Set;E.add(l),e.updateQueue=E}else _.add(l);break e}else{if(!(e&1)){YE(i,u,e),dw();break e}l=Error(Y(426))}}else if(ct&&a.mode&1){var x=ZE(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),XE(x,o,a,i,e),H_(Ql(l,a));break e}}i=l=Ql(l,a),Ht!==4&&(Ht=2),xc===null?xc=[i]:xc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=KI(i,l,e);WE(i,v);break e;case 1:a=l;var b=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ao===null||!ao.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=QI(i,a,e);WE(i,A);break e}}i=i.return}while(i!==null)}pR(n)}catch(O){e=O,Mt===n&&n!==null&&(Mt=n=n.return);continue}break}while(!0)}function fR(){var t=np.current;return np.current=tp,t===null?tp:t}function dw(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),Kt===null||!(ma&268435455)&&!(em&268435455)||Mi(Kt,on)}function ip(t,e){var n=We;We|=2;var r=fR();(Kt!==t||on!==e)&&($s=null,oa(t,e));do try{m2();break}catch(s){dR(t,s)}while(!0);if(G_(),We=n,np.current=r,Mt!==null)throw Error(Y(261));return Kt=null,on=0,Ht}function m2(){for(;Mt!==null;)hR(Mt)}function g2(){for(;Mt!==null&&!$O();)hR(Mt)}function hR(t){var e=gR(t.alternate,t,tr);t.memoizedProps=t.pendingProps,e===null?pR(t):Mt=e,ow.current=null}function pR(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=u2(n,e),n!==null){n.flags&=32767,Mt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ht=6,Mt=null;return}}else if(n=l2(n,e,tr),n!==null){Mt=n;return}if(e=e.sibling,e!==null){Mt=e;return}Mt=e=t}while(e!==null);Ht===0&&(Ht=5)}function Wo(t,e,n){var r=Ze,s=_r.transition;try{_r.transition=null,Ze=1,y2(t,e,n,r)}finally{_r.transition=s,Ze=r}return null}function y2(t,e,n,r){do wl();while(eo!==null);if(We&6)throw Error(Y(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ZO(t,i),t===Kt&&(Mt=Kt=null,on=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ff||(Ff=!0,yR(Uh,function(){return wl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=_r.transition,_r.transition=null;var o=Ze;Ze=1;var a=We;We|=4,ow.current=null,d2(t,n),lR(n,t),jM(By),Bh=!!$y,By=$y=null,t.current=n,f2(n),BO(),We=a,Ze=o,_r.transition=i}else t.current=n;if(Ff&&(Ff=!1,eo=t,sp=s),i=t.pendingLanes,i===0&&(ao=null),HO(n.stateNode),Zn(t,Rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(rp)throw rp=!1,t=lv,lv=null,t;return sp&1&&t.tag!==0&&wl(),i=t.pendingLanes,i&1?t===uv?Ec++:(Ec=0,uv=t):Ec=0,ko(),null}function wl(){if(eo!==null){var t=KC(sp),e=_r.transition,n=Ze;try{if(_r.transition=null,Ze=16>t?16:t,eo===null)var r=!1;else{if(t=eo,eo=null,sp=0,We&6)throw Error(Y(331));var s=We;for(We|=4,ue=t.current;ue!==null;){var i=ue,o=i.child;if(ue.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ue=u;ue!==null;){var f=ue;switch(f.tag){case 0:case 11:case 15:wc(8,f,i)}var d=f.child;if(d!==null)d.return=f,ue=d;else for(;ue!==null;){f=ue;var h=f.sibling,g=f.return;if(iR(f),f===u){ue=null;break}if(h!==null){h.return=g,ue=h;break}ue=g}}}var _=i.alternate;if(_!==null){var E=_.child;if(E!==null){_.child=null;do{var x=E.sibling;E.sibling=null,E=x}while(E!==null)}}ue=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ue=o;else e:for(;ue!==null;){if(i=ue,i.flags&2048)switch(i.tag){case 0:case 11:case 15:wc(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,ue=v;break e}ue=i.return}}var b=t.current;for(ue=b;ue!==null;){o=ue;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,ue=T;else e:for(o=b;ue!==null;){if(a=ue,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Jp(9,a)}}catch(O){wt(a,a.return,O)}if(a===o){ue=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,ue=A;break e}ue=a.return}}if(We=s,ko(),hs&&typeof hs.onPostCommitFiberRoot=="function")try{hs.onPostCommitFiberRoot(Hp,t)}catch{}r=!0}return r}finally{Ze=n,_r.transition=e}}return!1}function db(t,e,n){e=Ql(n,e),e=KI(t,e,1),t=oo(t,e,1),e=Dn(),t!==null&&(Ad(t,1,e),Zn(t,e))}function wt(t,e,n){if(t.tag===3)db(t,t,n);else for(;e!==null;){if(e.tag===3){db(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ao===null||!ao.has(r))){t=Ql(n,t),t=QI(e,t,1),e=oo(e,t,1),t=Dn(),e!==null&&(Ad(e,1,t),Zn(e,t));break}}e=e.return}}function v2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Dn(),t.pingedLanes|=t.suspendedLanes&n,Kt===t&&(on&n)===n&&(Ht===4||Ht===3&&(on&130023424)===on&&500>Rt()-lw?oa(t,0):aw|=n),Zn(t,e)}function mR(t,e){e===0&&(t.mode&1?(e=kf,kf<<=1,!(kf&130023424)&&(kf=4194304)):e=1);var n=Dn();t=oi(t,e),t!==null&&(Ad(t,e,n),Zn(t,n))}function _2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),mR(t,n)}function w2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),mR(t,n)}var gR;gR=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qn.current)Kn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kn=!1,a2(t,e,n);Kn=!!(t.flags&131072)}else Kn=!1,ct&&e.flags&1048576&&wI(e,Qh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;mh(t,e),t=e.pendingProps;var s=Hl(e,bn.current);_l(e,n),s=tw(null,e,r,t,s,n);var i=nw();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yn(r)?(i=!0,Gh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Y_(e),s.updater=Xp,e.stateNode=s,s._reactInternals=e,Zy(e,r,t,n),e=ev(null,e,r,!0,i,n)):(e.tag=0,ct&&i&&z_(e),Pn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(mh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=E2(r),t=Ir(r,t),s){case 0:e=Jy(null,e,r,t,n);break e;case 1:e=tb(null,e,r,t,n);break e;case 11:e=JE(null,e,r,t,n);break e;case 14:e=eb(null,e,r,Ir(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ir(r,s),Jy(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ir(r,s),tb(t,e,r,s,n);case 3:e:{if(JI(e),t===null)throw Error(Y(387));r=e.pendingProps,i=e.memoizedState,s=i.element,CI(t,e),Xh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ql(Error(Y(423)),e),e=nb(t,e,r,n,s);break e}else if(r!==s){s=Ql(Error(Y(424)),e),e=nb(t,e,r,n,s);break e}else for(rr=io(e.stateNode.containerInfo.firstChild),or=e,ct=!0,Pr=null,n=TI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ql(),r===s){e=ai(t,e,n);break e}Pn(t,e,r,n)}e=e.child}return e;case 5:return II(e),t===null&&Ky(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,zy(r,s)?o=null:i!==null&&zy(r,i)&&(e.flags|=32),XI(t,e),Pn(t,e,o,n),e.child;case 6:return t===null&&Ky(e),null;case 13:return eR(t,e,n);case 4:return Z_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Gl(e,null,r,n):Pn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ir(r,s),JE(t,e,r,s,n);case 7:return Pn(t,e,e.pendingProps,n),e.child;case 8:return Pn(t,e,e.pendingProps.children,n),e.child;case 12:return Pn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,rt(Yh,r._currentValue),r._currentValue=o,i!==null)if($r(i.value,o)){if(i.children===s.children&&!Qn.current){e=ai(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Js(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Qy(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Y(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Qy(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Pn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,_l(e,n),s=xr(s),r=r(s),e.flags|=1,Pn(t,e,r,n),e.child;case 14:return r=e.type,s=Ir(r,e.pendingProps),s=Ir(r.type,s),eb(t,e,r,s,n);case 15:return YI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ir(r,s),mh(t,e),e.tag=1,Yn(r)?(t=!0,Gh(e)):t=!1,_l(e,n),GI(e,r,s),Zy(e,r,s,n),ev(null,e,r,!0,t,n);case 19:return tR(t,e,n);case 22:return ZI(t,e,n)}throw Error(Y(156,e.tag))};function yR(t,e){return WC(t,e)}function x2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(t,e,n,r){return new x2(t,e,n,r)}function fw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function E2(t){if(typeof t=="function")return fw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===P_)return 11;if(t===N_)return 14}return 2}function uo(t,e){var n=t.alternate;return n===null?(n=vr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vh(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")fw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case rl:return aa(n.children,s,i,e);case A_:o=8,s|=8;break;case xy:return t=vr(12,n,e,s|2),t.elementType=xy,t.lanes=i,t;case Ey:return t=vr(13,n,e,s),t.elementType=Ey,t.lanes=i,t;case by:return t=vr(19,n,e,s),t.elementType=by,t.lanes=i,t;case IC:return tm(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case SC:o=10;break e;case CC:o=9;break e;case P_:o=11;break e;case N_:o=14;break e;case Ni:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=vr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function aa(t,e,n,r){return t=vr(7,t,r,e),t.lanes=n,t}function tm(t,e,n,r){return t=vr(22,t,r,e),t.elementType=IC,t.lanes=n,t.stateNode={isHidden:!1},t}function Mg(t,e,n){return t=vr(6,t,null,e),t.lanes=n,t}function Lg(t,e,n){return e=vr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function b2(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gg(0),this.expirationTimes=gg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gg(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function hw(t,e,n,r,s,i,o,a,l){return t=new b2(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=vr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Y_(i),t}function T2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function vR(t){if(!t)return go;t=t._reactInternals;e:{if(Pa(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(Yn(n))return vI(t,n,e)}return e}function _R(t,e,n,r,s,i,o,a,l){return t=hw(n,r,!0,t,s,i,o,a,l),t.context=vR(null),n=t.current,r=Dn(),s=lo(n),i=Js(r,s),i.callback=e??null,oo(n,i,s),t.current.lanes=s,Ad(t,s,r),Zn(t,r),t}function nm(t,e,n,r){var s=e.current,i=Dn(),o=lo(s);return n=vR(n),e.context===null?e.context=n:e.pendingContext=n,e=Js(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=oo(s,e,o),t!==null&&(Vr(t,s,o,i),fh(t,s,o)),o}function op(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function pw(t,e){fb(t,e),(t=t.alternate)&&fb(t,e)}function S2(){return null}var wR=typeof reportError=="function"?reportError:function(t){console.error(t)};function mw(t){this._internalRoot=t}rm.prototype.render=mw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));nm(t,e,null,null)};rm.prototype.unmount=mw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ga(function(){nm(null,t,null,null)}),e[ii]=null}};function rm(t){this._internalRoot=t}rm.prototype.unstable_scheduleHydration=function(t){if(t){var e=ZC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Oi.length&&e!==0&&e<Oi[n].priority;n++);Oi.splice(n,0,t),n===0&&JC(t)}};function gw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hb(){}function C2(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=op(o);i.call(u)}}var o=_R(e,r,t,0,null,!1,!1,"",hb);return t._reactRootContainer=o,t[ii]=o.current,Fc(t.nodeType===8?t.parentNode:t),ga(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=op(l);a.call(u)}}var l=hw(t,0,!1,null,null,!1,!1,"",hb);return t._reactRootContainer=l,t[ii]=l.current,Fc(t.nodeType===8?t.parentNode:t),ga(function(){nm(e,l,n,r)}),l}function im(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=op(o);a.call(l)}}nm(e,o,t,s)}else o=C2(n,e,t,s,r);return op(o)}QC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=rc(e.pendingLanes);n!==0&&(M_(e,n|1),Zn(e,Rt()),!(We&6)&&(Yl=Rt()+500,ko()))}break;case 13:ga(function(){var r=oi(t,1);if(r!==null){var s=Dn();Vr(r,t,1,s)}}),pw(t,1)}};L_=function(t){if(t.tag===13){var e=oi(t,134217728);if(e!==null){var n=Dn();Vr(e,t,134217728,n)}pw(t,134217728)}};YC=function(t){if(t.tag===13){var e=lo(t),n=oi(t,e);if(n!==null){var r=Dn();Vr(n,t,e,r)}pw(t,e)}};ZC=function(){return Ze};XC=function(t,e){var n=Ze;try{return Ze=t,e()}finally{Ze=n}};Dy=function(t,e,n){switch(e){case"input":if(Cy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Qp(r);if(!s)throw Error(Y(90));kC(r),Cy(r,s)}}}break;case"textarea":PC(t,n);break;case"select":e=n.value,e!=null&&ml(t,!!n.multiple,e,!1)}};VC=uw;FC=ga;var I2={usingClientEntryPoint:!1,Events:[Nd,al,Qp,LC,jC,uw]},Hu={findFiberByHostInstance:qo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},R2={bundleType:Hu.bundleType,version:Hu.version,rendererPackageName:Hu.rendererPackageName,rendererConfig:Hu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=BC(t),t===null?null:t.stateNode},findFiberByHostInstance:Hu.findFiberByHostInstance||S2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uf.isDisabled&&Uf.supportsFiber)try{Hp=Uf.inject(R2),hs=Uf}catch{}}dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I2;dr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gw(e))throw Error(Y(200));return T2(t,e,null,n)};dr.createRoot=function(t,e){if(!gw(t))throw Error(Y(299));var n=!1,r="",s=wR;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=hw(t,1,!1,null,null,n,!1,r,s),t[ii]=e.current,Fc(t.nodeType===8?t.parentNode:t),new mw(e)};dr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=BC(e),t=t===null?null:t.stateNode,t};dr.flushSync=function(t){return ga(t)};dr.hydrate=function(t,e,n){if(!sm(e))throw Error(Y(200));return im(null,t,e,!0,n)};dr.hydrateRoot=function(t,e,n){if(!gw(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=wR;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=_R(e,null,t,1,n??null,s,!1,i,o),t[ii]=e.current,Fc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new rm(e)};dr.render=function(t,e,n){if(!sm(e))throw Error(Y(200));return im(null,t,e,!1,n)};dr.unmountComponentAtNode=function(t){if(!sm(t))throw Error(Y(40));return t._reactRootContainer?(ga(function(){im(null,null,t,!1,function(){t._reactRootContainer=null,t[ii]=null})}),!0):!1};dr.unstable_batchedUpdates=uw;dr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sm(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return im(t,e,n,!1,r)};dr.version="18.3.1-next-f1338f8080-20240426";function xR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xR)}catch(t){console.error(t)}}xR(),xC.exports=dr;var om=xC.exports;const ER=lC(om);var pb=om;_y.createRoot=pb.createRoot,_y.hydrateRoot=pb.hydrateRoot;var yw={};Object.defineProperty(yw,"__esModule",{value:!0});yw.parse=M2;yw.serialize=L2;const k2=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,A2=/^[\u0021-\u003A\u003C-\u007E]*$/,P2=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,N2=/^[\u0020-\u003A\u003D-\u007E]*$/,D2=Object.prototype.toString,O2=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function M2(t,e){const n=new O2,r=t.length;if(r<2)return n;const s=(e==null?void 0:e.decode)||j2;let i=0;do{const o=t.indexOf("=",i);if(o===-1)break;const a=t.indexOf(";",i),l=a===-1?r:a;if(o>l){i=t.lastIndexOf(";",o-1)+1;continue}const u=mb(t,i,o),f=gb(t,o,u),d=t.slice(u,f);if(n[d]===void 0){let h=mb(t,o+1,l),g=gb(t,l,h);const _=s(t.slice(h,g));n[d]=_}i=l+1}while(i<r);return n}function mb(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function gb(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function L2(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!k2.test(t))throw new TypeError(`argument name is invalid: ${t}`);const s=r(e);if(!A2.test(s))throw new TypeError(`argument val is invalid: ${e}`);let i=t+"="+s;if(!n)return i;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);i+="; Max-Age="+n.maxAge}if(n.domain){if(!P2.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);i+="; Domain="+n.domain}if(n.path){if(!N2.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);i+="; Path="+n.path}if(n.expires){if(!V2(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);i+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.partitioned&&(i+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return i}function j2(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function V2(t){return D2.call(t)==="[object Date]"}var yb="popstate";function F2(t={}){function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return fv("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Kc(s)}return $2(e,n,null,t)}function dt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Br(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function U2(){return Math.random().toString(36).substring(2,10)}function vb(t,e){return{usr:t.state,key:t.key,idx:e}}function fv(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?gu(e):e,state:n,key:e&&e.key||r||U2()}}function Kc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function gu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function $2(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",l=null,u=f();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function f(){return(o.state||{idx:null}).idx}function d(){a="POP";let x=f(),v=x==null?null:x-u;u=x,l&&l({action:a,location:E.location,delta:v})}function h(x,v){a="PUSH";let b=fv(E.location,x,v);u=f()+1;let T=vb(b,u),A=E.createHref(b);try{o.pushState(T,"",A)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(A)}i&&l&&l({action:a,location:E.location,delta:1})}function g(x,v){a="REPLACE";let b=fv(E.location,x,v);u=f();let T=vb(b,u),A=E.createHref(b);o.replaceState(T,"",A),i&&l&&l({action:a,location:E.location,delta:0})}function _(x){let v=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof x=="string"?x:Kc(x);return b=b.replace(/ $/,"%20"),dt(v,`No window.location.(origin|href) available to create URL for href: ${b}`),new URL(b,v)}let E={get action(){return a},get location(){return t(s,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(yb,d),l=x,()=>{s.removeEventListener(yb,d),l=null}},createHref(x){return e(s,x)},createURL:_,encodeLocation(x){let v=_(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:g,go(x){return o.go(x)}};return E}function bR(t,e,n="/"){return B2(t,e,n,!1)}function B2(t,e,n,r){let s=typeof e=="string"?gu(e):e,i=li(s.pathname||"/",n);if(i==null)return null;let o=TR(t);z2(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=eL(i);a=X2(o[l],u,r)}return a}function TR(t,e=[],n=[],r=""){let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(dt(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=ei([r,l.relativePath]),f=n.concat(l);i.children&&i.children.length>0&&(dt(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),TR(i.children,e,f,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:Y2(u,i.index),routesMeta:f})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of SR(i.path))s(i,o,l)}),e}function SR(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=SR(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function z2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Z2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var W2=/^:[\w-]+$/,H2=3,q2=2,G2=1,K2=10,Q2=-2,_b=t=>t==="*";function Y2(t,e){let n=t.split("/"),r=n.length;return n.some(_b)&&(r+=Q2),e&&(r+=q2),n.filter(s=>!_b(s)).reduce((s,i)=>s+(W2.test(i)?H2:i===""?G2:K2),r)}function Z2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function X2(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",d=ap({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},f),h=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=ap({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},f)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:ei([i,d.pathname]),pathnameBase:sL(ei([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=ei([i,d.pathnameBase]))}return o}function ap(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=J2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,{paramName:f,isOptional:d},h)=>{if(f==="*"){let _=a[h]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const g=a[h];return d&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function J2(t,e=!1,n=!0){Br(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function eL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Br(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function li(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function tL(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?gu(t):t;return{pathname:n?n.startsWith("/")?n:nL(n,e):e,search:iL(r),hash:oL(s)}}function nL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function jg(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rL(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vw(t){let e=rL(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function _w(t,e,n,r=!1){let s;typeof t=="string"?s=gu(t):(s={...t},dt(!s.pathname||!s.pathname.includes("?"),jg("?","pathname","search",s)),dt(!s.pathname||!s.pathname.includes("#"),jg("#","pathname","hash",s)),dt(!s.search||!s.search.includes("#"),jg("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=tL(s,a),u=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||f)&&(l.pathname+="/"),l}var ei=t=>t.join("/").replace(/\/\/+/g,"/"),sL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),iL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,oL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function aL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var CR=["POST","PUT","PATCH","DELETE"];new Set(CR);var lL=["GET",...CR];new Set(lL);var yu=y.createContext(null);yu.displayName="DataRouter";var am=y.createContext(null);am.displayName="DataRouterState";var IR=y.createContext({isTransitioning:!1});IR.displayName="ViewTransition";var uL=y.createContext(new Map);uL.displayName="Fetchers";var cL=y.createContext(null);cL.displayName="Await";var Kr=y.createContext(null);Kr.displayName="Navigation";var Od=y.createContext(null);Od.displayName="Location";var Qr=y.createContext({outlet:null,matches:[],isDataRoute:!1});Qr.displayName="Route";var ww=y.createContext(null);ww.displayName="RouteError";function dL(t,{relative:e}={}){dt(vu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=y.useContext(Kr),{hash:s,pathname:i,search:o}=Md(t,{relative:e}),a=i;return n!=="/"&&(a=i==="/"?n:ei([n,i])),r.createHref({pathname:a,search:o,hash:s})}function vu(){return y.useContext(Od)!=null}function Ao(){return dt(vu(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Od).location}var RR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kR(t){y.useContext(Kr).static||y.useLayoutEffect(t)}function vi(){let{isDataRoute:t}=y.useContext(Qr);return t?TL():fL()}function fL(){dt(vu(),"useNavigate() may be used only in the context of a <Router> component.");let t=y.useContext(yu),{basename:e,navigator:n}=y.useContext(Kr),{matches:r}=y.useContext(Qr),{pathname:s}=Ao(),i=JSON.stringify(vw(r)),o=y.useRef(!1);return kR(()=>{o.current=!0}),y.useCallback((l,u={})=>{if(Br(o.current,RR),!o.current)return;if(typeof l=="number"){n.go(l);return}let f=_w(l,JSON.parse(i),s,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ei([e,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[e,n,i,s,t])}y.createContext(null);function xw(){let{matches:t}=y.useContext(Qr),e=t[t.length-1];return e?e.params:{}}function Md(t,{relative:e}={}){let{matches:n}=y.useContext(Qr),{pathname:r}=Ao(),s=JSON.stringify(vw(n));return y.useMemo(()=>_w(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function hL(t,e){return AR(t,e)}function AR(t,e,n,r){var b;dt(vu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:i}=y.useContext(Kr),{matches:o}=y.useContext(Qr),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",f=a?a.pathnameBase:"/",d=a&&a.route;{let T=d&&d.path||"";PR(u,!d||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let h=Ao(),g;if(e){let T=typeof e=="string"?gu(e):e;dt(f==="/"||((b=T.pathname)==null?void 0:b.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${T.pathname}" was given in the \`location\` prop.`),g=T}else g=h;let _=g.pathname||"/",E=_;if(f!=="/"){let T=f.replace(/^\//,"").split("/");E="/"+_.replace(/^\//,"").split("/").slice(T.length).join("/")}let x=!i&&n&&n.matches&&n.matches.length>0?n.matches:bR(t,{pathname:E});Br(d||x!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Br(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=vL(x&&x.map(T=>Object.assign({},T,{params:Object.assign({},l,T.params),pathname:ei([f,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:ei([f,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,n,r);return e&&v?y.createElement(Od.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},v):v}function pL(){let t=bL(),e=aL(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=y.createElement(y.Fragment,null,y.createElement("p",null,"💿 Hey developer 👋"),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:i},"ErrorBoundary")," or"," ",y.createElement("code",{style:i},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:s},n):null,o)}var mL=y.createElement(pL,null),gL=class extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?y.createElement(Qr.Provider,{value:this.props.routeContext},y.createElement(ww.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function yL({routeContext:t,match:e,children:n}){let r=y.useContext(yu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),y.createElement(Qr.Provider,{value:t},n)}function vL(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,i=n==null?void 0:n.errors;if(i!=null){let l=s.findIndex(u=>u.route.id&&(i==null?void 0:i[u.route.id])!==void 0);dt(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let o=!1,a=-1;if(n)for(let l=0;l<s.length;l++){let u=s[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:f,errors:d}=n,h=u.route.loader&&!f.hasOwnProperty(u.route.id)&&(!d||d[u.route.id]===void 0);if(u.route.lazy||h){o=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((l,u,f)=>{let d,h=!1,g=null,_=null;n&&(d=i&&u.route.id?i[u.route.id]:void 0,g=u.route.errorElement||mL,o&&(a<0&&f===0?(PR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,_=null):a===f&&(h=!0,_=u.route.hydrateFallbackElement||null)));let E=e.concat(s.slice(0,f+1)),x=()=>{let v;return d?v=g:h?v=_:u.route.Component?v=y.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=l,y.createElement(yL,{match:u,routeContext:{outlet:l,matches:E,isDataRoute:n!=null},children:v})};return n&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?y.createElement(gL,{location:n.location,revalidation:n.revalidation,component:g,error:d,children:x(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):x()},null)}function Ew(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _L(t){let e=y.useContext(yu);return dt(e,Ew(t)),e}function wL(t){let e=y.useContext(am);return dt(e,Ew(t)),e}function xL(t){let e=y.useContext(Qr);return dt(e,Ew(t)),e}function bw(t){let e=xL(t),n=e.matches[e.matches.length-1];return dt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function EL(){return bw("useRouteId")}function bL(){var r;let t=y.useContext(ww),e=wL("useRouteError"),n=bw("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function TL(){let{router:t}=_L("useNavigate"),e=bw("useNavigate"),n=y.useRef(!1);return kR(()=>{n.current=!0}),y.useCallback(async(s,i={})=>{Br(n.current,RR),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var wb={};function PR(t,e,n){!e&&!wb[t]&&(wb[t]=!0,Br(!1,n))}y.memo(SL);function SL({routes:t,future:e,state:n}){return AR(t,void 0,n,e)}function CL({to:t,replace:e,state:n,relative:r}){dt(vu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=y.useContext(Kr);Br(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=y.useContext(Qr),{pathname:o}=Ao(),a=vi(),l=_w(t,vw(i),o,r==="path"),u=JSON.stringify(l);return y.useEffect(()=>{a(JSON.parse(u),{replace:e,state:n,relative:r})},[a,u,r,e,n]),null}function ki(t){dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function IL({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){dt(!vu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=y.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=gu(n));let{pathname:l="/",search:u="",hash:f="",state:d=null,key:h="default"}=n,g=y.useMemo(()=>{let _=li(l,o);return _==null?null:{location:{pathname:_,search:u,hash:f,state:d,key:h},navigationType:r}},[o,l,u,f,d,h,r]);return Br(g!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:y.createElement(Kr.Provider,{value:a},y.createElement(Od.Provider,{children:e,value:g}))}function RL({children:t,location:e}){return hL(hv(t),e)}function hv(t,e=[]){let n=[];return y.Children.forEach(t,(r,s)=>{if(!y.isValidElement(r))return;let i=[...e,s];if(r.type===y.Fragment){n.push.apply(n,hv(r.props.children,i));return}dt(r.type===ki,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=hv(r.props.children,i)),n.push(o)}),n}var _h="get",wh="application/x-www-form-urlencoded";function lm(t){return t!=null&&typeof t.tagName=="string"}function kL(t){return lm(t)&&t.tagName.toLowerCase()==="button"}function AL(t){return lm(t)&&t.tagName.toLowerCase()==="form"}function PL(t){return lm(t)&&t.tagName.toLowerCase()==="input"}function NL(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function DL(t,e){return t.button===0&&(!e||e==="_self")&&!NL(t)}var $f=null;function OL(){if($f===null)try{new FormData(document.createElement("form"),0),$f=!1}catch{$f=!0}return $f}var ML=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Vg(t){return t!=null&&!ML.has(t)?(Br(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wh}"`),null):t}function LL(t,e){let n,r,s,i,o;if(AL(t)){let a=t.getAttribute("action");r=a?li(a,e):null,n=t.getAttribute("method")||_h,s=Vg(t.getAttribute("enctype"))||wh,i=new FormData(t)}else if(kL(t)||PL(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?li(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||_h,s=Vg(t.getAttribute("formenctype"))||Vg(a.getAttribute("enctype"))||wh,i=new FormData(a,t),!OL()){let{name:u,type:f,value:d}=t;if(f==="image"){let h=u?`${u}.`:"";i.append(`${h}x`,"0"),i.append(`${h}y`,"0")}else u&&i.append(u,d)}}else{if(lm(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=_h,r=null,s=wh,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}function Tw(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function jL(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function VL(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function FL(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await jL(i,n);return o.links?o.links():[]}return[]}));return zL(r.flat(1).filter(VL).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function xb(t,e,n,r,s,i){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var f;return n[u].pathname!==l.pathname||((f=n[u].route.path)==null?void 0:f.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):i==="data"?e.filter((l,u)=>{var d;let f=r.routes[l.route.id];if(!f||!f.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function UL(t,e,{includeHydrateFallback:n}={}){return $L(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function $L(t){return[...new Set(t)]}function BL(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function zL(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(BL(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}var WL=new Set([100,101,204,205]);function HL(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&li(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function NR(){let t=y.useContext(yu);return Tw(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function qL(){let t=y.useContext(am);return Tw(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Sw=y.createContext(void 0);Sw.displayName="FrameworkContext";function DR(){let t=y.useContext(Sw);return Tw(t,"You must render this element inside a <HydratedRouter> element"),t}function GL(t,e){let n=y.useContext(Sw),[r,s]=y.useState(!1),[i,o]=y.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:f,onTouchStart:d}=e,h=y.useRef(null);y.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let E=v=>{v.forEach(b=>{o(b.isIntersecting)})},x=new IntersectionObserver(E,{threshold:.5});return h.current&&x.observe(h.current),()=>{x.disconnect()}}},[t]),y.useEffect(()=>{if(r){let E=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(E)}}},[r]);let g=()=>{s(!0)},_=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,h,{}]:[i,h,{onFocus:qu(a,g),onBlur:qu(l,_),onMouseEnter:qu(u,g),onMouseLeave:qu(f,_),onTouchStart:qu(d,g)}]:[!1,h,{}]}function qu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function KL({page:t,...e}){let{router:n}=NR(),r=y.useMemo(()=>bR(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?y.createElement(YL,{page:t,matches:r,...e}):null}function QL(t){let{manifest:e,routeModules:n}=DR(),[r,s]=y.useState([]);return y.useEffect(()=>{let i=!1;return FL(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function YL({page:t,matches:e,...n}){let r=Ao(),{manifest:s,routeModules:i}=DR(),{basename:o}=NR(),{loaderData:a,matches:l}=qL(),u=y.useMemo(()=>xb(t,e,l,s,r,"data"),[t,e,l,s,r]),f=y.useMemo(()=>xb(t,e,l,s,r,"assets"),[t,e,l,s,r]),d=y.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let _=new Set,E=!1;if(e.forEach(v=>{var T;let b=s.routes[v.route.id];!b||!b.hasLoader||(!u.some(A=>A.route.id===v.route.id)&&v.route.id in a&&((T=i[v.route.id])!=null&&T.shouldRevalidate)||b.hasClientLoader?E=!0:_.add(v.route.id))}),_.size===0)return[];let x=HL(t,o);return E&&_.size>0&&x.searchParams.set("_routes",e.filter(v=>_.has(v.route.id)).map(v=>v.route.id).join(",")),[x.pathname+x.search]},[o,a,r,s,u,e,t,i]),h=y.useMemo(()=>UL(f,s),[f,s]),g=QL(f);return y.createElement(y.Fragment,null,d.map(_=>y.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),h.map(_=>y.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),g.map(({key:_,link:E})=>y.createElement("link",{key:_,...E})))}function ZL(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var OR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{OR&&(window.__reactRouterVersion="7.5.3")}catch{}function XL({basename:t,children:e,window:n}){let r=y.useRef();r.current==null&&(r.current=F2({window:n,v5Compat:!0}));let s=r.current,[i,o]=y.useState({action:s.action,location:s.location}),a=y.useCallback(l=>{y.startTransition(()=>o(l))},[o]);return y.useLayoutEffect(()=>s.listen(a),[s,a]),y.createElement(IL,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var MR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Li=y.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:f,viewTransition:d,...h},g){let{basename:_}=y.useContext(Kr),E=typeof u=="string"&&MR.test(u),x,v=!1;if(typeof u=="string"&&E&&(x=u,OR))try{let R=new URL(window.location.href),k=u.startsWith("//")?new URL(R.protocol+u):new URL(u),N=li(k.pathname,_);k.origin===R.origin&&N!=null?u=N+k.search+k.hash:v=!0}catch{Br(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=dL(u,{relative:s}),[T,A,O]=GL(r,h),V=nj(u,{replace:o,state:a,target:l,preventScrollReset:f,relative:s,viewTransition:d});function C(R){e&&e(R),R.defaultPrevented||V(R)}let S=y.createElement("a",{...h,...O,href:x||b,onClick:v||i?e:C,ref:ZL(g,A),target:l,"data-discover":!E&&n==="render"?"true":void 0});return T&&!E?y.createElement(y.Fragment,null,S,y.createElement(KL,{page:b})):S});Li.displayName="Link";var JL=y.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...u},f){let d=Md(o,{relative:u.relative}),h=Ao(),g=y.useContext(am),{navigator:_,basename:E}=y.useContext(Kr),x=g!=null&&aj(d)&&a===!0,v=_.encodeLocation?_.encodeLocation(d).pathname:d.pathname,b=h.pathname,T=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(b=b.toLowerCase(),T=T?T.toLowerCase():null,v=v.toLowerCase()),T&&E&&(T=li(T,E)||T);const A=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let O=b===v||!s&&b.startsWith(v)&&b.charAt(A)==="/",V=T!=null&&(T===v||!s&&T.startsWith(v)&&T.charAt(v.length)==="/"),C={isActive:O,isPending:V,isTransitioning:x},S=O?e:void 0,R;typeof r=="function"?R=r(C):R=[r,O?"active":null,V?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let k=typeof i=="function"?i(C):i;return y.createElement(Li,{...u,"aria-current":S,className:R,ref:f,style:k,to:o,viewTransition:a},typeof l=="function"?l(C):l)});JL.displayName="NavLink";var ej=y.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=_h,action:a,onSubmit:l,relative:u,preventScrollReset:f,viewTransition:d,...h},g)=>{let _=ij(),E=oj(a,{relative:u}),x=o.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&MR.test(a),b=T=>{if(l&&l(T),T.defaultPrevented)return;T.preventDefault();let A=T.nativeEvent.submitter,O=(A==null?void 0:A.getAttribute("formmethod"))||o;_(A||T.currentTarget,{fetcherKey:e,method:O,navigate:n,replace:s,state:i,relative:u,preventScrollReset:f,viewTransition:d})};return y.createElement("form",{ref:g,method:x,action:E,onSubmit:r?l:b,...h,"data-discover":!v&&t==="render"?"true":void 0})});ej.displayName="Form";function tj(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LR(t){let e=y.useContext(yu);return dt(e,tj(t)),e}function nj(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=vi(),l=Ao(),u=Md(t,{relative:i});return y.useCallback(f=>{if(DL(f,e)){f.preventDefault();let d=n!==void 0?n:Kc(l)===Kc(u);a(t,{replace:d,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,u,n,r,e,t,s,i,o])}var rj=0,sj=()=>`__${String(++rj)}__`;function ij(){let{router:t}=LR("useSubmit"),{basename:e}=y.useContext(Kr),n=EL();return y.useCallback(async(r,s={})=>{let{action:i,method:o,encType:a,formData:l,body:u}=LL(r,e);if(s.navigate===!1){let f=s.fetcherKey||sj();await t.fetch(f,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function oj(t,{relative:e}={}){let{basename:n}=y.useContext(Kr),r=y.useContext(Qr);dt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Md(t||".",{relative:e})},o=Ao();if(t==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(f=>f==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let f=a.toString();i.search=f?`?${f}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:ei([n,i.pathname])),Kc(i)}function aj(t,e={}){let n=y.useContext(IR);dt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=LR("useViewTransitionState"),s=Md(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=li(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=li(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ap(s.pathname,o)!=null||ap(s.pathname,i)!=null}new TextEncoder;[...WL];var Eb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},lj=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},VR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,f=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(h=64)),r.push(n[f],n[d],n[h],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||d==null)throw new uj;const h=i<<2|a>>4;if(r.push(h),u!==64){const g=a<<4&240|u>>2;if(r.push(g),d!==64){const _=u<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cj=function(t){const e=jR(t);return VR.encodeByteArray(e,!0)},lp=function(t){return cj(t).replace(/\./g,"")},FR=function(t){try{return VR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj=()=>dj().__FIREBASE_DEFAULTS__,hj=()=>{if(typeof process>"u"||typeof Eb>"u")return;const t=Eb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&FR(t[1]);return e&&JSON.parse(e)},um=()=>{try{return fj()||hj()||pj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},UR=t=>{var e,n;return(n=(e=um())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$R=t=>{const e=UR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},BR=()=>{var t;return(t=um())===null||t===void 0?void 0:t.config},zR=t=>{var e;return(e=um())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lp(JSON.stringify(n)),lp(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function yj(){var t;const e=(t=um())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _j(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function wj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xj(){const t=Tn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ej(){return!yj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bj(){try{return typeof indexedDB=="object"}catch{return!1}}function Tj(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj="FirebaseError";class ks extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Sj,Object.setPrototypeOf(this,ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ld.prototype.create)}}class Ld{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Cj(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ks(s,a,r)}}function Cj(t,e){return t.replace(Ij,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Ij=/\{\$([^}]+)}/g;function Rj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function up(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(bb(i)&&bb(o)){if(!up(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function bb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function kj(t,e){const n=new Aj(t,e);return n.subscribe.bind(n)}class Aj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Pj(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Fg),s.error===void 0&&(s.error=Fg),s.complete===void 0&&(s.complete=Fg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pj(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Fg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){return t&&t._delegate?t._delegate:t}class yo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mj;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Oj(e))try{this.getOrInitializeService({instanceIdentifier:Ho})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ho){return this.instances.has(e)}getOptions(e=Ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Dj(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ho){return this.component?this.component.multipleInstances?e:Ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Dj(t){return t===Ho?void 0:t}function Oj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Nj(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($e||($e={}));const Lj={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},jj=$e.INFO,Vj={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},Fj=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Vj[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cw{constructor(e){this.name=e,this._logLevel=jj,this._logHandler=Fj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Lj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const Uj=(t,e)=>e.some(n=>t instanceof n);let Tb,Sb;function $j(){return Tb||(Tb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Bj(){return Sb||(Sb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HR=new WeakMap,pv=new WeakMap,qR=new WeakMap,Ug=new WeakMap,Iw=new WeakMap;function zj(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(co(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&HR.set(n,t)}).catch(()=>{}),Iw.set(e,t),e}function Wj(t){if(pv.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});pv.set(t,e)}let mv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return co(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Hj(t){mv=t(mv)}function qj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($g(this),e,...n);return qR.set(r,e.sort?e.sort():[e]),co(r)}:Bj().includes(t)?function(...e){return t.apply($g(this),e),co(HR.get(this))}:function(...e){return co(t.apply($g(this),e))}}function Gj(t){return typeof t=="function"?qj(t):(t instanceof IDBTransaction&&Wj(t),Uj(t,$j())?new Proxy(t,mv):t)}function co(t){if(t instanceof IDBRequest)return zj(t);if(Ug.has(t))return Ug.get(t);const e=Gj(t);return e!==t&&(Ug.set(t,e),Iw.set(e,t)),e}const $g=t=>Iw.get(t);function Kj(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=co(o);return r&&o.addEventListener("upgradeneeded",l=>{r(co(o.result),l.oldVersion,l.newVersion,co(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Qj=["get","getKey","getAll","getAllKeys","count"],Yj=["put","add","delete","clear"],Bg=new Map;function Cb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Bg.get(e))return Bg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Yj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Qj.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return Bg.set(e,i),i}Hj(t=>({...t,get:(e,n,r)=>Cb(e,n)||t.get(e,n,r),has:(e,n)=>!!Cb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Xj(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Xj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gv="@firebase/app",Ib="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=new Cw("@firebase/app"),Jj="@firebase/app-compat",eV="@firebase/analytics-compat",tV="@firebase/analytics",nV="@firebase/app-check-compat",rV="@firebase/app-check",sV="@firebase/auth",iV="@firebase/auth-compat",oV="@firebase/database",aV="@firebase/data-connect",lV="@firebase/database-compat",uV="@firebase/functions",cV="@firebase/functions-compat",dV="@firebase/installations",fV="@firebase/installations-compat",hV="@firebase/messaging",pV="@firebase/messaging-compat",mV="@firebase/performance",gV="@firebase/performance-compat",yV="@firebase/remote-config",vV="@firebase/remote-config-compat",_V="@firebase/storage",wV="@firebase/storage-compat",xV="@firebase/firestore",EV="@firebase/vertexai-preview",bV="@firebase/firestore-compat",TV="firebase",SV="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="[DEFAULT]",CV={[gv]:"fire-core",[Jj]:"fire-core-compat",[tV]:"fire-analytics",[eV]:"fire-analytics-compat",[rV]:"fire-app-check",[nV]:"fire-app-check-compat",[sV]:"fire-auth",[iV]:"fire-auth-compat",[oV]:"fire-rtdb",[aV]:"fire-data-connect",[lV]:"fire-rtdb-compat",[uV]:"fire-fn",[cV]:"fire-fn-compat",[dV]:"fire-iid",[fV]:"fire-iid-compat",[hV]:"fire-fcm",[pV]:"fire-fcm-compat",[mV]:"fire-perf",[gV]:"fire-perf-compat",[yV]:"fire-rc",[vV]:"fire-rc-compat",[_V]:"fire-gcs",[wV]:"fire-gcs-compat",[xV]:"fire-fst",[bV]:"fire-fst-compat",[EV]:"fire-vertex","fire-js":"fire-js",[TV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=new Map,IV=new Map,vv=new Map;function Rb(t,e){try{t.container.addComponent(e)}catch(n){ui.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ya(t){const e=t.name;if(vv.has(e))return ui.debug(`There were multiple attempts to register component ${e}.`),!1;vv.set(e,t);for(const n of Qc.values())Rb(n,t);for(const n of IV.values())Rb(n,t);return!0}function cm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fo=new Ld("app","Firebase",RV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=SV;function Rw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:yv,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw fo.create("bad-app-name",{appName:String(s)});if(n||(n=BR()),!n)throw fo.create("no-options");const i=Qc.get(s);if(i){if(up(n,i.options)&&up(r,i.config))return i;throw fo.create("duplicate-app",{appName:s})}const o=new Mj(s);for(const l of vv.values())o.addComponent(l);const a=new kV(n,r,o);return Qc.set(s,a),a}function dm(t=yv){const e=Qc.get(t);if(!e&&t===yv&&BR())return Rw();if(!e)throw fo.create("no-app",{appName:t});return e}function AV(){return Array.from(Qc.values())}function ms(t,e,n){var r;let s=(r=CV[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ui.warn(a.join(" "));return}ya(new yo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV="firebase-heartbeat-database",NV=1,Yc="firebase-heartbeat-store";let zg=null;function GR(){return zg||(zg=Kj(PV,NV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yc)}catch(n){console.warn(n)}}}}).catch(t=>{throw fo.create("idb-open",{originalErrorMessage:t.message})})),zg}async function DV(t){try{const n=(await GR()).transaction(Yc),r=await n.objectStore(Yc).get(KR(t));return await n.done,r}catch(e){if(e instanceof ks)ui.warn(e.message);else{const n=fo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ui.warn(n.message)}}}async function kb(t,e){try{const r=(await GR()).transaction(Yc,"readwrite");await r.objectStore(Yc).put(e,KR(t)),await r.done}catch(n){if(n instanceof ks)ui.warn(n.message);else{const r=fo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ui.warn(r.message)}}}function KR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=1024,MV=30*24*60*60*1e3;class LV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new VV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ab();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=MV}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ui.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ab(),{heartbeatsToSend:r,unsentEntries:s}=jV(this._heartbeatsCache.heartbeats),i=lp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ui.warn(n),""}}}function Ab(){return new Date().toISOString().substring(0,10)}function jV(t,e=OV){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Pb(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Pb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class VV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bj()?Tj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await DV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return kb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return kb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Pb(t){return lp(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(t){ya(new yo("platform-logger",e=>new Zj(e),"PRIVATE")),ya(new yo("heartbeat",e=>new LV(e),"PRIVATE")),ms(gv,Ib,t),ms(gv,Ib,"esm2017"),ms("fire-js","")}FV("");var cs=function(){return cs=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},cs.apply(this,arguments)};function Vd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function UV(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function QR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $V=QR,YR=new Ld("auth","Firebase",QR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp=new Cw("@firebase/auth");function BV(t,...e){cp.logLevel<=$e.WARN&&cp.warn(`Auth (${Na}): ${t}`,...e)}function xh(t,...e){cp.logLevel<=$e.ERROR&&cp.error(`Auth (${Na}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(t,...e){throw Aw(t,...e)}function Fr(t,...e){return Aw(t,...e)}function kw(t,e,n){const r=Object.assign(Object.assign({},$V()),{[e]:n});return new Ld("auth","Firebase",r).create(e,{appName:t.name})}function la(t){return kw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zV(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&xs(t,"argument-error"),kw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Aw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return YR.create(t,...e)}function Te(t,e,...n){if(!t)throw Aw(e,...n)}function Ys(t){const e="INTERNAL ASSERTION FAILED: "+t;throw xh(e),new Error(e)}function ci(t,e){t||Ys(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function WV(){return Nb()==="http:"||Nb()==="https:"}function Nb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WV()||_j()||"connection"in navigator)?navigator.onLine:!0}function qV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n){this.shortDelay=e,this.longDelay=n,ci(n>e,"Short delay should be less than long delay!"),this.isMobile=gj()||wj()}get(){return HV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(t,e){ci(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV=new Fd(3e4,6e4);function Nw(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function _u(t,e,n,r,s={}){return XR(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=jd(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},i);return vj()||(u.referrerPolicy="no-referrer"),ZR.fetch()(JR(t,t.config.apiHost,n,a),u)})}async function XR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},GV),e);try{const s=new YV(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Bf(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bf(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Bf(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Bf(t,"user-disabled",o);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw kw(t,f,u);xs(t,f)}}catch(s){if(s instanceof ks)throw s;xs(t,"network-request-failed",{message:String(s)})}}async function QV(t,e,n,r,s={}){const i=await _u(t,e,n,r,s);return"mfaPendingCredential"in i&&xs(t,"multi-factor-auth-required",{_serverResponse:i}),i}function JR(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Pw(t.config,s):`${t.config.apiScheme}://${s}`}class YV{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fr(this.auth,"network-request-failed")),KV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Fr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZV(t,e){return _u(t,"POST","/v1/accounts:delete",e)}async function ek(t,e){return _u(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XV(t,e=!1){const n=at(t),r=await n.getIdToken(e),s=Dw(r);Te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:bc(Wg(s.auth_time)),issuedAtTime:bc(Wg(s.iat)),expirationTime:bc(Wg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Wg(t){return Number(t)*1e3}function Dw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return xh("JWT malformed, contained fewer than 3 sections"),null;try{const s=FR(n);return s?JSON.parse(s):(xh("Failed to decode base64 JWT payload"),null)}catch(s){return xh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Db(t){const e=Dw(t);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ks&&JV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function JV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=bc(this.lastLoginAt),this.creationTime=bc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dp(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Zc(t,ek(n,{idToken:r}));Te(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?tk(i.providerUserInfo):[],a=nF(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),f=l?u:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new wv(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,d)}async function tF(t){const e=at(t);await dp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nF(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function tk(t){return t.map(e=>{var{providerId:n}=e,r=Vd(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rF(t,e){const n=await XR(t,{},async()=>{const r=jd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=JR(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ZR.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sF(t,e){return _u(t,"POST","/v2/accounts:revokeToken",Nw(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Db(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=Db(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await rF(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new xl;return r&&(Te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Te(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xl,this.toJSON())}_performRefresh(){return Ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t,e){Te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Zs{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Vd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new wv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Zc(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return XV(this,e)}reload(){return tF(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await dp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qs(this.auth.app))return Promise.reject(la(this.auth));const e=await this.getIdToken();return await Zc(this,ZV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,f;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(u=n.createdAt)!==null&&u!==void 0?u:void 0,b=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:T,emailVerified:A,isAnonymous:O,providerData:V,stsTokenManager:C}=n;Te(T&&C,e,"internal-error");const S=xl.fromJSON(this.name,C);Te(typeof T=="string",e,"internal-error"),Ii(d,e.name),Ii(h,e.name),Te(typeof A=="boolean",e,"internal-error"),Te(typeof O=="boolean",e,"internal-error"),Ii(g,e.name),Ii(_,e.name),Ii(E,e.name),Ii(x,e.name),Ii(v,e.name),Ii(b,e.name);const R=new Zs({uid:T,auth:e,email:h,emailVerified:A,displayName:d,isAnonymous:O,photoURL:_,phoneNumber:g,tenantId:E,stsTokenManager:S,createdAt:v,lastLoginAt:b});return V&&Array.isArray(V)&&(R.providerData=V.map(k=>Object.assign({},k))),x&&(R._redirectEventId=x),R}static async _fromIdTokenResponse(e,n,r=!1){const s=new xl;s.updateFromServerResponse(n);const i=new Zs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await dp(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Te(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?tk(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new xl;a.updateFromIdToken(r);const l=new Zs({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new wv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=new Map;function Xs(t){ci(t instanceof Function,"Expected a class definition");let e=Ob.get(t);return e?(ci(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ob.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nk.type="NONE";const Mb=nk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t,e,n){return`firebase:${t}:${e}:${n}`}class El{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Eh(this.userKey,s.apiKey,i),this.fullPersistenceKey=Eh("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Zs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new El(Xs(Mb),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Xs(Mb);const o=Eh(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const f=await u._get(o);if(f){const d=Zs._fromJSON(e,f);u!==i&&(a=d),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new El(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new El(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ok(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lk(e))return"Blackberry";if(uk(e))return"Webos";if(sk(e))return"Safari";if((e.includes("chrome/")||ik(e))&&!e.includes("edge/"))return"Chrome";if(ak(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function rk(t=Tn()){return/firefox\//i.test(t)}function sk(t=Tn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ik(t=Tn()){return/crios\//i.test(t)}function ok(t=Tn()){return/iemobile/i.test(t)}function ak(t=Tn()){return/android/i.test(t)}function lk(t=Tn()){return/blackberry/i.test(t)}function uk(t=Tn()){return/webos/i.test(t)}function Ow(t=Tn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function iF(t=Tn()){var e;return Ow(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oF(){return xj()&&document.documentMode===10}function ck(t=Tn()){return Ow(t)||ak(t)||uk(t)||lk(t)||/windows phone/i.test(t)||ok(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t,e=[]){let n;switch(t){case"Browser":n=Lb(Tn());break;case"Worker":n=`${Lb(Tn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Na}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lF(t,e={}){return _u(t,"GET","/v2/passwordPolicy",Nw(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF=6;class cF{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:uF,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jb(this),this.idTokenSubscription=new jb(this),this.beforeStateQueue=new aF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xs(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await El.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ek(this,{idToken:e}),r=await Zs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await dp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qs(this.app))return Promise.reject(la(this));const n=e?at(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qs(this.app)?Promise.reject(la(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qs(this.app)?Promise.reject(la(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lF(this),n=new cF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ld("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xs(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await El.create(this,[Xs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&BV(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function fm(t){return at(t)}class jb{constructor(e){this.auth=e,this.observer=null,this.addObserver=kj(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fF(t){Mw=t}function hF(t){return Mw.loadJS(t)}function pF(){return Mw.gapiScript}function mF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gF(t,e){const n=cm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(up(i,e??{}))return s;xs(s,"already-initialized")}return n.initialize({options:e})}function yF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function vF(t,e,n){const r=fm(t);Te(r._canInitEmulator,r,"emulator-config-failed"),Te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=fk(e),{host:o,port:a}=_F(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),wF()}function fk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _F(t){const e=fk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Vb(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Vb(o)}}}function Vb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function wF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ys("not implemented")}_getIdTokenResponse(e){return Ys("not implemented")}_linkToIdToken(e,n){return Ys("not implemented")}_getReauthenticationResolver(e){return Ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t,e){return QV(t,"POST","/v1/accounts:signInWithIdp",Nw(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF="http://localhost";class va extends hk{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Vd(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new va(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return bl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,bl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bl(e,n)}buildRequest(){const e={requestUri:xF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=jd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud extends Lw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends Ud{constructor(){super("facebook.com")}static credential(e){return va._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ji.credential(e.oauthAccessToken)}catch{return null}}}ji.FACEBOOK_SIGN_IN_METHOD="facebook.com";ji.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends Ud{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return va._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return qs.credential(n,r)}catch{return null}}}qs.GOOGLE_SIGN_IN_METHOD="google.com";qs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Ud{constructor(){super("github.com")}static credential(e){return va._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vi.credential(e.oauthAccessToken)}catch{return null}}}Vi.GITHUB_SIGN_IN_METHOD="github.com";Vi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Ud{constructor(){super("twitter.com")}static credential(e,n){return va._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Fi.credential(n,r)}catch{return null}}}Fi.TWITTER_SIGN_IN_METHOD="twitter.com";Fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Zs._fromIdTokenResponse(e,r,s),o=Fb(r);return new Zl({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Fb(r);return new Zl({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Fb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp extends ks{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,fp.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new fp(e,n,r,s)}}function pk(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?fp._fromErrorAndOperation(t,i,e,r):i})}async function EF(t,e,n=!1){const r=await Zc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Zl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bF(t,e,n=!1){const{auth:r}=t;if(Qs(r.app))return Promise.reject(la(r));const s="reauthenticate";try{const i=await Zc(t,pk(r,s,e,t),n);Te(i.idToken,r,"internal-error");const o=Dw(i.idToken);Te(o,r,"internal-error");const{sub:a}=o;return Te(t.uid===a,r,"user-mismatch"),Zl._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&xs(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TF(t,e,n=!1){if(Qs(t.app))return Promise.reject(la(t));const r="signIn",s=await pk(t,r,e),i=await Zl._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function SF(t,e,n,r){return at(t).onIdTokenChanged(e,n,r)}function CF(t,e,n){return at(t).beforeAuthStateChanged(e,n)}function IF(t,e,n,r){return at(t).onAuthStateChanged(e,n,r)}function RF(t){return at(t).signOut()}const hp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hp,"1"),this.storage.removeItem(hp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF=1e3,AF=10;class gk extends mk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ck(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);oF()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,AF):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},kF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gk.type="LOCAL";const PF=gk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk extends mk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yk.type="SESSION";const vk=yk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new hm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await NF(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=jw("",20);s.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(h.data.response);break;default:clearTimeout(f),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(){return window}function OF(t){gs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(){return typeof gs().WorkerGlobalScope<"u"&&typeof gs().importScripts=="function"}async function MF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function jF(){return _k()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="firebaseLocalStorageDb",VF=1,pp="firebaseLocalStorage",xk="fbase_key";class $d{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function pm(t,e){return t.transaction([pp],e?"readwrite":"readonly").objectStore(pp)}function FF(){const t=indexedDB.deleteDatabase(wk);return new $d(t).toPromise()}function xv(){const t=indexedDB.open(wk,VF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(pp,{keyPath:xk})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(pp)?e(r):(r.close(),await FF(),e(await xv()))})})}async function Ub(t,e,n){const r=pm(t,!0).put({[xk]:e,value:n});return new $d(r).toPromise()}async function UF(t,e){const n=pm(t,!1).get(e),r=await new $d(n).toPromise();return r===void 0?null:r.value}function $b(t,e){const n=pm(t,!0).delete(e);return new $d(n).toPromise()}const $F=800,BF=3;class Ek{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>BF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _k()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hm._getInstance(jF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await MF(),!this.activeServiceWorker)return;this.sender=new DF(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xv();return await Ub(e,hp,"1"),await $b(e,hp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ub(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>UF(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$b(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=pm(s,!1).getAll();return new $d(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$F)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ek.type="LOCAL";const zF=Ek;new Fd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(t,e){return e?Xs(e):(Te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw extends hk{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function WF(t){return TF(t.auth,new Vw(t),t.bypassAuthState)}function HF(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),bF(n,new Vw(t),t.bypassAuthState)}async function qF(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),EF(n,new Vw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WF;case"linkViaPopup":case"linkViaRedirect":return qF;case"reauthViaPopup":case"reauthViaRedirect":return HF;default:xs(this.auth,"internal-error")}}resolve(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF=new Fd(2e3,1e4);async function KF(t,e,n){if(Qs(t.app))return Promise.reject(Fr(t,"operation-not-supported-in-this-environment"));const r=fm(t);zV(t,e,Lw);const s=bk(r,n);return new Qo(r,"signInViaPopup",e,s).executeNotNull()}class Qo extends Tk{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Qo.currentPopupAction&&Qo.currentPopupAction.cancel(),Qo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){ci(this.filter.length===1,"Popup operations only handle one event");const e=jw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GF.get())};e()}}Qo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF="pendingRedirect",bh=new Map;class YF extends Tk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=bh.get(this.auth._key());if(!e){try{const r=await ZF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}bh.set(this.auth._key(),e)}return this.bypassAuthState||bh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZF(t,e){const n=e4(e),r=JF(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function XF(t,e){bh.set(t._key(),e)}function JF(t){return Xs(t._redirectPersistence)}function e4(t){return Eh(QF,t.config.apiKey,t.name)}async function t4(t,e,n=!1){if(Qs(t.app))return Promise.reject(la(t));const r=fm(t),s=bk(r,e),o=await new YF(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=10*60*1e3;class r4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!s4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Sk(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Fr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=n4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bb(e))}saveEventToCache(e){this.cachedEventUids.add(Bb(e)),this.lastProcessedEventTime=Date.now()}}function Bb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Sk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function s4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i4(t,e={}){return _u(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a4=/^https?/;async function l4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await i4(t);for(const n of e)try{if(u4(n))return}catch{}xs(t,"unauthorized-domain")}function u4(t){const e=_v(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!a4.test(n))return!1;if(o4.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=new Fd(3e4,6e4);function zb(){const t=gs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function d4(t){return new Promise((e,n)=>{var r,s,i;function o(){zb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zb(),n(Fr(t,"network-request-failed"))},timeout:c4.get()})}if(!((s=(r=gs().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=gs().gapi)===null||i===void 0)&&i.load)o();else{const a=mF("iframefcb");return gs()[a]=()=>{gapi.load?o():n(Fr(t,"network-request-failed"))},hF(`${pF()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Th=null,e})}let Th=null;function f4(t){return Th=Th||d4(t),Th}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=new Fd(5e3,15e3),p4="__/auth/iframe",m4="emulator/auth/iframe",g4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},y4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v4(t){const e=t.config;Te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Pw(e,m4):`https://${t.config.authDomain}/${p4}`,r={apiKey:e.apiKey,appName:t.name,v:Na},s=y4.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${jd(r).slice(1)}`}async function _4(t){const e=await f4(t),n=gs().gapi;return Te(n,t,"internal-error"),e.open({where:document.body,url:v4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:g4,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Fr(t,"network-request-failed"),a=gs().setTimeout(()=>{i(o)},h4.get());function l(){gs().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},x4=500,E4=600,b4="_blank",T4="http://localhost";class Wb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function S4(t,e,n,r=x4,s=E4){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},w4),{width:r.toString(),height:s.toString(),top:i,left:o}),u=Tn().toLowerCase();n&&(a=ik(u)?b4:n),rk(u)&&(e=e||T4,l.scrollbars="yes");const f=Object.entries(l).reduce((h,[g,_])=>`${h}${g}=${_},`,"");if(iF(u)&&a!=="_self")return C4(e||"",a),new Wb(null);const d=window.open(e||"",a,f);Te(d,t,"popup-blocked");try{d.focus()}catch{}return new Wb(d)}function C4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4="__/auth/handler",R4="emulator/auth/handler",k4=encodeURIComponent("fac");async function Hb(t,e,n,r,s,i){Te(t.config.authDomain,t,"auth-domain-config-required"),Te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Na,eventId:s};if(e instanceof Lw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Rj(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,d]of Object.entries({}))o[f]=d}if(e instanceof Ud){const f=e.getScopes().filter(d=>d!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const l=await t._getAppCheckToken(),u=l?`#${k4}=${encodeURIComponent(l)}`:"";return`${A4(t)}?${jd(a).slice(1)}${u}`}function A4({config:t}){return t.emulator?Pw(t,R4):`https://${t.authDomain}/${I4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="webStorageSupport";class P4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vk,this._completeRedirectFn=t4,this._overrideRedirectResult=XF}async _openPopup(e,n,r,s){var i;ci((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Hb(e,n,r,_v(),s);return S4(e,o,jw())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Hb(e,n,r,_v(),s);return OF(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ci(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await _4(e),r=new r4(e);return n.register("authEvent",s=>(Te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hg,{type:Hg},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Hg];o!==void 0&&n(!!o),xs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=l4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ck()||sk()||Ow()}}const N4=P4;var qb="@firebase/auth",Gb="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function M4(t){ya(new yo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dk(t)},u=new dF(r,s,i,l);return yF(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ya(new yo("auth-internal",e=>{const n=fm(e.getProvider("auth").getImmediate());return(r=>new D4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ms(qb,Gb,O4(t)),ms(qb,Gb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=5*60,j4=zR("authIdTokenMaxAge")||L4;let Kb=null;const V4=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>j4)return;const s=n==null?void 0:n.token;Kb!==s&&(Kb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function mm(t=dm()){const e=cm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=gF(t,{popupRedirectResolver:N4,persistence:[zF,PF,vk]}),r=zR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=V4(i.toString());CF(n,o,()=>o(n.currentUser)),SF(n,a=>o(a))}}const s=UR("auth");return s&&vF(n,`http://${s}`),n}function F4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}fF({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Fr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",F4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});M4("Browser");function U4(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const $4=t=>{switch(t){case"success":return W4;case"info":return q4;case"warning":return H4;case"error":return G4;default:return null}},B4=Array(12).fill(0),z4=({visible:t,className:e})=>q.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},q.createElement("div",{className:"sonner-spinner"},B4.map((n,r)=>q.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),W4=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),H4=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),q4=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),G4=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),K4=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},q.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),q.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Q4=()=>{const[t,e]=q.useState(document.hidden);return q.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let Ev=1;class Y4{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Ev++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let i=r!==void 0,o;const a=s.then(async u=>{if(o=["resolve",u],q.isValidElement(u))i=!1,this.create({id:r,type:"default",message:u});else if(X4(u)&&!u.ok){i=!1;const d=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description,_=typeof d=="object"&&!q.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:h,..._})}else if(u instanceof Error){i=!1;const d=typeof n.error=="function"?await n.error(u):n.error,h=typeof n.description=="function"?await n.description(u):n.description,_=typeof d=="object"&&!q.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:h,..._})}else if(n.success!==void 0){i=!1;const d=typeof n.success=="function"?await n.success(u):n.success,h=typeof n.description=="function"?await n.description(u):n.description,_=typeof d=="object"&&!q.isValidElement(d)?d:{message:d};this.create({id:r,type:"success",description:h,..._})}}).catch(async u=>{if(o=["reject",u],n.error!==void 0){i=!1;const f=typeof n.error=="function"?await n.error(u):n.error,d=typeof n.description=="function"?await n.description(u):n.description,g=typeof f=="object"&&!q.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:d,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((u,f)=>a.then(()=>o[0]==="reject"?f(o[1]):u(o[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{const r=(n==null?void 0:n.id)||Ev++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const zn=new Y4,Z4=(t,e)=>{const n=(e==null?void 0:e.id)||Ev++;return zn.addToast({title:t,...e,id:n}),n},X4=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",J4=Z4,eU=()=>zn.toasts,tU=()=>zn.getActiveToasts(),Ae=Object.assign(J4,{success:zn.success,info:zn.info,warning:zn.warning,error:zn.error,custom:zn.custom,message:zn.message,promise:zn.promise,dismiss:zn.dismiss,loading:zn.loading},{getHistory:eU,getToasts:tU});U4("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function zf(t){return t.label!==void 0}const nU=3,rU="24px",sU="16px",Qb=4e3,iU=356,oU=14,aU=45,lU=200;function rs(...t){return t.filter(Boolean).join(" ")}function uU(t){const[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}const cU=t=>{var e,n,r,s,i,o,a,l,u;const{invert:f,toast:d,unstyled:h,interacting:g,setHeights:_,visibleToasts:E,heights:x,index:v,toasts:b,expanded:T,removeToast:A,defaultRichColors:O,closeButton:V,style:C,cancelButtonStyle:S,actionButtonStyle:R,className:k="",descriptionClassName:N="",duration:D,position:P,gap:ce,expandByDefault:pe,classNames:Z,icons:ge,closeButtonAriaLabel:j="Close toast"}=t,[B,X]=q.useState(null),[te,le]=q.useState(null),[se,Ie]=q.useState(!1),[Ge,Ce]=q.useState(!1),[be,Ft]=q.useState(!1),[Ye,ut]=q.useState(!1),[Zt,Xt]=q.useState(!1),[Xn,Jn]=q.useState(0),[Ns,Jr]=q.useState(0),hr=q.useRef(d.duration||D||Qb),_i=q.useRef(null),Ut=q.useRef(null),Ua=v===0,Oo=v+1<=E,M=d.type,U=d.dismissible!==!1,z=d.className||"",re=d.descriptionClassName||"",K=q.useMemo(()=>x.findIndex(xe=>xe.toastId===d.id)||0,[x,d.id]),H=q.useMemo(()=>{var xe;return(xe=d.closeButton)!=null?xe:V},[d.closeButton,V]),ie=q.useMemo(()=>d.duration||D||Qb,[d.duration,D]),Me=q.useRef(0),Ke=q.useRef(0),bt=q.useRef(0),Un=q.useRef(null),[wi,xi]=P.split("-"),Ei=q.useMemo(()=>x.reduce((xe,Tt,St)=>St>=K?xe:xe+Tt.height,0),[x,K]),Mo=Q4(),ku=d.invert||f,es=M==="loading";Ke.current=q.useMemo(()=>K*ce+Ei,[K,Ei]),q.useEffect(()=>{hr.current=ie},[ie]),q.useEffect(()=>{Ie(!0)},[]),q.useEffect(()=>{const xe=Ut.current;if(xe){const Tt=xe.getBoundingClientRect().height;return Jr(Tt),_(St=>[{toastId:d.id,height:Tt,position:d.position},...St]),()=>_(St=>St.filter(cn=>cn.toastId!==d.id))}},[_,d.id]),q.useLayoutEffect(()=>{if(!se)return;const xe=Ut.current,Tt=xe.style.height;xe.style.height="auto";const St=xe.getBoundingClientRect().height;xe.style.height=Tt,Jr(St),_(cn=>cn.find(Nt=>Nt.toastId===d.id)?cn.map(Nt=>Nt.toastId===d.id?{...Nt,height:St}:Nt):[{toastId:d.id,height:St,position:d.position},...cn])},[se,d.title,d.description,_,d.id]);const br=q.useCallback(()=>{Ce(!0),Jn(Ke.current),_(xe=>xe.filter(Tt=>Tt.toastId!==d.id)),setTimeout(()=>{A(d)},lU)},[d,A,_,Ke]);q.useEffect(()=>{if(d.promise&&M==="loading"||d.duration===1/0||d.type==="loading")return;let xe;return T||g||Mo?(()=>{if(bt.current<Me.current){const cn=new Date().getTime()-Me.current;hr.current=hr.current-cn}bt.current=new Date().getTime()})():(()=>{hr.current!==1/0&&(Me.current=new Date().getTime(),xe=setTimeout(()=>{d.onAutoClose==null||d.onAutoClose.call(d,d),br()},hr.current))})(),()=>clearTimeout(xe)},[T,g,d,M,Mo,br]),q.useEffect(()=>{d.delete&&br()},[br,d.delete]);function af(){var xe;if(ge!=null&&ge.loading){var Tt;return q.createElement("div",{className:rs(Z==null?void 0:Z.loader,d==null||(Tt=d.classNames)==null?void 0:Tt.loader,"sonner-loader"),"data-visible":M==="loading"},ge.loading)}return q.createElement(z4,{className:rs(Z==null?void 0:Z.loader,d==null||(xe=d.classNames)==null?void 0:xe.loader),visible:M==="loading"})}const Lo=d.icon||(ge==null?void 0:ge[M])||$4(M);var $a,Ba;return q.createElement("li",{tabIndex:0,ref:Ut,className:rs(k,z,Z==null?void 0:Z.toast,d==null||(e=d.classNames)==null?void 0:e.toast,Z==null?void 0:Z.default,Z==null?void 0:Z[M],d==null||(n=d.classNames)==null?void 0:n[M]),"data-sonner-toast":"","data-rich-colors":($a=d.richColors)!=null?$a:O,"data-styled":!(d.jsx||d.unstyled||h),"data-mounted":se,"data-promise":!!d.promise,"data-swiped":Zt,"data-removed":Ge,"data-visible":Oo,"data-y-position":wi,"data-x-position":xi,"data-index":v,"data-front":Ua,"data-swiping":be,"data-dismissible":U,"data-type":M,"data-invert":ku,"data-swipe-out":Ye,"data-swipe-direction":te,"data-expanded":!!(T||pe&&se),style:{"--index":v,"--toasts-before":v,"--z-index":b.length-v,"--offset":`${Ge?Xn:Ke.current}px`,"--initial-height":pe?"auto":`${Ns}px`,...C,...d.style},onDragEnd:()=>{Ft(!1),X(null),Un.current=null},onPointerDown:xe=>{es||!U||(_i.current=new Date,Jn(Ke.current),xe.target.setPointerCapture(xe.pointerId),xe.target.tagName!=="BUTTON"&&(Ft(!0),Un.current={x:xe.clientX,y:xe.clientY}))},onPointerUp:()=>{var xe,Tt,St;if(Ye||!U)return;Un.current=null;const cn=Number(((xe=Ut.current)==null?void 0:xe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ts=Number(((Tt=Ut.current)==null?void 0:Tt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Nt=new Date().getTime()-((St=_i.current)==null?void 0:St.getTime()),Je=B==="x"?cn:ts,jo=Math.abs(Je)/Nt;if(Math.abs(Je)>=aU||jo>.11){Jn(Ke.current),d.onDismiss==null||d.onDismiss.call(d,d),le(B==="x"?cn>0?"right":"left":ts>0?"down":"up"),br(),ut(!0);return}else{var Jt,en;(Jt=Ut.current)==null||Jt.style.setProperty("--swipe-amount-x","0px"),(en=Ut.current)==null||en.style.setProperty("--swipe-amount-y","0px")}Xt(!1),Ft(!1),X(null)},onPointerMove:xe=>{var Tt,St,cn;if(!Un.current||!U||((Tt=window.getSelection())==null?void 0:Tt.toString().length)>0)return;const Nt=xe.clientY-Un.current.y,Je=xe.clientX-Un.current.x;var jo;const Jt=(jo=t.swipeDirections)!=null?jo:uU(P);!B&&(Math.abs(Je)>1||Math.abs(Nt)>1)&&X(Math.abs(Je)>Math.abs(Nt)?"x":"y");let en={x:0,y:0};const lf=Ds=>1/(1.5+Math.abs(Ds)/20);if(B==="y"){if(Jt.includes("top")||Jt.includes("bottom"))if(Jt.includes("top")&&Nt<0||Jt.includes("bottom")&&Nt>0)en.y=Nt;else{const Ds=Nt*lf(Nt);en.y=Math.abs(Ds)<Math.abs(Nt)?Ds:Nt}}else if(B==="x"&&(Jt.includes("left")||Jt.includes("right")))if(Jt.includes("left")&&Je<0||Jt.includes("right")&&Je>0)en.x=Je;else{const Ds=Je*lf(Je);en.x=Math.abs(Ds)<Math.abs(Je)?Ds:Je}(Math.abs(en.x)>0||Math.abs(en.y)>0)&&Xt(!0),(St=Ut.current)==null||St.style.setProperty("--swipe-amount-x",`${en.x}px`),(cn=Ut.current)==null||cn.style.setProperty("--swipe-amount-y",`${en.y}px`)}},H&&!d.jsx&&M!=="loading"?q.createElement("button",{"aria-label":j,"data-disabled":es,"data-close-button":!0,onClick:es||!U?()=>{}:()=>{br(),d.onDismiss==null||d.onDismiss.call(d,d)},className:rs(Z==null?void 0:Z.closeButton,d==null||(r=d.classNames)==null?void 0:r.closeButton)},(Ba=ge==null?void 0:ge.close)!=null?Ba:K4):null,(M||d.icon||d.promise)&&d.icon!==null&&((ge==null?void 0:ge[M])!==null||d.icon)?q.createElement("div",{"data-icon":"",className:rs(Z==null?void 0:Z.icon,d==null||(s=d.classNames)==null?void 0:s.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||af():null,d.type!=="loading"?Lo:null):null,q.createElement("div",{"data-content":"",className:rs(Z==null?void 0:Z.content,d==null||(i=d.classNames)==null?void 0:i.content)},q.createElement("div",{"data-title":"",className:rs(Z==null?void 0:Z.title,d==null||(o=d.classNames)==null?void 0:o.title)},d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title),d.description?q.createElement("div",{"data-description":"",className:rs(N,re,Z==null?void 0:Z.description,d==null||(a=d.classNames)==null?void 0:a.description)},typeof d.description=="function"?d.description():d.description):null),q.isValidElement(d.cancel)?d.cancel:d.cancel&&zf(d.cancel)?q.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||S,onClick:xe=>{zf(d.cancel)&&U&&(d.cancel.onClick==null||d.cancel.onClick.call(d.cancel,xe),br())},className:rs(Z==null?void 0:Z.cancelButton,d==null||(l=d.classNames)==null?void 0:l.cancelButton)},d.cancel.label):null,q.isValidElement(d.action)?d.action:d.action&&zf(d.action)?q.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||R,onClick:xe=>{zf(d.action)&&(d.action.onClick==null||d.action.onClick.call(d.action,xe),!xe.defaultPrevented&&br())},className:rs(Z==null?void 0:Z.actionButton,d==null||(u=d.classNames)==null?void 0:u.actionButton)},d.action.label):null)};function Yb(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function dU(t,e){const n={};return[t,e].forEach((r,s)=>{const i=s===1,o=i?"--mobile-offset":"--offset",a=i?sU:rU;function l(u){["top","right","bottom","left"].forEach(f=>{n[`${o}-${f}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=a:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(a)}),n}const Ck=q.forwardRef(function(e,n){const{invert:r,position:s="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:a,className:l,offset:u,mobileOffset:f,theme:d="light",richColors:h,duration:g,style:_,visibleToasts:E=nU,toastOptions:x,dir:v=Yb(),gap:b=oU,icons:T,containerAriaLabel:A="Notifications"}=e,[O,V]=q.useState([]),C=q.useMemo(()=>Array.from(new Set([s].concat(O.filter(te=>te.position).map(te=>te.position)))),[O,s]),[S,R]=q.useState([]),[k,N]=q.useState(!1),[D,P]=q.useState(!1),[ce,pe]=q.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Z=q.useRef(null),ge=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=q.useRef(null),B=q.useRef(!1),X=q.useCallback(te=>{V(le=>{var se;return(se=le.find(Ie=>Ie.id===te.id))!=null&&se.delete||zn.dismiss(te.id),le.filter(({id:Ie})=>Ie!==te.id)})},[]);return q.useEffect(()=>zn.subscribe(te=>{if(te.dismiss){requestAnimationFrame(()=>{V(le=>le.map(se=>se.id===te.id?{...se,delete:!0}:se))});return}setTimeout(()=>{ER.flushSync(()=>{V(le=>{const se=le.findIndex(Ie=>Ie.id===te.id);return se!==-1?[...le.slice(0,se),{...le[se],...te},...le.slice(se+1)]:[te,...le]})})})}),[O]),q.useEffect(()=>{if(d!=="system"){pe(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?pe("dark"):pe("light")),typeof window>"u")return;const te=window.matchMedia("(prefers-color-scheme: dark)");try{te.addEventListener("change",({matches:le})=>{pe(le?"dark":"light")})}catch{te.addListener(({matches:se})=>{try{pe(se?"dark":"light")}catch(Ie){console.error(Ie)}})}},[d]),q.useEffect(()=>{O.length<=1&&N(!1)},[O]),q.useEffect(()=>{const te=le=>{var se;if(i.every(Ce=>le[Ce]||le.code===Ce)){var Ge;N(!0),(Ge=Z.current)==null||Ge.focus()}le.code==="Escape"&&(document.activeElement===Z.current||(se=Z.current)!=null&&se.contains(document.activeElement))&&N(!1)};return document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)},[i]),q.useEffect(()=>{if(Z.current)return()=>{j.current&&(j.current.focus({preventScroll:!0}),j.current=null,B.current=!1)}},[Z.current]),q.createElement("section",{ref:n,"aria-label":`${A} ${ge}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((te,le)=>{var se;const[Ie,Ge]=te.split("-");return O.length?q.createElement("ol",{key:te,dir:v==="auto"?Yb():v,tabIndex:-1,ref:Z,className:l,"data-sonner-toaster":!0,"data-sonner-theme":ce,"data-y-position":Ie,"data-lifted":k&&O.length>1&&!o,"data-x-position":Ge,style:{"--front-toast-height":`${((se=S[0])==null?void 0:se.height)||0}px`,"--width":`${iU}px`,"--gap":`${b}px`,..._,...dU(u,f)},onBlur:Ce=>{B.current&&!Ce.currentTarget.contains(Ce.relatedTarget)&&(B.current=!1,j.current&&(j.current.focus({preventScroll:!0}),j.current=null))},onFocus:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||B.current||(B.current=!0,j.current=Ce.relatedTarget)},onMouseEnter:()=>N(!0),onMouseMove:()=>N(!0),onMouseLeave:()=>{D||N(!1)},onDragEnd:()=>N(!1),onPointerDown:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||P(!0)},onPointerUp:()=>P(!1)},O.filter(Ce=>!Ce.position&&le===0||Ce.position===te).map((Ce,be)=>{var Ft,Ye;return q.createElement(cU,{key:Ce.id,icons:T,index:be,toast:Ce,defaultRichColors:h,duration:(Ft=x==null?void 0:x.duration)!=null?Ft:g,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:r,visibleToasts:E,closeButton:(Ye=x==null?void 0:x.closeButton)!=null?Ye:a,interacting:D,position:te,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,closeButtonAriaLabel:x==null?void 0:x.closeButtonAriaLabel,removeToast:X,toasts:O.filter(ut=>ut.position==Ce.position),heights:S.filter(ut=>ut.position==Ce.position),setHeights:R,expandByDefault:o,gap:b,expanded:k,swipeDirections:e.swipeDirections})})):null}))}),Ik=y.createContext({user:null,loading:!0,logout:async()=>{},signInWithGoogle:async()=>{}});function fU({children:t}){const[e,n]=y.useState(null),[r,s]=y.useState(!0),i=mm(),o=vi();y.useEffect(()=>{const u=IF(i,f=>{n(f),s(!1),f&&Ae.success(`Welcome back, ${f.displayName}!`)});return()=>u()},[i,o]);const a=async()=>{try{await RF(i),Ae.success("Successfully signed out"),o("/login")}catch(u){console.error("Error signing out:",u),Ae.error("Failed to sign out")}},l=async()=>{try{const u=new qs;await KF(i,u),Ae.success("Successfully signed in!")}catch(u){console.error("Error signing in with Google:",u),Ae.error("Failed to sign in. Please try again.")}};return p.jsx(Ik.Provider,{value:{user:e,loading:r,logout:a,signInWithGoogle:l},children:t})}const Yt=()=>y.useContext(Ik);var wu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_a=typeof window>"u"||"Deno"in globalThis;function mr(){}function hU(t,e){return typeof t=="function"?t(e):t}function bv(t){return typeof t=="number"&&t>=0&&t!==1/0}function Rk(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Tl(t,e){return typeof t=="function"?t(e):t}function Nr(t,e){return typeof t=="function"?t(e):t}function Zb(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==Fw(o,e.options))return!1}else if(!Xc(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function Xb(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(wa(e.options.mutationKey)!==wa(i))return!1}else if(!Xc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Fw(t,e){return((e==null?void 0:e.queryKeyHashFn)||wa)(t)}function wa(t){return JSON.stringify(t,(e,n)=>Tv(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Xc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Xc(t[n],e[n])):!1}function kk(t,e){if(t===e)return t;const n=Jb(t)&&Jb(e);if(n||Tv(t)&&Tv(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{};let l=0;for(let u=0;u<o;u++){const f=n?u:i[u];(!n&&r.includes(f)||n)&&t[f]===void 0&&e[f]===void 0?(a[f]=void 0,l++):(a[f]=kk(t[f],e[f]),a[f]===t[f]&&t[f]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function mp(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Jb(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Tv(t){if(!eT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!eT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function eT(t){return Object.prototype.toString.call(t)==="[object Object]"}function pU(t){return new Promise(e=>{setTimeout(e,t)})}function Sv(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?kk(t,e):e}function mU(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function gU(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Uw=Symbol();function Ak(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Uw?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Xo,zi,Pl,XS,yU=(XS=class extends wu{constructor(){super();_e(this,Xo);_e(this,zi);_e(this,Pl);oe(this,Pl,e=>{if(!_a&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){L(this,zi)||this.setEventListener(L(this,Pl))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,zi))==null||e.call(this),oe(this,zi,void 0))}setEventListener(e){var n;oe(this,Pl,e),(n=L(this,zi))==null||n.call(this),oe(this,zi,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){L(this,Xo)!==e&&(oe(this,Xo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof L(this,Xo)=="boolean"?L(this,Xo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Xo=new WeakMap,zi=new WeakMap,Pl=new WeakMap,XS),$w=new yU,Nl,Wi,Dl,JS,vU=(JS=class extends wu{constructor(){super();_e(this,Nl,!0);_e(this,Wi);_e(this,Dl);oe(this,Dl,e=>{if(!_a&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){L(this,Wi)||this.setEventListener(L(this,Dl))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,Wi))==null||e.call(this),oe(this,Wi,void 0))}setEventListener(e){var n;oe(this,Dl,e),(n=L(this,Wi))==null||n.call(this),oe(this,Wi,e(this.setOnline.bind(this)))}setOnline(e){L(this,Nl)!==e&&(oe(this,Nl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return L(this,Nl)}},Nl=new WeakMap,Wi=new WeakMap,Dl=new WeakMap,JS),gp=new vU;function Cv(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function _U(t){return Math.min(1e3*2**t,3e4)}function Pk(t){return(t??"online")==="online"?gp.isOnline():!0}var Nk=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function qg(t){return t instanceof Nk}function Dk(t){let e=!1,n=0,r=!1,s;const i=Cv(),o=E=>{var x;r||(h(new Nk(E)),(x=t.abort)==null||x.call(t))},a=()=>{e=!0},l=()=>{e=!1},u=()=>$w.isFocused()&&(t.networkMode==="always"||gp.isOnline())&&t.canRun(),f=()=>Pk(t.networkMode)&&t.canRun(),d=E=>{var x;r||(r=!0,(x=t.onSuccess)==null||x.call(t,E),s==null||s(),i.resolve(E))},h=E=>{var x;r||(r=!0,(x=t.onError)==null||x.call(t,E),s==null||s(),i.reject(E))},g=()=>new Promise(E=>{var x;s=v=>{(r||u())&&E(v)},(x=t.onPause)==null||x.call(t)}).then(()=>{var E;s=void 0,r||(E=t.onContinue)==null||E.call(t)}),_=()=>{if(r)return;let E;const x=n===0?t.initialPromise:void 0;try{E=x??t.fn()}catch(v){E=Promise.reject(v)}Promise.resolve(E).then(d).catch(v=>{var V;if(r)return;const b=t.retry??(_a?0:3),T=t.retryDelay??_U,A=typeof T=="function"?T(n,v):T,O=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,v);if(e||!O){h(v);return}n++,(V=t.onFail)==null||V.call(t,n,v),pU(A).then(()=>u()?void 0:g()).then(()=>{e?h(v):_()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:f,start:()=>(f()?_():g().then(_),i)}}var wU=t=>setTimeout(t,0);function xU(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=wU;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Wt=xU(),Jo,eC,Ok=(eC=class{constructor(){_e(this,Jo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),bv(this.gcTime)&&oe(this,Jo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(_a?1/0:5*60*1e3))}clearGcTimeout(){L(this,Jo)&&(clearTimeout(L(this,Jo)),oe(this,Jo,void 0))}},Jo=new WeakMap,eC),Ol,Ml,pr,ea,yn,Sd,ta,Rr,Fs,tC,EU=(tC=class extends Ok{constructor(n){super();_e(this,Rr);_e(this,Ol);_e(this,Ml);_e(this,pr);_e(this,ea);_e(this,yn);_e(this,Sd);_e(this,ta);oe(this,ta,!1),oe(this,Sd,n.defaultOptions),this.setOptions(n.options),this.observers=[],oe(this,ea,n.client),oe(this,pr,L(this,ea).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,oe(this,Ol,bU(this.options)),this.state=n.state??L(this,Ol),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=L(this,yn))==null?void 0:n.promise}setOptions(n){this.options={...L(this,Sd),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&L(this,pr).remove(this)}setData(n,r){const s=Sv(this.state.data,n,this.options);return Ne(this,Rr,Fs).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Ne(this,Rr,Fs).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=L(this,yn))==null?void 0:s.promise;return(i=L(this,yn))==null||i.cancel(n),r?r.then(mr).catch(mr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(L(this,Ol))}isActive(){return this.observers.some(n=>Nr(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Uw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!Rk(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=L(this,yn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=L(this,yn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),L(this,pr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(L(this,yn)&&(L(this,ta)?L(this,yn).cancel({revert:!0}):L(this,yn).cancelRetry()),this.scheduleGc()),L(this,pr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ne(this,Rr,Fs).call(this,{type:"invalidate"})}fetch(n,r){var u,f,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(L(this,yn))return L(this,yn).continueRetry(),L(this,yn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const h=this.observers.find(g=>g.options.queryFn);h&&this.setOptions(h.options)}const s=new AbortController,i=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(oe(this,ta,!0),s.signal)})},o=()=>{const h=Ak(this.options,r),g={client:L(this,ea),queryKey:this.queryKey,meta:this.meta};return i(g),oe(this,ta,!1),this.options.persister?this.options.persister(h,g,this):h(g)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:L(this,ea),state:this.state,fetchFn:o};i(a),(u=this.options.behavior)==null||u.onFetch(a,this),oe(this,Ml,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=a.fetchOptions)==null?void 0:f.meta))&&Ne(this,Rr,Fs).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const l=h=>{var g,_,E,x;qg(h)&&h.silent||Ne(this,Rr,Fs).call(this,{type:"error",error:h}),qg(h)||((_=(g=L(this,pr).config).onError)==null||_.call(g,h,this),(x=(E=L(this,pr).config).onSettled)==null||x.call(E,this.state.data,h,this)),this.scheduleGc()};return oe(this,yn,Dk({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:h=>{var g,_,E,x;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(v){l(v);return}(_=(g=L(this,pr).config).onSuccess)==null||_.call(g,h,this),(x=(E=L(this,pr).config).onSettled)==null||x.call(E,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,g)=>{Ne(this,Rr,Fs).call(this,{type:"failed",failureCount:h,error:g})},onPause:()=>{Ne(this,Rr,Fs).call(this,{type:"pause"})},onContinue:()=>{Ne(this,Rr,Fs).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),L(this,yn).start()}},Ol=new WeakMap,Ml=new WeakMap,pr=new WeakMap,ea=new WeakMap,yn=new WeakMap,Sd=new WeakMap,ta=new WeakMap,Rr=new WeakSet,Fs=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Mk(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return qg(i)&&i.revert&&L(this,Ml)?{...L(this,Ml),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Wt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),L(this,pr).notify({query:this,type:"updated",action:n})})},tC);function Mk(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Pk(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function bU(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var os,nC,TU=(nC=class extends wu{constructor(e={}){super();_e(this,os);this.config=e,oe(this,os,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Fw(s,n);let o=this.get(i);return o||(o=new EU({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){L(this,os).has(e.queryHash)||(L(this,os).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=L(this,os).get(e.queryHash);n&&(e.destroy(),n===e&&L(this,os).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Wt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return L(this,os).get(e)}getAll(){return[...L(this,os).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Zb(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Zb(e,r)):n}notify(e){Wt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Wt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Wt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},os=new WeakMap,nC),as,In,na,ls,Ai,rC,SU=(rC=class extends Ok{constructor(n){super();_e(this,ls);_e(this,as);_e(this,In);_e(this,na);this.mutationId=n.mutationId,oe(this,In,n.mutationCache),oe(this,as,[]),this.state=n.state||Lk(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){L(this,as).includes(n)||(L(this,as).push(n),this.clearGcTimeout(),L(this,In).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){oe(this,as,L(this,as).filter(r=>r!==n)),this.scheduleGc(),L(this,In).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){L(this,as).length||(this.state.status==="pending"?this.scheduleGc():L(this,In).remove(this))}continue(){var n;return((n=L(this,na))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,a,l,u,f,d,h,g,_,E,x,v,b,T,A,O,V,C,S,R;const r=()=>{Ne(this,ls,Ai).call(this,{type:"continue"})};oe(this,na,Dk({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(k,N)=>{Ne(this,ls,Ai).call(this,{type:"failed",failureCount:k,error:N})},onPause:()=>{Ne(this,ls,Ai).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>L(this,In).canRun(this)}));const s=this.state.status==="pending",i=!L(this,na).canStart();try{if(s)r();else{Ne(this,ls,Ai).call(this,{type:"pending",variables:n,isPaused:i}),await((a=(o=L(this,In).config).onMutate)==null?void 0:a.call(o,n,this));const N=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,n));N!==this.state.context&&Ne(this,ls,Ai).call(this,{type:"pending",context:N,variables:n,isPaused:i})}const k=await L(this,na).start();return await((d=(f=L(this,In).config).onSuccess)==null?void 0:d.call(f,k,n,this.state.context,this)),await((g=(h=this.options).onSuccess)==null?void 0:g.call(h,k,n,this.state.context)),await((E=(_=L(this,In).config).onSettled)==null?void 0:E.call(_,k,null,this.state.variables,this.state.context,this)),await((v=(x=this.options).onSettled)==null?void 0:v.call(x,k,null,n,this.state.context)),Ne(this,ls,Ai).call(this,{type:"success",data:k}),k}catch(k){try{throw await((T=(b=L(this,In).config).onError)==null?void 0:T.call(b,k,n,this.state.context,this)),await((O=(A=this.options).onError)==null?void 0:O.call(A,k,n,this.state.context)),await((C=(V=L(this,In).config).onSettled)==null?void 0:C.call(V,void 0,k,this.state.variables,this.state.context,this)),await((R=(S=this.options).onSettled)==null?void 0:R.call(S,void 0,k,n,this.state.context)),k}finally{Ne(this,ls,Ai).call(this,{type:"error",error:k})}}finally{L(this,In).runNext(this)}}},as=new WeakMap,In=new WeakMap,na=new WeakMap,ls=new WeakSet,Ai=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Wt.batch(()=>{L(this,as).forEach(s=>{s.onMutationUpdate(n)}),L(this,In).notify({mutation:this,type:"updated",action:n})})},rC);function Lk(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ws,kr,Cd,sC,CU=(sC=class extends wu{constructor(e={}){super();_e(this,Ws);_e(this,kr);_e(this,Cd);this.config=e,oe(this,Ws,new Set),oe(this,kr,new Map),oe(this,Cd,0)}build(e,n,r){const s=new SU({mutationCache:this,mutationId:++bf(this,Cd)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){L(this,Ws).add(e);const n=Wf(e);if(typeof n=="string"){const r=L(this,kr).get(n);r?r.push(e):L(this,kr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(L(this,Ws).delete(e)){const n=Wf(e);if(typeof n=="string"){const r=L(this,kr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&L(this,kr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Wf(e);if(typeof n=="string"){const r=L(this,kr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Wf(e);if(typeof n=="string"){const s=(r=L(this,kr).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Wt.batch(()=>{L(this,Ws).forEach(e=>{this.notify({type:"removed",mutation:e})}),L(this,Ws).clear(),L(this,kr).clear()})}getAll(){return Array.from(L(this,Ws))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Xb(n,r))}findAll(e={}){return this.getAll().filter(n=>Xb(e,n))}notify(e){Wt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Wt.batch(()=>Promise.all(e.map(n=>n.continue().catch(mr))))}},Ws=new WeakMap,kr=new WeakMap,Cd=new WeakMap,sC);function Wf(t){var e;return(e=t.options.scope)==null?void 0:e.id}function tT(t){return{onFetch:(e,n)=>{var f,d,h,g,_;const r=e.options,s=(h=(d=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((_=e.state.data)==null?void 0:_.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let E=!1;const x=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(e.signal.aborted?E=!0:e.signal.addEventListener("abort",()=>{E=!0}),e.signal)})},v=Ak(e.options,e.fetchOptions),b=async(T,A,O)=>{if(E)return Promise.reject();if(A==null&&T.pages.length)return Promise.resolve(T);const V={client:e.client,queryKey:e.queryKey,pageParam:A,direction:O?"backward":"forward",meta:e.options.meta};x(V);const C=await v(V),{maxPages:S}=e.options,R=O?gU:mU;return{pages:R(T.pages,C,S),pageParams:R(T.pageParams,A,S)}};if(s&&i.length){const T=s==="backward",A=T?IU:nT,O={pages:i,pageParams:o},V=A(r,O);a=await b(O,V,T)}else{const T=t??i.length;do{const A=l===0?o[0]??r.initialPageParam:nT(r,a);if(l>0&&A==null)break;a=await b(a,A),l++}while(l<T)}return a};e.options.persister?e.fetchFn=()=>{var E,x;return(x=(E=e.options).persister)==null?void 0:x.call(E,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function nT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function IU(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var _t,Hi,qi,Ll,jl,Gi,Vl,Fl,iC,RU=(iC=class{constructor(t={}){_e(this,_t);_e(this,Hi);_e(this,qi);_e(this,Ll);_e(this,jl);_e(this,Gi);_e(this,Vl);_e(this,Fl);oe(this,_t,t.queryCache||new TU),oe(this,Hi,t.mutationCache||new CU),oe(this,qi,t.defaultOptions||{}),oe(this,Ll,new Map),oe(this,jl,new Map),oe(this,Gi,0)}mount(){bf(this,Gi)._++,L(this,Gi)===1&&(oe(this,Vl,$w.subscribe(async t=>{t&&(await this.resumePausedMutations(),L(this,_t).onFocus())})),oe(this,Fl,gp.subscribe(async t=>{t&&(await this.resumePausedMutations(),L(this,_t).onOnline())})))}unmount(){var t,e;bf(this,Gi)._--,L(this,Gi)===0&&((t=L(this,Vl))==null||t.call(this),oe(this,Vl,void 0),(e=L(this,Fl))==null||e.call(this),oe(this,Fl,void 0))}isFetching(t){return L(this,_t).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return L(this,Hi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=L(this,_t).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=L(this,_t).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Tl(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return L(this,_t).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=L(this,_t).get(r.queryHash),i=s==null?void 0:s.state.data,o=hU(e,i);if(o!==void 0)return L(this,_t).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Wt.batch(()=>L(this,_t).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=L(this,_t).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=L(this,_t);Wt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=L(this,_t);return Wt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Wt.batch(()=>L(this,_t).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(mr).catch(mr)}invalidateQueries(t,e={}){return Wt.batch(()=>(L(this,_t).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Wt.batch(()=>L(this,_t).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(mr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(mr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=L(this,_t).build(this,e);return n.isStaleByTime(Tl(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(mr).catch(mr)}fetchInfiniteQuery(t){return t.behavior=tT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(mr).catch(mr)}ensureInfiniteQueryData(t){return t.behavior=tT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return gp.isOnline()?L(this,Hi).resumePausedMutations():Promise.resolve()}getQueryCache(){return L(this,_t)}getMutationCache(){return L(this,Hi)}getDefaultOptions(){return L(this,qi)}setDefaultOptions(t){oe(this,qi,t)}setQueryDefaults(t,e){L(this,Ll).set(wa(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...L(this,Ll).values()],n={};return e.forEach(r=>{Xc(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){L(this,jl).set(wa(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...L(this,jl).values()],n={};return e.forEach(r=>{Xc(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...L(this,qi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Fw(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Uw&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...L(this,qi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){L(this,_t).clear(),L(this,Hi).clear()}},_t=new WeakMap,Hi=new WeakMap,qi=new WeakMap,Ll=new WeakMap,jl=new WeakMap,Gi=new WeakMap,Vl=new WeakMap,Fl=new WeakMap,iC),$n,Ue,Id,Rn,ra,Ul,Ki,Qi,Rd,$l,Bl,sa,ia,Yi,zl,Qe,ic,Iv,Rv,kv,Av,Pv,Nv,Dv,jk,oC,kU=(oC=class extends wu{constructor(e,n){super();_e(this,Qe);_e(this,$n);_e(this,Ue);_e(this,Id);_e(this,Rn);_e(this,ra);_e(this,Ul);_e(this,Ki);_e(this,Qi);_e(this,Rd);_e(this,$l);_e(this,Bl);_e(this,sa);_e(this,ia);_e(this,Yi);_e(this,zl,new Set);this.options=n,oe(this,$n,e),oe(this,Qi,null),oe(this,Ki,Cv()),this.options.experimental_prefetchInRender||L(this,Ki).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(L(this,Ue).addObserver(this),rT(L(this,Ue),this.options)?Ne(this,Qe,ic).call(this):this.updateResult(),Ne(this,Qe,Av).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ov(L(this,Ue),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ov(L(this,Ue),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ne(this,Qe,Pv).call(this),Ne(this,Qe,Nv).call(this),L(this,Ue).removeObserver(this)}setOptions(e){const n=this.options,r=L(this,Ue);if(this.options=L(this,$n).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Nr(this.options.enabled,L(this,Ue))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ne(this,Qe,Dv).call(this),L(this,Ue).setOptions(this.options),n._defaulted&&!mp(this.options,n)&&L(this,$n).getQueryCache().notify({type:"observerOptionsUpdated",query:L(this,Ue),observer:this});const s=this.hasListeners();s&&sT(L(this,Ue),r,this.options,n)&&Ne(this,Qe,ic).call(this),this.updateResult(),s&&(L(this,Ue)!==r||Nr(this.options.enabled,L(this,Ue))!==Nr(n.enabled,L(this,Ue))||Tl(this.options.staleTime,L(this,Ue))!==Tl(n.staleTime,L(this,Ue)))&&Ne(this,Qe,Iv).call(this);const i=Ne(this,Qe,Rv).call(this);s&&(L(this,Ue)!==r||Nr(this.options.enabled,L(this,Ue))!==Nr(n.enabled,L(this,Ue))||i!==L(this,Yi))&&Ne(this,Qe,kv).call(this,i)}getOptimisticResult(e){const n=L(this,$n).getQueryCache().build(L(this,$n),e),r=this.createResult(n,e);return PU(this,r)&&(oe(this,Rn,r),oe(this,Ul,this.options),oe(this,ra,L(this,Ue).state)),r}getCurrentResult(){return L(this,Rn)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){L(this,zl).add(e)}getCurrentQuery(){return L(this,Ue)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=L(this,$n).defaultQueryOptions(e),r=L(this,$n).getQueryCache().build(L(this,$n),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Ne(this,Qe,ic).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),L(this,Rn)))}createResult(e,n){var R;const r=L(this,Ue),s=this.options,i=L(this,Rn),o=L(this,ra),a=L(this,Ul),u=e!==r?e.state:L(this,Id),{state:f}=e;let d={...f},h=!1,g;if(n._optimisticResults){const k=this.hasListeners(),N=!k&&rT(e,n),D=k&&sT(e,r,n,s);(N||D)&&(d={...d,...Mk(f.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:_,errorUpdatedAt:E,status:x}=d;g=d.data;let v=!1;if(n.placeholderData!==void 0&&g===void 0&&x==="pending"){let k;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(k=i.data,v=!0):k=typeof n.placeholderData=="function"?n.placeholderData((R=L(this,Bl))==null?void 0:R.state.data,L(this,Bl)):n.placeholderData,k!==void 0&&(x="success",g=Sv(i==null?void 0:i.data,k,n),h=!0)}if(n.select&&g!==void 0&&!v)if(i&&g===(o==null?void 0:o.data)&&n.select===L(this,Rd))g=L(this,$l);else try{oe(this,Rd,n.select),g=n.select(g),g=Sv(i==null?void 0:i.data,g,n),oe(this,$l,g),oe(this,Qi,null)}catch(k){oe(this,Qi,k)}L(this,Qi)&&(_=L(this,Qi),g=L(this,$l),E=Date.now(),x="error");const b=d.fetchStatus==="fetching",T=x==="pending",A=x==="error",O=T&&b,V=g!==void 0,S={status:x,fetchStatus:d.fetchStatus,isPending:T,isSuccess:x==="success",isError:A,isInitialLoading:O,isLoading:O,data:g,dataUpdatedAt:d.dataUpdatedAt,error:_,errorUpdatedAt:E,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>u.dataUpdateCount||d.errorUpdateCount>u.errorUpdateCount,isFetching:b,isRefetching:b&&!T,isLoadingError:A&&!V,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:A&&V,isStale:Bw(e,n),refetch:this.refetch,promise:L(this,Ki)};if(this.options.experimental_prefetchInRender){const k=P=>{S.status==="error"?P.reject(S.error):S.data!==void 0&&P.resolve(S.data)},N=()=>{const P=oe(this,Ki,S.promise=Cv());k(P)},D=L(this,Ki);switch(D.status){case"pending":e.queryHash===r.queryHash&&k(D);break;case"fulfilled":(S.status==="error"||S.data!==D.value)&&N();break;case"rejected":(S.status!=="error"||S.error!==D.reason)&&N();break}}return S}updateResult(){const e=L(this,Rn),n=this.createResult(L(this,Ue),this.options);if(oe(this,ra,L(this,Ue).state),oe(this,Ul,this.options),L(this,ra).data!==void 0&&oe(this,Bl,L(this,Ue)),mp(n,e))return;oe(this,Rn,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!L(this,zl).size)return!0;const o=new Set(i??L(this,zl));return this.options.throwOnError&&o.add("error"),Object.keys(L(this,Rn)).some(a=>{const l=a;return L(this,Rn)[l]!==e[l]&&o.has(l)})};Ne(this,Qe,jk).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ne(this,Qe,Av).call(this)}},$n=new WeakMap,Ue=new WeakMap,Id=new WeakMap,Rn=new WeakMap,ra=new WeakMap,Ul=new WeakMap,Ki=new WeakMap,Qi=new WeakMap,Rd=new WeakMap,$l=new WeakMap,Bl=new WeakMap,sa=new WeakMap,ia=new WeakMap,Yi=new WeakMap,zl=new WeakMap,Qe=new WeakSet,ic=function(e){Ne(this,Qe,Dv).call(this);let n=L(this,Ue).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(mr)),n},Iv=function(){Ne(this,Qe,Pv).call(this);const e=Tl(this.options.staleTime,L(this,Ue));if(_a||L(this,Rn).isStale||!bv(e))return;const r=Rk(L(this,Rn).dataUpdatedAt,e)+1;oe(this,sa,setTimeout(()=>{L(this,Rn).isStale||this.updateResult()},r))},Rv=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(L(this,Ue)):this.options.refetchInterval)??!1},kv=function(e){Ne(this,Qe,Nv).call(this),oe(this,Yi,e),!(_a||Nr(this.options.enabled,L(this,Ue))===!1||!bv(L(this,Yi))||L(this,Yi)===0)&&oe(this,ia,setInterval(()=>{(this.options.refetchIntervalInBackground||$w.isFocused())&&Ne(this,Qe,ic).call(this)},L(this,Yi)))},Av=function(){Ne(this,Qe,Iv).call(this),Ne(this,Qe,kv).call(this,Ne(this,Qe,Rv).call(this))},Pv=function(){L(this,sa)&&(clearTimeout(L(this,sa)),oe(this,sa,void 0))},Nv=function(){L(this,ia)&&(clearInterval(L(this,ia)),oe(this,ia,void 0))},Dv=function(){const e=L(this,$n).getQueryCache().build(L(this,$n),this.options);if(e===L(this,Ue))return;const n=L(this,Ue);oe(this,Ue,e),oe(this,Id,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},jk=function(e){Wt.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(L(this,Rn))}),L(this,$n).getQueryCache().notify({query:L(this,Ue),type:"observerResultsUpdated"})})},oC);function AU(t,e){return Nr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function rT(t,e){return AU(t,e)||t.state.data!==void 0&&Ov(t,e,e.refetchOnMount)}function Ov(t,e,n){if(Nr(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Bw(t,e)}return!1}function sT(t,e,n,r){return(t!==e||Nr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Bw(t,n)}function Bw(t,e){return Nr(e.enabled,t)!==!1&&t.isStaleByTime(Tl(e.staleTime,t))}function PU(t,e){return!mp(t.getCurrentResult(),e)}var Zi,Xi,Bn,Hs,ri,Sh,Mv,aC,NU=(aC=class extends wu{constructor(n,r){super();_e(this,ri);_e(this,Zi);_e(this,Xi);_e(this,Bn);_e(this,Hs);oe(this,Zi,n),this.setOptions(r),this.bindMethods(),Ne(this,ri,Sh).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=L(this,Zi).defaultMutationOptions(n),mp(this.options,r)||L(this,Zi).getMutationCache().notify({type:"observerOptionsUpdated",mutation:L(this,Bn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&wa(r.mutationKey)!==wa(this.options.mutationKey)?this.reset():((s=L(this,Bn))==null?void 0:s.state.status)==="pending"&&L(this,Bn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=L(this,Bn))==null||n.removeObserver(this)}onMutationUpdate(n){Ne(this,ri,Sh).call(this),Ne(this,ri,Mv).call(this,n)}getCurrentResult(){return L(this,Xi)}reset(){var n;(n=L(this,Bn))==null||n.removeObserver(this),oe(this,Bn,void 0),Ne(this,ri,Sh).call(this),Ne(this,ri,Mv).call(this)}mutate(n,r){var s;return oe(this,Hs,r),(s=L(this,Bn))==null||s.removeObserver(this),oe(this,Bn,L(this,Zi).getMutationCache().build(L(this,Zi),this.options)),L(this,Bn).addObserver(this),L(this,Bn).execute(n)}},Zi=new WeakMap,Xi=new WeakMap,Bn=new WeakMap,Hs=new WeakMap,ri=new WeakSet,Sh=function(){var r;const n=((r=L(this,Bn))==null?void 0:r.state)??Lk();oe(this,Xi,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Mv=function(n){Wt.batch(()=>{var r,s,i,o,a,l,u,f;if(L(this,Hs)&&this.hasListeners()){const d=L(this,Xi).variables,h=L(this,Xi).context;(n==null?void 0:n.type)==="success"?((s=(r=L(this,Hs)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=L(this,Hs)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((l=(a=L(this,Hs)).onError)==null||l.call(a,n.error,d,h),(f=(u=L(this,Hs)).onSettled)==null||f.call(u,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(L(this,Xi))})})},aC),Vk=y.createContext(void 0),gm=t=>{const e=y.useContext(Vk);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},DU=({client:t,children:e})=>(y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx(Vk.Provider,{value:t,children:e})),Fk=y.createContext(!1),OU=()=>y.useContext(Fk);Fk.Provider;function MU(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var LU=y.createContext(MU()),jU=()=>y.useContext(LU);function Uk(t,e){return typeof t=="function"?t(...e):!!t}function Lv(){}var VU=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},FU=t=>{y.useEffect(()=>{t.clearReset()},[t])},UU=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||Uk(n,[t.error,r])),$U=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...n)=>Math.max(e(...n),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},BU=(t,e)=>t.isLoading&&t.isFetching&&!e,zU=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,iT=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function WU(t,e,n){var d,h,g,_,E;const r=gm(),s=OU(),i=jU(),o=r.defaultQueryOptions(t);(h=(d=r.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=s?"isRestoring":"optimistic",$U(o),VU(o,i),FU(i);const a=!r.getQueryCache().get(o.queryHash),[l]=y.useState(()=>new e(r,o)),u=l.getOptimisticResult(o),f=!s&&t.subscribed!==!1;if(y.useSyncExternalStore(y.useCallback(x=>{const v=f?l.subscribe(Wt.batchCalls(x)):Lv;return l.updateResult(),v},[l,f]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),y.useEffect(()=>{l.setOptions(o)},[o,l]),zU(o,u))throw iT(o,l,i);if(UU({result:u,errorResetBoundary:i,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((_=(g=r.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||_.call(g,o,u),o.experimental_prefetchInRender&&!_a&&BU(u,s)){const x=a?iT(o,l,i):(E=r.getQueryCache().get(o.queryHash))==null?void 0:E.promise;x==null||x.catch(Lv).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?u:l.trackResult(u)}function $k(t,e){return WU(t,kU)}function Tc(t,e){const n=gm(),[r]=y.useState(()=>new NU(n,t));y.useEffect(()=>{r.setOptions(t)},[r,t]);const s=y.useSyncExternalStore(y.useCallback(o=>r.subscribe(Wt.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=y.useCallback((o,a)=>{r.mutate(o,a).catch(Lv)},[r]);if(s.error&&Uk(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}var oT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ua,Bk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function R(){}R.prototype=S.prototype,C.D=S.prototype,C.prototype=new R,C.prototype.constructor=C,C.C=function(k,N,D){for(var P=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)P[ce-2]=arguments[ce];return S.prototype[N].apply(k,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,S,R){R||(R=0);var k=Array(16);if(typeof S=="string")for(var N=0;16>N;++N)k[N]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(N=0;16>N;++N)k[N]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=C.g[0],R=C.g[1],N=C.g[2];var D=C.g[3],P=S+(D^R&(N^D))+k[0]+3614090360&4294967295;S=R+(P<<7&4294967295|P>>>25),P=D+(N^S&(R^N))+k[1]+3905402710&4294967295,D=S+(P<<12&4294967295|P>>>20),P=N+(R^D&(S^R))+k[2]+606105819&4294967295,N=D+(P<<17&4294967295|P>>>15),P=R+(S^N&(D^S))+k[3]+3250441966&4294967295,R=N+(P<<22&4294967295|P>>>10),P=S+(D^R&(N^D))+k[4]+4118548399&4294967295,S=R+(P<<7&4294967295|P>>>25),P=D+(N^S&(R^N))+k[5]+1200080426&4294967295,D=S+(P<<12&4294967295|P>>>20),P=N+(R^D&(S^R))+k[6]+2821735955&4294967295,N=D+(P<<17&4294967295|P>>>15),P=R+(S^N&(D^S))+k[7]+4249261313&4294967295,R=N+(P<<22&4294967295|P>>>10),P=S+(D^R&(N^D))+k[8]+1770035416&4294967295,S=R+(P<<7&4294967295|P>>>25),P=D+(N^S&(R^N))+k[9]+2336552879&4294967295,D=S+(P<<12&4294967295|P>>>20),P=N+(R^D&(S^R))+k[10]+4294925233&4294967295,N=D+(P<<17&4294967295|P>>>15),P=R+(S^N&(D^S))+k[11]+2304563134&4294967295,R=N+(P<<22&4294967295|P>>>10),P=S+(D^R&(N^D))+k[12]+1804603682&4294967295,S=R+(P<<7&4294967295|P>>>25),P=D+(N^S&(R^N))+k[13]+4254626195&4294967295,D=S+(P<<12&4294967295|P>>>20),P=N+(R^D&(S^R))+k[14]+2792965006&4294967295,N=D+(P<<17&4294967295|P>>>15),P=R+(S^N&(D^S))+k[15]+1236535329&4294967295,R=N+(P<<22&4294967295|P>>>10),P=S+(N^D&(R^N))+k[1]+4129170786&4294967295,S=R+(P<<5&4294967295|P>>>27),P=D+(R^N&(S^R))+k[6]+3225465664&4294967295,D=S+(P<<9&4294967295|P>>>23),P=N+(S^R&(D^S))+k[11]+643717713&4294967295,N=D+(P<<14&4294967295|P>>>18),P=R+(D^S&(N^D))+k[0]+3921069994&4294967295,R=N+(P<<20&4294967295|P>>>12),P=S+(N^D&(R^N))+k[5]+3593408605&4294967295,S=R+(P<<5&4294967295|P>>>27),P=D+(R^N&(S^R))+k[10]+38016083&4294967295,D=S+(P<<9&4294967295|P>>>23),P=N+(S^R&(D^S))+k[15]+3634488961&4294967295,N=D+(P<<14&4294967295|P>>>18),P=R+(D^S&(N^D))+k[4]+3889429448&4294967295,R=N+(P<<20&4294967295|P>>>12),P=S+(N^D&(R^N))+k[9]+568446438&4294967295,S=R+(P<<5&4294967295|P>>>27),P=D+(R^N&(S^R))+k[14]+3275163606&4294967295,D=S+(P<<9&4294967295|P>>>23),P=N+(S^R&(D^S))+k[3]+4107603335&4294967295,N=D+(P<<14&4294967295|P>>>18),P=R+(D^S&(N^D))+k[8]+1163531501&4294967295,R=N+(P<<20&4294967295|P>>>12),P=S+(N^D&(R^N))+k[13]+2850285829&4294967295,S=R+(P<<5&4294967295|P>>>27),P=D+(R^N&(S^R))+k[2]+4243563512&4294967295,D=S+(P<<9&4294967295|P>>>23),P=N+(S^R&(D^S))+k[7]+1735328473&4294967295,N=D+(P<<14&4294967295|P>>>18),P=R+(D^S&(N^D))+k[12]+2368359562&4294967295,R=N+(P<<20&4294967295|P>>>12),P=S+(R^N^D)+k[5]+4294588738&4294967295,S=R+(P<<4&4294967295|P>>>28),P=D+(S^R^N)+k[8]+2272392833&4294967295,D=S+(P<<11&4294967295|P>>>21),P=N+(D^S^R)+k[11]+1839030562&4294967295,N=D+(P<<16&4294967295|P>>>16),P=R+(N^D^S)+k[14]+4259657740&4294967295,R=N+(P<<23&4294967295|P>>>9),P=S+(R^N^D)+k[1]+2763975236&4294967295,S=R+(P<<4&4294967295|P>>>28),P=D+(S^R^N)+k[4]+1272893353&4294967295,D=S+(P<<11&4294967295|P>>>21),P=N+(D^S^R)+k[7]+4139469664&4294967295,N=D+(P<<16&4294967295|P>>>16),P=R+(N^D^S)+k[10]+3200236656&4294967295,R=N+(P<<23&4294967295|P>>>9),P=S+(R^N^D)+k[13]+681279174&4294967295,S=R+(P<<4&4294967295|P>>>28),P=D+(S^R^N)+k[0]+3936430074&4294967295,D=S+(P<<11&4294967295|P>>>21),P=N+(D^S^R)+k[3]+3572445317&4294967295,N=D+(P<<16&4294967295|P>>>16),P=R+(N^D^S)+k[6]+76029189&4294967295,R=N+(P<<23&4294967295|P>>>9),P=S+(R^N^D)+k[9]+3654602809&4294967295,S=R+(P<<4&4294967295|P>>>28),P=D+(S^R^N)+k[12]+3873151461&4294967295,D=S+(P<<11&4294967295|P>>>21),P=N+(D^S^R)+k[15]+530742520&4294967295,N=D+(P<<16&4294967295|P>>>16),P=R+(N^D^S)+k[2]+3299628645&4294967295,R=N+(P<<23&4294967295|P>>>9),P=S+(N^(R|~D))+k[0]+4096336452&4294967295,S=R+(P<<6&4294967295|P>>>26),P=D+(R^(S|~N))+k[7]+1126891415&4294967295,D=S+(P<<10&4294967295|P>>>22),P=N+(S^(D|~R))+k[14]+2878612391&4294967295,N=D+(P<<15&4294967295|P>>>17),P=R+(D^(N|~S))+k[5]+4237533241&4294967295,R=N+(P<<21&4294967295|P>>>11),P=S+(N^(R|~D))+k[12]+1700485571&4294967295,S=R+(P<<6&4294967295|P>>>26),P=D+(R^(S|~N))+k[3]+2399980690&4294967295,D=S+(P<<10&4294967295|P>>>22),P=N+(S^(D|~R))+k[10]+4293915773&4294967295,N=D+(P<<15&4294967295|P>>>17),P=R+(D^(N|~S))+k[1]+2240044497&4294967295,R=N+(P<<21&4294967295|P>>>11),P=S+(N^(R|~D))+k[8]+1873313359&4294967295,S=R+(P<<6&4294967295|P>>>26),P=D+(R^(S|~N))+k[15]+4264355552&4294967295,D=S+(P<<10&4294967295|P>>>22),P=N+(S^(D|~R))+k[6]+2734768916&4294967295,N=D+(P<<15&4294967295|P>>>17),P=R+(D^(N|~S))+k[13]+1309151649&4294967295,R=N+(P<<21&4294967295|P>>>11),P=S+(N^(R|~D))+k[4]+4149444226&4294967295,S=R+(P<<6&4294967295|P>>>26),P=D+(R^(S|~N))+k[11]+3174756917&4294967295,D=S+(P<<10&4294967295|P>>>22),P=N+(S^(D|~R))+k[2]+718787259&4294967295,N=D+(P<<15&4294967295|P>>>17),P=R+(D^(N|~S))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,C.g[2]=C.g[2]+N&4294967295,C.g[3]=C.g[3]+D&4294967295}r.prototype.u=function(C,S){S===void 0&&(S=C.length);for(var R=S-this.blockSize,k=this.B,N=this.h,D=0;D<S;){if(N==0)for(;D<=R;)s(this,C,D),D+=this.blockSize;if(typeof C=="string"){for(;D<S;)if(k[N++]=C.charCodeAt(D++),N==this.blockSize){s(this,k),N=0;break}}else for(;D<S;)if(k[N++]=C[D++],N==this.blockSize){s(this,k),N=0;break}}this.h=N,this.o+=S},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;var R=8*this.o;for(S=C.length-8;S<C.length;++S)C[S]=R&255,R/=256;for(this.u(C),C=Array(16),S=R=0;4>S;++S)for(var k=0;32>k;k+=8)C[R++]=this.g[S]>>>k&255;return C};function i(C,S){var R=a;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=S(C)}function o(C,S){this.h=S;for(var R=[],k=!0,N=C.length-1;0<=N;N--){var D=C[N]|0;k&&D==S||(R[N]=D,k=!1)}this.g=R}var a={};function l(C){return-128<=C&&128>C?i(C,function(S){return new o([S|0],0>S?-1:0)}):new o([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return d;if(0>C)return x(u(-C));for(var S=[],R=1,k=0;C>=R;k++)S[k]=C/R|0,R*=4294967296;return new o(S,0)}function f(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return x(f(C.substring(1),S));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=u(Math.pow(S,8)),k=d,N=0;N<C.length;N+=8){var D=Math.min(8,C.length-N),P=parseInt(C.substring(N,N+D),S);8>D?(D=u(Math.pow(S,D)),k=k.j(D).add(u(P))):(k=k.j(R),k=k.add(u(P)))}return k}var d=l(0),h=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-x(this).m();for(var C=0,S=1,R=0;R<this.g.length;R++){var k=this.i(R);C+=(0<=k?k:4294967296+k)*S,S*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(_(this))return"0";if(E(this))return"-"+x(this).toString(C);for(var S=u(Math.pow(C,6)),R=this,k="";;){var N=A(R,S).g;R=v(R,N.j(S));var D=((0<R.g.length?R.g[0]:R.h)>>>0).toString(C);if(R=N,_(R))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function _(C){if(C.h!=0)return!1;for(var S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function E(C){return C.h==-1}t.l=function(C){return C=v(this,C),E(C)?-1:_(C)?0:1};function x(C){for(var S=C.g.length,R=[],k=0;k<S;k++)R[k]=~C.g[k];return new o(R,~C.h).add(h)}t.abs=function(){return E(this)?x(this):this},t.add=function(C){for(var S=Math.max(this.g.length,C.g.length),R=[],k=0,N=0;N<=S;N++){var D=k+(this.i(N)&65535)+(C.i(N)&65535),P=(D>>>16)+(this.i(N)>>>16)+(C.i(N)>>>16);k=P>>>16,D&=65535,P&=65535,R[N]=P<<16|D}return new o(R,R[R.length-1]&-2147483648?-1:0)};function v(C,S){return C.add(x(S))}t.j=function(C){if(_(this)||_(C))return d;if(E(this))return E(C)?x(this).j(x(C)):x(x(this).j(C));if(E(C))return x(this.j(x(C)));if(0>this.l(g)&&0>C.l(g))return u(this.m()*C.m());for(var S=this.g.length+C.g.length,R=[],k=0;k<2*S;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<C.g.length;N++){var D=this.i(k)>>>16,P=this.i(k)&65535,ce=C.i(N)>>>16,pe=C.i(N)&65535;R[2*k+2*N]+=P*pe,b(R,2*k+2*N),R[2*k+2*N+1]+=D*pe,b(R,2*k+2*N+1),R[2*k+2*N+1]+=P*ce,b(R,2*k+2*N+1),R[2*k+2*N+2]+=D*ce,b(R,2*k+2*N+2)}for(k=0;k<S;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=S;k<2*S;k++)R[k]=0;return new o(R,0)};function b(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function T(C,S){this.g=C,this.h=S}function A(C,S){if(_(S))throw Error("division by zero");if(_(C))return new T(d,d);if(E(C))return S=A(x(C),S),new T(x(S.g),x(S.h));if(E(S))return S=A(C,x(S)),new T(x(S.g),S.h);if(30<C.g.length){if(E(C)||E(S))throw Error("slowDivide_ only works with positive integers.");for(var R=h,k=S;0>=k.l(C);)R=O(R),k=O(k);var N=V(R,1),D=V(k,1);for(k=V(k,2),R=V(R,2);!_(k);){var P=D.add(k);0>=P.l(C)&&(N=N.add(R),D=P),k=V(k,1),R=V(R,1)}return S=v(C,N.j(S)),new T(N,S)}for(N=d;0<=C.l(S);){for(R=Math.max(1,Math.floor(C.m()/S.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=u(R),P=D.j(S);E(P)||0<P.l(C);)R-=k,D=u(R),P=D.j(S);_(D)&&(D=h),N=N.add(D),C=v(C,P)}return new T(N,C)}t.A=function(C){return A(this,C).h},t.and=function(C){for(var S=Math.max(this.g.length,C.g.length),R=[],k=0;k<S;k++)R[k]=this.i(k)&C.i(k);return new o(R,this.h&C.h)},t.or=function(C){for(var S=Math.max(this.g.length,C.g.length),R=[],k=0;k<S;k++)R[k]=this.i(k)|C.i(k);return new o(R,this.h|C.h)},t.xor=function(C){for(var S=Math.max(this.g.length,C.g.length),R=[],k=0;k<S;k++)R[k]=this.i(k)^C.i(k);return new o(R,this.h^C.h)};function O(C){for(var S=C.g.length+1,R=[],k=0;k<S;k++)R[k]=C.i(k)<<1|C.i(k-1)>>>31;return new o(R,C.h)}function V(C,S){var R=S>>5;S%=32;for(var k=C.g.length-R,N=[],D=0;D<k;D++)N[D]=0<S?C.i(D+R)>>>S|C.i(D+R+1)<<32-S:C.i(D+R);return new o(N,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Bk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,ua=o}).apply(typeof oT<"u"?oT:typeof self<"u"?self:typeof window<"u"?window:{});var Hf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zk,oc,Wk,Ch,jv,Hk,qk,Gk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,w){return c==Array.prototype||c==Object.prototype||(c[m]=w.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hf=="object"&&Hf];for(var m=0;m<c.length;++m){var w=c[m];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function s(c,m){if(m)e:{var w=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var F=c[I];if(!(F in w))break e;w=w[F]}c=c[c.length-1],I=w[c],m=m(I),m!=I&&m!=null&&e(w,c,{configurable:!0,writable:!0,value:m})}}function i(c,m){c instanceof String&&(c+="");var w=0,I=!1,F={next:function(){if(!I&&w<c.length){var $=w++;return{value:m($,c[$]),done:!1}}return I=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}s("Array.prototype.values",function(c){return c||function(){return i(this,function(m,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function u(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function f(c,m,w){return c.call.apply(c.bind,arguments)}function d(c,m,w){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,I),c.apply(m,F)}}return function(){return c.apply(m,arguments)}}function h(c,m,w){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:d,h.apply(null,arguments)}function g(c,m){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function _(c,m){function w(){}w.prototype=m.prototype,c.aa=m.prototype,c.prototype=new w,c.prototype.constructor=c,c.Qb=function(I,F,$){for(var J=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)J[tt-2]=arguments[tt];return m.prototype[F].apply(I,J)}}function E(c){const m=c.length;if(0<m){const w=Array(m);for(let I=0;I<m;I++)w[I]=c[I];return w}return[]}function x(c,m){for(let w=1;w<arguments.length;w++){const I=arguments[w];if(l(I)){const F=c.length||0,$=I.length||0;c.length=F+$;for(let J=0;J<$;J++)c[F+J]=I[J]}else c.push(I)}}class v{constructor(m,w){this.i=m,this.j=w,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function b(c){return/^[\s\xa0]*$/.test(c)}function T(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function A(c){return A[" "](c),c}A[" "]=function(){};var O=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function V(c,m,w){for(const I in c)m.call(w,c[I],I,c)}function C(c,m){for(const w in c)m.call(void 0,c[w],w,c)}function S(c){const m={};for(const w in c)m[w]=c[w];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(c,m){let w,I;for(let F=1;F<arguments.length;F++){I=arguments[F];for(w in I)c[w]=I[w];for(let $=0;$<R.length;$++)w=R[$],Object.prototype.hasOwnProperty.call(I,w)&&(c[w]=I[w])}}function N(c){var m=1;c=c.split(":");const w=[];for(;0<m&&c.length;)w.push(c.shift()),m--;return c.length&&w.push(c.join(":")),w}function D(c){a.setTimeout(()=>{throw c},0)}function P(){var c=B;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class ce{constructor(){this.h=this.g=null}add(m,w){const I=pe.get();I.set(m,w),this.h?this.h.next=I:this.g=I,this.h=I}}var pe=new v(()=>new Z,c=>c.reset());class Z{constructor(){this.next=this.g=this.h=null}set(m,w){this.h=m,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,j=!1,B=new ce,X=()=>{const c=a.Promise.resolve(void 0);ge=()=>{c.then(te)}};var te=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(w){D(w)}var m=pe;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}j=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var Ie=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};a.addEventListener("test",w,m),a.removeEventListener("test",w,m)}catch{}return c}();function Ge(c,m){if(se.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var w=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(O){e:{try{A(m.nodeName);var F=!0;break e}catch{}F=!1}F||(m=null)}}else w=="mouseover"?m=c.fromElement:w=="mouseout"&&(m=c.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ce[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ge.aa.h.call(this)}}_(Ge,se);var Ce={2:"touch",3:"pen",4:"mouse"};Ge.prototype.h=function(){Ge.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Ft=0;function Ye(c,m,w,I,F){this.listener=c,this.proxy=null,this.src=m,this.type=w,this.capture=!!I,this.ha=F,this.key=++Ft,this.da=this.fa=!1}function ut(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Zt(c){this.src=c,this.g={},this.h=0}Zt.prototype.add=function(c,m,w,I,F){var $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);var J=Xn(c,m,I,F);return-1<J?(m=c[J],w||(m.fa=!1)):(m=new Ye(m,this.src,$,!!I,F),m.fa=w,c.push(m)),m};function Xt(c,m){var w=m.type;if(w in c.g){var I=c.g[w],F=Array.prototype.indexOf.call(I,m,void 0),$;($=0<=F)&&Array.prototype.splice.call(I,F,1),$&&(ut(m),c.g[w].length==0&&(delete c.g[w],c.h--))}}function Xn(c,m,w,I){for(var F=0;F<c.length;++F){var $=c[F];if(!$.da&&$.listener==m&&$.capture==!!w&&$.ha==I)return F}return-1}var Jn="closure_lm_"+(1e6*Math.random()|0),Ns={};function Jr(c,m,w,I,F){if(Array.isArray(m)){for(var $=0;$<m.length;$++)Jr(c,m[$],w,I,F);return null}return w=re(w),c&&c[be]?c.K(m,w,u(I)?!!I.capture:!1,F):hr(c,m,w,!1,I,F)}function hr(c,m,w,I,F,$){if(!m)throw Error("Invalid event type");var J=u(F)?!!F.capture:!!F,tt=U(c);if(tt||(c[Jn]=tt=new Zt(c)),w=tt.add(m,w,I,J,$),w.proxy)return w;if(I=_i(),w.proxy=I,I.src=c,I.listener=w,c.addEventListener)Ie||(F=J),F===void 0&&(F=!1),c.addEventListener(m.toString(),I,F);else if(c.attachEvent)c.attachEvent(Oo(m.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function _i(){function c(w){return m.call(c.src,c.listener,w)}const m=M;return c}function Ut(c,m,w,I,F){if(Array.isArray(m))for(var $=0;$<m.length;$++)Ut(c,m[$],w,I,F);else I=u(I)?!!I.capture:!!I,w=re(w),c&&c[be]?(c=c.i,m=String(m).toString(),m in c.g&&($=c.g[m],w=Xn($,w,I,F),-1<w&&(ut($[w]),Array.prototype.splice.call($,w,1),$.length==0&&(delete c.g[m],c.h--)))):c&&(c=U(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Xn(m,w,I,F)),(w=-1<c?m[c]:null)&&Ua(w))}function Ua(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[be])Xt(m.i,c);else{var w=c.type,I=c.proxy;m.removeEventListener?m.removeEventListener(w,I,c.capture):m.detachEvent?m.detachEvent(Oo(w),I):m.addListener&&m.removeListener&&m.removeListener(I),(w=U(m))?(Xt(w,c),w.h==0&&(w.src=null,m[Jn]=null)):ut(c)}}}function Oo(c){return c in Ns?Ns[c]:Ns[c]="on"+c}function M(c,m){if(c.da)c=!0;else{m=new Ge(m,this);var w=c.listener,I=c.ha||c.src;c.fa&&Ua(c),c=w.call(I,m)}return c}function U(c){return c=c[Jn],c instanceof Zt?c:null}var z="__closure_events_fn_"+(1e9*Math.random()>>>0);function re(c){return typeof c=="function"?c:(c[z]||(c[z]=function(m){return c.handleEvent(m)}),c[z])}function K(){le.call(this),this.i=new Zt(this),this.M=this,this.F=null}_(K,le),K.prototype[be]=!0,K.prototype.removeEventListener=function(c,m,w,I){Ut(this,c,m,w,I)};function H(c,m){var w,I=c.F;if(I)for(w=[];I;I=I.F)w.push(I);if(c=c.M,I=m.type||m,typeof m=="string")m=new se(m,c);else if(m instanceof se)m.target=m.target||c;else{var F=m;m=new se(I,c),k(m,F)}if(F=!0,w)for(var $=w.length-1;0<=$;$--){var J=m.g=w[$];F=ie(J,I,!0,m)&&F}if(J=m.g=c,F=ie(J,I,!0,m)&&F,F=ie(J,I,!1,m)&&F,w)for($=0;$<w.length;$++)J=m.g=w[$],F=ie(J,I,!1,m)&&F}K.prototype.N=function(){if(K.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var w=c.g[m],I=0;I<w.length;I++)ut(w[I]);delete c.g[m],c.h--}}this.F=null},K.prototype.K=function(c,m,w,I){return this.i.add(String(c),m,!1,w,I)},K.prototype.L=function(c,m,w,I){return this.i.add(String(c),m,!0,w,I)};function ie(c,m,w,I){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var F=!0,$=0;$<m.length;++$){var J=m[$];if(J&&!J.da&&J.capture==w){var tt=J.listener,tn=J.ha||J.src;J.fa&&Xt(c.i,J),F=tt.call(tn,I)!==!1&&F}}return F&&!I.defaultPrevented}function Me(c,m,w){if(typeof c=="function")w&&(c=h(c,w));else if(c&&typeof c.handleEvent=="function")c=h(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(c,m||0)}function Ke(c){c.g=Me(()=>{c.g=null,c.i&&(c.i=!1,Ke(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class bt extends le{constructor(m,w){super(),this.m=m,this.l=w,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ke(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Un(c){le.call(this),this.h=c,this.g={}}_(Un,le);var wi=[];function xi(c){V(c.g,function(m,w){this.g.hasOwnProperty(w)&&Ua(m)},c),c.g={}}Un.prototype.N=function(){Un.aa.N.call(this),xi(this)},Un.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ei=a.JSON.stringify,Mo=a.JSON.parse,ku=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function es(){}es.prototype.h=null;function br(c){return c.h||(c.h=c.i())}function af(){}var Lo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $a(){se.call(this,"d")}_($a,se);function Ba(){se.call(this,"c")}_(Ba,se);var xe={},Tt=null;function St(){return Tt=Tt||new K}xe.La="serverreachability";function cn(c){se.call(this,xe.La,c)}_(cn,se);function ts(c){const m=St();H(m,new cn(m))}xe.STAT_EVENT="statevent";function Nt(c,m){se.call(this,xe.STAT_EVENT,c),this.stat=m}_(Nt,se);function Je(c){const m=St();H(m,new Nt(m,c))}xe.Ma="timingevent";function jo(c,m){se.call(this,xe.Ma,c),this.size=m}_(jo,se);function Jt(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},m)}function en(){this.g=!0}en.prototype.xa=function(){this.g=!1};function lf(c,m,w,I,F,$){c.info(function(){if(c.g)if($)for(var J="",tt=$.split("&"),tn=0;tn<tt.length;tn++){var He=tt[tn].split("=");if(1<He.length){var dn=He[0];He=He[1];var fn=dn.split("_");J=2<=fn.length&&fn[1]=="type"?J+(dn+"="+He+"&"):J+(dn+"=redacted&")}}else J=null;else J=$;return"XMLHTTP REQ ("+I+") [attempt "+F+"]: "+m+`
`+w+`
`+J})}function Ds(c,m,w,I,F,$,J){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+F+"]: "+m+`
`+w+`
`+$+" "+J})}function Vo(c,m,w,I){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+jD(c,w)+(I?" "+I:"")})}function LD(c,m){c.info(function(){return"TIMEOUT: "+m})}en.prototype.info=function(){};function jD(c,m){if(!c.g)return m;if(!m)return null;try{var w=JSON.parse(m);if(w){for(c=0;c<w.length;c++)if(Array.isArray(w[c])){var I=w[c];if(!(2>I.length)){var F=I[1];if(Array.isArray(F)&&!(1>F.length)){var $=F[0];if($!="noop"&&$!="stop"&&$!="close")for(var J=1;J<F.length;J++)F[J]=""}}}}return Ei(w)}catch{return m}}var uf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wx={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xm;function cf(){}_(cf,es),cf.prototype.g=function(){return new XMLHttpRequest},cf.prototype.i=function(){return{}},Xm=new cf;function bi(c,m,w,I){this.j=c,this.i=m,this.l=w,this.R=I||1,this.U=new Un(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xx}function xx(){this.i=null,this.g="",this.h=!1}var Ex={},Jm={};function eg(c,m,w){c.L=1,c.v=pf(Os(m)),c.m=w,c.P=!0,bx(c,null)}function bx(c,m){c.F=Date.now(),df(c),c.A=Os(c.v);var w=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),jx(w.i,"t",I),c.C=0,w=c.j.J,c.h=new xx,c.g=tE(c.j,w?m:null,!c.m),0<c.O&&(c.M=new bt(h(c.Y,c,c.g),c.O)),m=c.U,w=c.g,I=c.ca;var F="readystatechange";Array.isArray(F)||(F&&(wi[0]=F.toString()),F=wi);for(var $=0;$<F.length;$++){var J=Jr(w,F[$],I||m.handleEvent,!1,m.h||m);if(!J)break;m.g[J.key]=J}m=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),ts(),lf(c.i,c.u,c.A,c.l,c.R,c.m)}bi.prototype.ca=function(c){c=c.target;const m=this.M;m&&Ms(c)==3?m.j():this.Y(c)},bi.prototype.Y=function(c){try{if(c==this.g)e:{const fn=Ms(this.g);var m=this.g.Ba();const Ha=this.g.Z();if(!(3>fn)&&(fn!=3||this.g&&(this.h.h||this.g.oa()||Wx(this.g)))){this.J||fn!=4||m==7||(m==8||0>=Ha?ts(3):ts(2)),tg(this);var w=this.g.Z();this.X=w;t:if(Tx(this)){var I=Wx(this.g);c="";var F=I.length,$=Ms(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fo(this),Au(this);var J="";break t}this.h.i=new a.TextDecoder}for(m=0;m<F;m++)this.h.h=!0,c+=this.h.i.decode(I[m],{stream:!($&&m==F-1)});I.length=0,this.h.g+=c,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=w==200,Ds(this.i,this.u,this.A,this.l,this.R,fn,w),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,tn=this.g;if((tt=tn.g?tn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(tt)){var He=tt;break t}}He=null}if(w=He)Vo(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ng(this,w);else{this.o=!1,this.s=3,Je(12),Fo(this),Au(this);break e}}if(this.P){w=!0;let Tr;for(;!this.J&&this.C<J.length;)if(Tr=VD(this,J),Tr==Jm){fn==4&&(this.s=4,Je(14),w=!1),Vo(this.i,this.l,null,"[Incomplete Response]");break}else if(Tr==Ex){this.s=4,Je(15),Vo(this.i,this.l,J,"[Invalid Chunk]"),w=!1;break}else Vo(this.i,this.l,Tr,null),ng(this,Tr);if(Tx(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),fn!=4||J.length!=0||this.h.h||(this.s=1,Je(16),w=!1),this.o=this.o&&w,!w)Vo(this.i,this.l,J,"[Invalid Chunked Response]"),Fo(this),Au(this);else if(0<J.length&&!this.W){this.W=!0;var dn=this.j;dn.g==this&&dn.ba&&!dn.M&&(dn.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),lg(dn),dn.M=!0,Je(11))}}else Vo(this.i,this.l,J,null),ng(this,J);fn==4&&Fo(this),this.o&&!this.J&&(fn==4?Zx(this.j,this):(this.o=!1,df(this)))}else tO(this.g),w==400&&0<J.indexOf("Unknown SID")?(this.s=3,Je(12)):(this.s=0,Je(13)),Fo(this),Au(this)}}}catch{}finally{}};function Tx(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function VD(c,m){var w=c.C,I=m.indexOf(`
`,w);return I==-1?Jm:(w=Number(m.substring(w,I)),isNaN(w)?Ex:(I+=1,I+w>m.length?Jm:(m=m.slice(I,I+w),c.C=I+w,m)))}bi.prototype.cancel=function(){this.J=!0,Fo(this)};function df(c){c.S=Date.now()+c.I,Sx(c,c.I)}function Sx(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Jt(h(c.ba,c),m)}function tg(c){c.B&&(a.clearTimeout(c.B),c.B=null)}bi.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(LD(this.i,this.A),this.L!=2&&(ts(),Je(17)),Fo(this),this.s=2,Au(this)):Sx(this,this.S-c)};function Au(c){c.j.G==0||c.J||Zx(c.j,c)}function Fo(c){tg(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,xi(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function ng(c,m){try{var w=c.j;if(w.G!=0&&(w.g==c||rg(w.h,c))){if(!c.K&&rg(w.h,c)&&w.G==3){try{var I=w.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var F=I;if(F[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<c.F)wf(w),vf(w);else break e;ag(w),Je(18)}}else w.za=F[1],0<w.za-w.T&&37500>F[2]&&w.F&&w.v==0&&!w.C&&(w.C=Jt(h(w.Za,w),6e3));if(1>=Rx(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else $o(w,11)}else if((c.K||w.g==c)&&wf(w),!b(m))for(F=w.Da.g.parse(m),m=0;m<F.length;m++){let He=F[m];if(w.T=He[0],He=He[1],w.G==2)if(He[0]=="c"){w.K=He[1],w.ia=He[2];const dn=He[3];dn!=null&&(w.la=dn,w.j.info("VER="+w.la));const fn=He[4];fn!=null&&(w.Aa=fn,w.j.info("SVER="+w.Aa));const Ha=He[5];Ha!=null&&typeof Ha=="number"&&0<Ha&&(I=1.5*Ha,w.L=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;const Tr=c.g;if(Tr){const Ef=Tr.g?Tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ef){var $=I.h;$.g||Ef.indexOf("spdy")==-1&&Ef.indexOf("quic")==-1&&Ef.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(sg($,$.h),$.h=null))}if(I.D){const ug=Tr.g?Tr.g.getResponseHeader("X-HTTP-Session-Id"):null;ug&&(I.ya=ug,st(I.I,I.D,ug))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-c.F,w.j.info("Handshake RTT: "+w.R+"ms")),I=w;var J=c;if(I.qa=eE(I,I.J?I.ia:null,I.W),J.K){kx(I.h,J);var tt=J,tn=I.L;tn&&(tt.I=tn),tt.B&&(tg(tt),df(tt)),I.g=J}else Qx(I);0<w.i.length&&_f(w)}else He[0]!="stop"&&He[0]!="close"||$o(w,7);else w.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?$o(w,7):og(w):He[0]!="noop"&&w.l&&w.l.ta(He),w.v=0)}}ts(4)}catch{}}var FD=class{constructor(c,m){this.g=c,this.map=m}};function Cx(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ix(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Rx(c){return c.h?1:c.g?c.g.size:0}function rg(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function sg(c,m){c.g?c.g.add(m):c.h=m}function kx(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Cx.prototype.cancel=function(){if(this.i=Ax(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ax(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const w of c.g.values())m=m.concat(w.D);return m}return E(c.i)}function UD(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var m=[],w=c.length,I=0;I<w;I++)m.push(c[I]);return m}m=[],w=0;for(I in c)m[w++]=c[I];return m}function $D(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var m=[];c=c.length;for(var w=0;w<c;w++)m.push(w);return m}m=[],w=0;for(const I in c)m[w++]=I;return m}}}function Px(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var w=$D(c),I=UD(c),F=I.length,$=0;$<F;$++)m.call(void 0,I[$],w&&w[$],c)}var Nx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function BD(c,m){if(c){c=c.split("&");for(var w=0;w<c.length;w++){var I=c[w].indexOf("="),F=null;if(0<=I){var $=c[w].substring(0,I);F=c[w].substring(I+1)}else $=c[w];m($,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Uo(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Uo){this.h=c.h,ff(this,c.j),this.o=c.o,this.g=c.g,hf(this,c.s),this.l=c.l;var m=c.i,w=new Du;w.i=m.i,m.g&&(w.g=new Map(m.g),w.h=m.h),Dx(this,w),this.m=c.m}else c&&(m=String(c).match(Nx))?(this.h=!1,ff(this,m[1]||"",!0),this.o=Pu(m[2]||""),this.g=Pu(m[3]||"",!0),hf(this,m[4]),this.l=Pu(m[5]||"",!0),Dx(this,m[6]||"",!0),this.m=Pu(m[7]||"")):(this.h=!1,this.i=new Du(null,this.h))}Uo.prototype.toString=function(){var c=[],m=this.j;m&&c.push(Nu(m,Ox,!0),":");var w=this.g;return(w||m=="file")&&(c.push("//"),(m=this.o)&&c.push(Nu(m,Ox,!0),"@"),c.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&c.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(Nu(w,w.charAt(0)=="/"?HD:WD,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",Nu(w,GD)),c.join("")};function Os(c){return new Uo(c)}function ff(c,m,w){c.j=w?Pu(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function hf(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function Dx(c,m,w){m instanceof Du?(c.i=m,KD(c.i,c.h)):(w||(m=Nu(m,qD)),c.i=new Du(m,c.h))}function st(c,m,w){c.i.set(m,w)}function pf(c){return st(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Pu(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Nu(c,m,w){return typeof c=="string"?(c=encodeURI(c).replace(m,zD),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function zD(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ox=/[#\/\?@]/g,WD=/[#\?:]/g,HD=/[#\?]/g,qD=/[#\?@]/g,GD=/#/g;function Du(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function Ti(c){c.g||(c.g=new Map,c.h=0,c.i&&BD(c.i,function(m,w){c.add(decodeURIComponent(m.replace(/\+/g," ")),w)}))}t=Du.prototype,t.add=function(c,m){Ti(this),this.i=null,c=za(this,c);var w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(m),this.h+=1,this};function Mx(c,m){Ti(c),m=za(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Lx(c,m){return Ti(c),m=za(c,m),c.g.has(m)}t.forEach=function(c,m){Ti(this),this.g.forEach(function(w,I){w.forEach(function(F){c.call(m,F,I,this)},this)},this)},t.na=function(){Ti(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),w=[];for(let I=0;I<m.length;I++){const F=c[I];for(let $=0;$<F.length;$++)w.push(m[I])}return w},t.V=function(c){Ti(this);let m=[];if(typeof c=="string")Lx(this,c)&&(m=m.concat(this.g.get(za(this,c))));else{c=Array.from(this.g.values());for(let w=0;w<c.length;w++)m=m.concat(c[w])}return m},t.set=function(c,m){return Ti(this),this.i=null,c=za(this,c),Lx(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function jx(c,m,w){Mx(c,m),0<w.length&&(c.i=null,c.g.set(za(c,m),E(w)),c.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var w=0;w<m.length;w++){var I=m[w];const $=encodeURIComponent(String(I)),J=this.V(I);for(I=0;I<J.length;I++){var F=$;J[I]!==""&&(F+="="+encodeURIComponent(String(J[I]))),c.push(F)}}return this.i=c.join("&")};function za(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function KD(c,m){m&&!c.j&&(Ti(c),c.i=null,c.g.forEach(function(w,I){var F=I.toLowerCase();I!=F&&(Mx(this,I),jx(this,F,w))},c)),c.j=m}function QD(c,m){const w=new en;if(a.Image){const I=new Image;I.onload=g(Si,w,"TestLoadImage: loaded",!0,m,I),I.onerror=g(Si,w,"TestLoadImage: error",!1,m,I),I.onabort=g(Si,w,"TestLoadImage: abort",!1,m,I),I.ontimeout=g(Si,w,"TestLoadImage: timeout",!1,m,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else m(!1)}function YD(c,m){const w=new en,I=new AbortController,F=setTimeout(()=>{I.abort(),Si(w,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:I.signal}).then($=>{clearTimeout(F),$.ok?Si(w,"TestPingServer: ok",!0,m):Si(w,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),Si(w,"TestPingServer: error",!1,m)})}function Si(c,m,w,I,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),I(w)}catch{}}function ZD(){this.g=new ku}function XD(c,m,w){const I=w||"";try{Px(c,function(F,$){let J=F;u(F)&&(J=Ei(F)),m.push(I+$+"="+encodeURIComponent(J))})}catch(F){throw m.push(I+"type="+encodeURIComponent("_badmap")),F}}function mf(c){this.l=c.Ub||null,this.j=c.eb||!1}_(mf,es),mf.prototype.g=function(){return new gf(this.l,this.j)},mf.prototype.i=function(c){return function(){return c}}({});function gf(c,m){K.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(gf,K),t=gf.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,Mu(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ou(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Mu(this)),this.g&&(this.readyState=3,Mu(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vx(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vx(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Ou(this):Mu(this),this.readyState==3&&Vx(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ou(this))},t.Qa=function(c){this.g&&(this.response=c,Ou(this))},t.ga=function(){this.g&&Ou(this)};function Ou(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Mu(c)}t.setRequestHeader=function(c,m){this.u.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var w=m.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=m.next();return c.join(`\r
`)};function Mu(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(gf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Fx(c){let m="";return V(c,function(w,I){m+=I,m+=":",m+=w,m+=`\r
`}),m}function ig(c,m,w){e:{for(I in w){var I=!1;break e}I=!0}I||(w=Fx(w),typeof c=="string"?w!=null&&encodeURIComponent(String(w)):st(c,m,w))}function vt(c){K.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(vt,K);var JD=/^https?$/i,eO=["POST","PUT"];t=vt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,m,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xm.g(),this.v=this.o?br(this.o):br(Xm),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch($){Ux(this,$);return}if(c=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var F in I)w.set(F,I[F]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const $ of I.keys())w.set($,I.get($));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find($=>$.toLowerCase()=="content-type"),F=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(eO,m,void 0))||I||F||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,J]of w)this.g.setRequestHeader($,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zx(this),this.u=!0,this.g.send(c),this.u=!1}catch($){Ux(this,$)}};function Ux(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,$x(c),yf(c)}function $x(c){c.A||(c.A=!0,H(c,"complete"),H(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,H(this,"complete"),H(this,"abort"),yf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yf(this,!0)),vt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Bx(this):this.bb())},t.bb=function(){Bx(this)};function Bx(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Ms(c)!=4||c.Z()!=2)){if(c.u&&Ms(c)==4)Me(c.Ea,0,c);else if(H(c,"readystatechange"),Ms(c)==4){c.h=!1;try{const J=c.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var w;if(!(w=m)){var I;if(I=J===0){var F=String(c.D).match(Nx)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),I=!JD.test(F?F.toLowerCase():"")}w=I}if(w)H(c,"complete"),H(c,"success");else{c.m=6;try{var $=2<Ms(c)?c.g.statusText:""}catch{$=""}c.l=$+" ["+c.Z()+"]",$x(c)}}finally{yf(c)}}}}function yf(c,m){if(c.g){zx(c);const w=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||H(c,"ready");try{w.onreadystatechange=I}catch{}}}function zx(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Ms(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Ms(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Mo(m)}};function Wx(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function tO(c){const m={};c=(c.g&&2<=Ms(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(b(c[I]))continue;var w=N(c[I]);const F=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const $=m[F]||[];m[F]=$,$.push(w)}C(m,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lu(c,m,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||m}function Hx(c){this.Aa=0,this.i=[],this.j=new en,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lu("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lu("baseRetryDelayMs",5e3,c),this.cb=Lu("retryDelaySeedMs",1e4,c),this.Wa=Lu("forwardChannelMaxRetries",2,c),this.wa=Lu("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Cx(c&&c.concurrentRequestLimit),this.Da=new ZD,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Hx.prototype,t.la=8,t.G=1,t.connect=function(c,m,w,I){Je(0),this.W=c,this.H=m||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.I=eE(this,null,this.W),_f(this)};function og(c){if(qx(c),c.G==3){var m=c.U++,w=Os(c.I);if(st(w,"SID",c.K),st(w,"RID",m),st(w,"TYPE","terminate"),ju(c,w),m=new bi(c,c.j,m),m.L=2,m.v=pf(Os(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!w&&a.Image&&(new Image().src=m.v,w=!0),w||(m.g=tE(m.j,null),m.g.ea(m.v)),m.F=Date.now(),df(m)}Jx(c)}function vf(c){c.g&&(lg(c),c.g.cancel(),c.g=null)}function qx(c){vf(c),c.u&&(a.clearTimeout(c.u),c.u=null),wf(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function _f(c){if(!Ix(c.h)&&!c.s){c.s=!0;var m=c.Ga;ge||X(),j||(ge(),j=!0),B.add(m,c),c.B=0}}function nO(c,m){return Rx(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Jt(h(c.Ga,c,m),Xx(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const F=new bi(this,this.j,c);let $=this.o;if(this.S&&($?($=S($),k($,this.S)):$=this.S),this.m!==null||this.O||(F.H=$,$=null),this.P)e:{for(var m=0,w=0;w<this.i.length;w++){t:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=w;break e}if(m===4096||w===this.i.length-1){m=w+1;break e}}m=1e3}else m=1e3;m=Kx(this,F,m),w=Os(this.I),st(w,"RID",c),st(w,"CVER",22),this.D&&st(w,"X-HTTP-Session-Id",this.D),ju(this,w),$&&(this.O?m="headers="+encodeURIComponent(String(Fx($)))+"&"+m:this.m&&ig(w,this.m,$)),sg(this.h,F),this.Ua&&st(w,"TYPE","init"),this.P?(st(w,"$req",m),st(w,"SID","null"),F.T=!0,eg(F,w,null)):eg(F,w,m),this.G=2}}else this.G==3&&(c?Gx(this,c):this.i.length==0||Ix(this.h)||Gx(this))};function Gx(c,m){var w;m?w=m.l:w=c.U++;const I=Os(c.I);st(I,"SID",c.K),st(I,"RID",w),st(I,"AID",c.T),ju(c,I),c.m&&c.o&&ig(I,c.m,c.o),w=new bi(c,c.j,w,c.B+1),c.m===null&&(w.H=c.o),m&&(c.i=m.D.concat(c.i)),m=Kx(c,w,1e3),w.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),sg(c.h,w),eg(w,I,m)}function ju(c,m){c.H&&V(c.H,function(w,I){st(m,I,w)}),c.l&&Px({},function(w,I){st(m,I,w)})}function Kx(c,m,w){w=Math.min(c.i.length,w);var I=c.l?h(c.l.Na,c.l,c):null;e:{var F=c.i;let $=-1;for(;;){const J=["count="+w];$==-1?0<w?($=F[0].g,J.push("ofs="+$)):$=0:J.push("ofs="+$);let tt=!0;for(let tn=0;tn<w;tn++){let He=F[tn].g;const dn=F[tn].map;if(He-=$,0>He)$=Math.max(0,F[tn].g-100),tt=!1;else try{XD(dn,J,"req"+He+"_")}catch{I&&I(dn)}}if(tt){I=J.join("&");break e}}}return c=c.i.splice(0,w),m.D=c,I}function Qx(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;ge||X(),j||(ge(),j=!0),B.add(m,c),c.v=0}}function ag(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Jt(h(c.Fa,c),Xx(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Yx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Jt(h(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Je(10),vf(this),Yx(this))};function lg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Yx(c){c.g=new bi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=Os(c.qa);st(m,"RID","rpc"),st(m,"SID",c.K),st(m,"AID",c.T),st(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&st(m,"TO",c.ja),st(m,"TYPE","xmlhttp"),ju(c,m),c.m&&c.o&&ig(m,c.m,c.o),c.L&&(c.g.I=c.L);var w=c.g;c=c.ia,w.L=1,w.v=pf(Os(m)),w.m=null,w.P=!0,bx(w,c)}t.Za=function(){this.C!=null&&(this.C=null,vf(this),ag(this),Je(19))};function wf(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Zx(c,m){var w=null;if(c.g==m){wf(c),lg(c),c.g=null;var I=2}else if(rg(c.h,m))w=m.D,kx(c.h,m),I=1;else return;if(c.G!=0){if(m.o)if(I==1){w=m.m?m.m.length:0,m=Date.now()-m.F;var F=c.B;I=St(),H(I,new jo(I,w)),_f(c)}else Qx(c);else if(F=m.s,F==3||F==0&&0<m.X||!(I==1&&nO(c,m)||I==2&&ag(c)))switch(w&&0<w.length&&(m=c.h,m.i=m.i.concat(w)),F){case 1:$o(c,5);break;case 4:$o(c,10);break;case 3:$o(c,6);break;default:$o(c,2)}}}function Xx(c,m){let w=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(w*=2),w*m}function $o(c,m){if(c.j.info("Error code "+m),m==2){var w=h(c.fb,c),I=c.Xa;const F=!I;I=new Uo(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ff(I,"https"),pf(I),F?QD(I.toString(),w):YD(I.toString(),w)}else Je(2);c.G=0,c.l&&c.l.sa(m),Jx(c),qx(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Je(2)):(this.j.info("Failed to ping google.com"),Je(1))};function Jx(c){if(c.G=0,c.ka=[],c.l){const m=Ax(c.h);(m.length!=0||c.i.length!=0)&&(x(c.ka,m),x(c.ka,c.i),c.h.i.length=0,E(c.i),c.i.length=0),c.l.ra()}}function eE(c,m,w){var I=w instanceof Uo?Os(w):new Uo(w);if(I.g!="")m&&(I.g=m+"."+I.g),hf(I,I.s);else{var F=a.location;I=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;var $=new Uo(null);I&&ff($,I),m&&($.g=m),F&&hf($,F),w&&($.l=w),I=$}return w=c.D,m=c.ya,w&&m&&st(I,w,m),st(I,"VER",c.la),ju(c,I),I}function tE(c,m,w){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new vt(new mf({eb:w})):new vt(c.pa),m.Ha(c.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function nE(){}t=nE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xf(){}xf.prototype.g=function(c,m){return new er(c,m)};function er(c,m){K.call(this),this.g=new Hx(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!b(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!b(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Wa(this)}_(er,K),er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){og(this.g)},er.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.u&&(w={},w.__data__=Ei(c),c=w);m.i.push(new FD(m.Ya++,c)),m.G==3&&_f(m)},er.prototype.N=function(){this.g.l=null,delete this.j,og(this.g),delete this.g,er.aa.N.call(this)};function rE(c){$a.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const w in m){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}_(rE,$a);function sE(){Ba.call(this),this.status=1}_(sE,Ba);function Wa(c){this.g=c}_(Wa,nE),Wa.prototype.ua=function(){H(this.g,"a")},Wa.prototype.ta=function(c){H(this.g,new rE(c))},Wa.prototype.sa=function(c){H(this.g,new sE)},Wa.prototype.ra=function(){H(this.g,"b")},xf.prototype.createWebChannel=xf.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,Gk=function(){return new xf},qk=function(){return St()},Hk=xe,jv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uf.NO_ERROR=0,uf.TIMEOUT=8,uf.HTTP_ERROR=6,Ch=uf,wx.COMPLETE="complete",Wk=wx,af.EventType=Lo,Lo.OPEN="a",Lo.CLOSE="b",Lo.ERROR="c",Lo.MESSAGE="d",K.prototype.listen=K.prototype.K,oc=af,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,zk=vt}).apply(typeof Hf<"u"?Hf:typeof self<"u"?self:typeof window<"u"?window:{});const aT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=new Cw("@firebase/firestore");function Gu(){return xa.logLevel}function me(t,...e){if(xa.logLevel<=$e.DEBUG){const n=e.map(zw);xa.debug(`Firestore (${xu}): ${t}`,...n)}}function di(t,...e){if(xa.logLevel<=$e.ERROR){const n=e.map(zw);xa.error(`Firestore (${xu}): ${t}`,...n)}}function Xl(t,...e){if(xa.logLevel<=$e.WARN){const n=e.map(zw);xa.warn(`Firestore (${xu}): ${t}`,...n)}}function zw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(t="Unexpected state"){const e=`FIRESTORE (${xu}) INTERNAL ASSERTION FAILED: `+t;throw di(e),new Error(e)}function Xe(t,e){t||Se()}function ke(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends ks{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vn.UNAUTHENTICATED))}shutdown(){}}class qU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class GU{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new ti;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ti,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ti)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string"),new Kk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string"),new vn(e)}}class KU{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class QU{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new KU(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class YU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZU{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Xe(this.o===void 0);const r=i=>{i.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,me("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Xe(typeof n.token=="string"),this.R=n.token,new YU(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=XU(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function qe(t,e){return t<e?-1:t>e?1:0}function Jl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ee(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return At.fromMillis(Date.now())}static fromDate(e){return At.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new At(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Re(e)}static min(){return new Re(new At(0,0))}static max(){return new Re(new At(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n,r){n===void 0?n=0:n>e.length&&Se(),r===void 0?r=e.length-n:r>e.length-n&&Se(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Jc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Jc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class nt extends Jc{construct(e,n,r){return new nt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new nt(n)}static emptyPath(){return new nt([])}}const JU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Jc{construct(e,n,r){return new sn(e,n,r)}static isValidIdentifier(e){return JU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new sn(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ee(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ee(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ee(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new ee(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sn(n)}static emptyPath(){return new sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(nt.fromString(e))}static fromName(e){return new ve(nt.fromString(e).popFirst(5))}static empty(){return new ve(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new nt(e.slice()))}}function e$(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Re.fromTimestamp(r===1e9?new At(n+1,0):new At(n,r));return new vo(s,ve.empty(),e)}function t$(t){return new vo(t.readTime,t.key,-1)}class vo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new vo(Re.min(),ve.empty(),-1)}static max(){return new vo(Re.max(),ve.empty(),-1)}}function n$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(t.documentKey,e.documentKey),n!==0?n:qe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class s${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bd(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==r$)throw t;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(s=>s?G.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new G((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(f=>{o[u]=f,++a,a===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new G((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function i$(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ww.oe=-1;function ym(t){return t==null}function yp(t){return t===0&&1/t==-1/0}function o$(t){return typeof t=="number"&&Number.isInteger(t)&&!yp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Da(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Yk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){this.comparator=e,this.root=n||rn.EMPTY}insert(e,n){return new yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qf(this.root,e,this.comparator,!1)}getReverseIterator(){return new qf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qf(this.root,e,this.comparator,!0)}}class qf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??rn.RED,this.left=s??rn.EMPTY,this.right=i??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new rn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return rn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Se();const e=this.left.check();if(e!==this.right.check())throw Se();return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Se()}get value(){throw Se()}get color(){throw Se()}get left(){throw Se()}get right(){throw Se()}copy(e,n,r,s,i){return this}insert(e,n,r){return new rn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uT(this.data.getIterator())}getIteratorFrom(e){return new uT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof an)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new an(this.comparator);return n.data=e,n}}class uT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.fields=e,e.sort(sn.comparator)}static empty(){return new sr([])}unionWith(e){let n=new an(sn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new sr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Zk("Invalid base64 string: "+i):i}}(e);return new un(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new un(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const a$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _o(t){if(Xe(!!t),typeof t=="string"){let e=0;const n=a$.exec(t);if(Xe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:It(t.seconds),nanos:It(t.nanos)}}function It(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ea(t){return typeof t=="string"?un.fromBase64String(t):un.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Hw(t){const e=t.mapValue.fields.__previous_value__;return vm(e)?Hw(e):e}function ed(t){const e=_o(t.mapValue.fields.__local_write_time__.timestampValue);return new At(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(e,n,r,s,i,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class td{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new td("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof td&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf={mapValue:{}};function ba(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vm(t)?4:c$(t)?9007199254740991:u$(t)?10:11:Se()}function Es(t,e){if(t===e)return!0;const n=ba(t);if(n!==ba(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ed(t).isEqual(ed(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=_o(s.timestampValue),a=_o(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ea(s.bytesValue).isEqual(Ea(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return It(s.geoPointValue.latitude)===It(i.geoPointValue.latitude)&&It(s.geoPointValue.longitude)===It(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return It(s.integerValue)===It(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=It(s.doubleValue),a=It(i.doubleValue);return o===a?yp(o)===yp(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Jl(t.arrayValue.values||[],e.arrayValue.values||[],Es);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(lT(o)!==lT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Es(o[l],a[l])))return!1;return!0}(t,e);default:return Se()}}function nd(t,e){return(t.values||[]).find(n=>Es(n,e))!==void 0}function eu(t,e){if(t===e)return 0;const n=ba(t),r=ba(e);if(n!==r)return qe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return qe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=It(i.integerValue||i.doubleValue),l=It(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return cT(t.timestampValue,e.timestampValue);case 4:return cT(ed(t),ed(e));case 5:return qe(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Ea(i),l=Ea(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const f=qe(a[u],l[u]);if(f!==0)return f}return qe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=qe(It(i.latitude),It(o.latitude));return a!==0?a:qe(It(i.longitude),It(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return dT(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,u,f;const d=i.fields||{},h=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,_=(l=h.value)===null||l===void 0?void 0:l.arrayValue,E=qe(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((f=_==null?void 0:_.values)===null||f===void 0?void 0:f.length)||0);return E!==0?E:dT(g,_)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Gf.mapValue&&o===Gf.mapValue)return 0;if(i===Gf.mapValue)return 1;if(o===Gf.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let d=0;d<l.length&&d<f.length;++d){const h=qe(l[d],f[d]);if(h!==0)return h;const g=eu(a[l[d]],u[f[d]]);if(g!==0)return g}return qe(l.length,f.length)}(t.mapValue,e.mapValue);default:throw Se()}}function cT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return qe(t,e);const n=_o(t),r=_o(e),s=qe(n.seconds,r.seconds);return s!==0?s:qe(n.nanos,r.nanos)}function dT(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=eu(n[s],r[s]);if(i)return i}return qe(n.length,r.length)}function tu(t){return Vv(t)}function Vv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=_o(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ea(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ve.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Vv(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Vv(n.fields[o])}`;return s+"}"}(t.mapValue):Se()}function vp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Fv(t){return!!t&&"integerValue"in t}function qw(t){return!!t&&"arrayValue"in t}function fT(t){return!!t&&"nullValue"in t}function hT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ih(t){return!!t&&"mapValue"in t}function u$(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Sc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Da(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Sc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function c$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.value=e}static empty(){return new Gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ih(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sc(n)}setAll(e){let n=sn.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Sc(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ih(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Es(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ih(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Da(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Gn(Sc(this.value))}}function Xk(t){const e=[];return Da(t.fields,(n,r)=>{const s=new sn([n]);if(Ih(r)){const i=Xk(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new sr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new wn(e,0,Re.min(),Re.min(),Re.min(),Gn.empty(),0)}static newFoundDocument(e,n,r,s){return new wn(e,1,n,Re.min(),r,s,0)}static newNoDocument(e,n){return new wn(e,2,n,Re.min(),Re.min(),Gn.empty(),0)}static newUnknownDocument(e,n){return new wn(e,3,n,Re.min(),Re.min(),Gn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n){this.position=e,this.inclusive=n}}function pT(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ve.comparator(ve.fromName(o.referenceValue),n.key):r=eu(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function mT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Es(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n="asc"){this.field=e,this.dir=n}}function d$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{}class Lt extends Jk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new h$(e,n,r):n==="array-contains"?new g$(e,r):n==="in"?new y$(e,r):n==="not-in"?new v$(e,r):n==="array-contains-any"?new _$(e,r):new Lt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new p$(e,r):new m$(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(eu(n,this.value)):n!==null&&ba(this.value)===ba(n)&&this.matchesComparison(eu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zr extends Jk{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new zr(e,n)}matches(e){return eA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function eA(t){return t.op==="and"}function tA(t){return f$(t)&&eA(t)}function f$(t){for(const e of t.filters)if(e instanceof zr)return!1;return!0}function Uv(t){if(t instanceof Lt)return t.field.canonicalString()+t.op.toString()+tu(t.value);if(tA(t))return t.filters.map(e=>Uv(e)).join(",");{const e=t.filters.map(n=>Uv(n)).join(",");return`${t.op}(${e})`}}function nA(t,e){return t instanceof Lt?function(r,s){return s instanceof Lt&&r.op===s.op&&r.field.isEqual(s.field)&&Es(r.value,s.value)}(t,e):t instanceof zr?function(r,s){return s instanceof zr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&nA(o,s.filters[a]),!0):!1}(t,e):void Se()}function rA(t){return t instanceof Lt?function(n){return`${n.field.canonicalString()} ${n.op} ${tu(n.value)}`}(t):t instanceof zr?function(n){return n.op.toString()+" {"+n.getFilters().map(rA).join(" ,")+"}"}(t):"Filter"}class h$ extends Lt{constructor(e,n,r){super(e,n,r),this.key=ve.fromName(r.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class p$ extends Lt{constructor(e,n){super(e,"in",n),this.keys=sA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class m$ extends Lt{constructor(e,n){super(e,"not-in",n),this.keys=sA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ve.fromName(r.referenceValue))}class g$ extends Lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qw(n)&&nd(n.arrayValue,this.value)}}class y$ extends Lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&nd(this.value.arrayValue,n)}}class v$ extends Lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(nd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!nd(this.value.arrayValue,n)}}class _$ extends Lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>nd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function gT(t,e=null,n=[],r=[],s=null,i=null,o=null){return new w$(t,e,n,r,s,i,o)}function Gw(t){const e=ke(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Uv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ym(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>tu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>tu(r)).join(",")),e.ue=n}return e.ue}function Kw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!d$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!nA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!mT(t.startAt,e.startAt)&&mT(t.endAt,e.endAt)}function $v(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function x$(t,e,n,r,s,i,o,a){return new Oa(t,e,n,r,s,i,o,a)}function _m(t){return new Oa(t)}function yT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Qw(t){return t.collectionGroup!==null}function Sl(t){const e=ke(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new an(sn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new rd(i,r))}),n.has(sn.keyField().canonicalString())||e.ce.push(new rd(sn.keyField(),r))}return e.ce}function ys(t){const e=ke(t);return e.le||(e.le=E$(e,Sl(t))),e.le}function E$(t,e){if(t.limitType==="F")return gT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new rd(s.field,i)});const n=t.endAt?new nu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new nu(t.startAt.position,t.startAt.inclusive):null;return gT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Bv(t,e){const n=t.filters.concat([e]);return new Oa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _p(t,e,n){return new Oa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wm(t,e){return Kw(ys(t),ys(e))&&t.limitType===e.limitType}function iA(t){return`${Gw(ys(t))}|lt:${t.limitType}`}function Xa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>rA(s)).join(", ")}]`),ym(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>tu(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>tu(s)).join(",")),`Target(${r})`}(ys(t))}; limitType=${t.limitType})`}function xm(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ve.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Sl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const u=pT(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Sl(r),s)||r.endAt&&!function(o,a,l){const u=pT(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Sl(r),s))}(t,e)}function b$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function oA(t){return(e,n)=>{let r=!1;for(const s of Sl(t)){const i=T$(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function T$(t,e,n){const r=t.field.isKeyField()?ve.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?eu(l,u):Se()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Da(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Yk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S$=new yt(ve.comparator);function fi(){return S$}const aA=new yt(ve.comparator);function ac(...t){let e=aA;for(const n of t)e=e.insert(n.key,n);return e}function lA(t){let e=aA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yo(){return Cc()}function uA(){return Cc()}function Cc(){return new Eu(t=>t.toString(),(t,e)=>t.isEqual(e))}const C$=new yt(ve.comparator),I$=new an(ve.comparator);function Fe(...t){let e=I$;for(const n of t)e=e.add(n);return e}const R$=new an(qe);function k$(){return R$}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yp(e)?"-0":e}}function cA(t){return{integerValue:""+t}}function A$(t,e){return o$(e)?cA(e):Yw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(){this._=void 0}}function P$(t,e,n){return t instanceof sd?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&vm(i)&&(i=Hw(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof id?fA(t,e):t instanceof od?hA(t,e):function(s,i){const o=dA(s,i),a=vT(o)+vT(s.Pe);return Fv(o)&&Fv(s.Pe)?cA(a):Yw(s.serializer,a)}(t,e)}function N$(t,e,n){return t instanceof id?fA(t,e):t instanceof od?hA(t,e):n}function dA(t,e){return t instanceof wp?function(r){return Fv(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class sd extends Em{}class id extends Em{constructor(e){super(),this.elements=e}}function fA(t,e){const n=pA(e);for(const r of t.elements)n.some(s=>Es(s,r))||n.push(r);return{arrayValue:{values:n}}}class od extends Em{constructor(e){super(),this.elements=e}}function hA(t,e){let n=pA(e);for(const r of t.elements)n=n.filter(s=>!Es(s,r));return{arrayValue:{values:n}}}class wp extends Em{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function vT(t){return It(t.integerValue||t.doubleValue)}function pA(t){return qw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(e,n){this.field=e,this.transform=n}}function O$(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof id&&s instanceof id||r instanceof od&&s instanceof od?Jl(r.elements,s.elements,Es):r instanceof wp&&s instanceof wp?Es(r.Pe,s.Pe):r instanceof sd&&s instanceof sd}(t.transform,e.transform)}class M${constructor(e,n){this.version=e,this.transformResults=n}}class On{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new On}static exists(e){return new On(void 0,e)}static updateTime(e){return new On(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bm{}function mA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Tm(t.key,On.none()):new Wd(t.key,t.data,On.none());{const n=t.data,r=Gn.empty();let s=new an(sn.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Po(t.key,r,new sr(s.toArray()),On.none())}}function L$(t,e,n){t instanceof Wd?function(s,i,o){const a=s.value.clone(),l=wT(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Po?function(s,i,o){if(!Rh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=wT(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(gA(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ic(t,e,n,r){return t instanceof Wd?function(i,o,a,l){if(!Rh(i.precondition,o))return a;const u=i.value.clone(),f=xT(i.fieldTransforms,l,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Po?function(i,o,a,l){if(!Rh(i.precondition,o))return a;const u=xT(i.fieldTransforms,l,o),f=o.data;return f.setAll(gA(i)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,o,a){return Rh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function j$(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=dA(r.transform,s||null);i!=null&&(n===null&&(n=Gn.empty()),n.set(r.field,i))}return n||null}function _T(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Jl(r,s,(i,o)=>O$(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wd extends bm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Po extends bm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function gA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function wT(t,e,n){const r=new Map;Xe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,N$(o,a,n[s]))}return r}function xT(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,P$(i,o,e))}return r}class Tm extends bm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class V$ extends bm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&L$(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ic(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ic(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=uA();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=mA(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Fe())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,(n,r)=>_T(n,r))&&Jl(this.baseMutations,e.baseMutations,(n,r)=>_T(n,r))}}class Zw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Xe(e.mutations.length===r.length);let s=function(){return C$}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Zw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U$=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,Be;function B$(t){switch(t){default:return Se();case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0}}function yA(t){if(t===void 0)return di("GRPC error has no .code"),W.UNKNOWN;switch(t){case Dt.OK:return W.OK;case Dt.CANCELLED:return W.CANCELLED;case Dt.UNKNOWN:return W.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return W.INTERNAL;case Dt.UNAVAILABLE:return W.UNAVAILABLE;case Dt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Dt.NOT_FOUND:return W.NOT_FOUND;case Dt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Dt.ABORTED:return W.ABORTED;case Dt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Dt.DATA_LOSS:return W.DATA_LOSS;default:return Se()}}(Be=Dt||(Dt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z$(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W$=new ua([4294967295,4294967295],0);function ET(t){const e=z$().encode(t),n=new Bk;return n.update(e),new Uint8Array(n.digest())}function bT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ua([n,r],0),new ua([s,i],0)]}class Xw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new lc(`Invalid padding: ${n}`);if(r<0)throw new lc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new lc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ua.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ua.fromNumber(r)));return s.compare(W$)===1&&(s=new ua([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ET(e),[r,s]=bT(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Xw(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=ET(e),[r,s]=bT(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Hd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Sm(Re.min(),s,new yt(qe),fi(),Fe())}}class Hd{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Hd(r,n,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class vA{constructor(e,n){this.targetId=e,this.me=n}}class _A{constructor(e,n,r=un.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class TT{constructor(){this.fe=0,this.ge=CT(),this.pe=un.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Fe(),n=Fe(),r=Fe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Se()}}),new Hd(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=CT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class H${constructor(e){this.Le=e,this.Be=new Map,this.ke=fi(),this.qe=ST(),this.Qe=new yt(qe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Se()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if($v(i))if(r===0){const o=new ve(i.path);this.Ue(n,o,wn.newNoDocument(o,Re.min()))}else Xe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Ea(r).toUint8Array()}catch(l){if(l instanceof Zk)return Xl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Xw(o,s,i)}catch(l){return Xl(l instanceof lc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&$v(a.target)){const l=new ve(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,wn.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Fe();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Sm(e,n,this.Qe,this.ke,r);return this.ke=fi(),this.qe=ST(),this.Qe=new yt(qe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new TT,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new an(qe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new TT),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function ST(){return new yt(ve.comparator)}function CT(){return new yt(ve.comparator)}const q$={asc:"ASCENDING",desc:"DESCENDING"},G$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},K$={and:"AND",or:"OR"};class Q${constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zv(t,e){return t.useProto3Json||ym(e)?e:{value:e}}function xp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Y$(t,e){return xp(t,e.toTimestamp())}function vs(t){return Xe(!!t),Re.fromTimestamp(function(n){const r=_o(n);return new At(r.seconds,r.nanos)}(t))}function Jw(t,e){return Wv(t,e).canonicalString()}function Wv(t,e){const n=function(s){return new nt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function xA(t){const e=nt.fromString(t);return Xe(CA(e)),e}function Hv(t,e){return Jw(t.databaseId,e.path)}function Gg(t,e){const n=xA(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ve(bA(n))}function EA(t,e){return Jw(t.databaseId,e)}function Z$(t){const e=xA(t);return e.length===4?nt.emptyPath():bA(e)}function qv(t){return new nt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bA(t){return Xe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function IT(t,e,n){return{name:Hv(t,e),fields:n.value.mapValue.fields}}function X$(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Se()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,f){return u.useProto3Json?(Xe(f===void 0||typeof f=="string"),un.fromBase64String(f||"")):(Xe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),un.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const f=u.code===void 0?W.UNKNOWN:yA(u.code);return new ee(f,u.message||"")}(o);n=new _A(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Gg(t,r.document.name),i=vs(r.document.updateTime),o=r.document.createTime?vs(r.document.createTime):Re.min(),a=new Gn({mapValue:{fields:r.document.fields}}),l=wn.newFoundDocument(s,i,o,a),u=r.targetIds||[],f=r.removedTargetIds||[];n=new kh(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Gg(t,r.document),i=r.readTime?vs(r.readTime):Re.min(),o=wn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new kh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Gg(t,r.document),i=r.removedTargetIds||[];n=new kh([],i,s,null)}else{if(!("filter"in e))return Se();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new $$(s,i),a=r.targetId;n=new vA(a,o)}}return n}function J$(t,e){let n;if(e instanceof Wd)n={update:IT(t,e.key,e.value)};else if(e instanceof Tm)n={delete:Hv(t,e.key)};else if(e instanceof Po)n={update:IT(t,e.key,e.data),updateMask:l5(e.fieldMask)};else{if(!(e instanceof V$))return Se();n={verify:Hv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof sd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof id)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof od)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof wp)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Se()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Y$(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Se()}(t,e.precondition)),n}function e5(t,e){return t&&t.length>0?(Xe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?vs(s.updateTime):vs(i);return o.isEqual(Re.min())&&(o=vs(i)),new M$(o,s.transformResults||[])}(n,e))):[]}function t5(t,e){return{documents:[EA(t,e.path)]}}function n5(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=EA(t,s);const i=function(u){if(u.length!==0)return SA(zr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(f=>function(h){return{field:Ja(h.field),direction:i5(h.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=zv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:s}}function r5(t){let e=Z$(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Xe(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(d){const h=TA(d);return h instanceof zr&&tA(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(_){return new rd(el(_.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,ym(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(d){const h=!!d.before,g=d.values||[];return new nu(g,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const h=!d.before,g=d.values||[];return new nu(g,h)}(n.endAt)),x$(e,s,o,i,a,"F",l,u)}function s5(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function TA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=el(n.unaryFilter.field);return Lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=el(n.unaryFilter.field);return Lt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=el(n.unaryFilter.field);return Lt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=el(n.unaryFilter.field);return Lt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Se()}}(t):t.fieldFilter!==void 0?function(n){return Lt.create(el(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Se()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return zr.create(n.compositeFilter.filters.map(r=>TA(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Se()}}(n.compositeFilter.op))}(t):Se()}function i5(t){return q$[t]}function o5(t){return G$[t]}function a5(t){return K$[t]}function Ja(t){return{fieldPath:t.canonicalString()}}function el(t){return sn.fromServerFormat(t.fieldPath)}function SA(t){return t instanceof Lt?function(n){if(n.op==="=="){if(hT(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NAN"}};if(fT(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hT(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NOT_NAN"}};if(fT(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ja(n.field),op:o5(n.op),value:n.value}}}(t):t instanceof zr?function(n){const r=n.getFilters().map(s=>SA(s));return r.length===1?r[0]:{compositeFilter:{op:a5(n.op),filters:r}}}(t):Se()}function l5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function CA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n,r,s,i=Re.min(),o=Re.min(),a=un.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new to(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e){this.ct=e}}function c5(t){const e=r5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_p(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(){this.un=new f5}addToCollectionParentIndex(e,n){return this.un.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(vo.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(vo.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class f5{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new an(nt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new an(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ru(0)}static kn(){return new ru(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(){this.changes=new Eu(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ic(r.mutation,s,sr.empty(),At.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Fe()){const s=Yo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ac();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Yo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Fe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=fi();const o=Cc(),a=function(){return Cc()}();return n.forEach((l,u)=>{const f=r.get(u.key);s.has(u.key)&&(f===void 0||f.mutation instanceof Po)?i=i.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),Ic(f.mutation,u,f.mutation.getFieldMask(),At.now())):o.set(u.key,sr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,f)=>o.set(u,f)),n.forEach((u,f)=>{var d;return a.set(u,new p5(f,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Cc();let s=new yt((o,a)=>o-a),i=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let f=r.get(l)||sr.empty();f=a.applyToLocalView(u,f),r.set(l,f);const d=(s.get(a.batchId)||Fe()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,f=l.value,d=uA();f.forEach(h=>{if(!i.has(h)){const g=mA(n.get(h),r.get(h));g!==null&&d.set(h,g),i=i.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ve.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Qw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):G.resolve(Yo());let a=-1,l=i;return o.next(u=>G.forEach(u,(f,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(f)?G.resolve():this.remoteDocumentCache.getEntry(e,f).next(h=>{l=l.insert(f,h)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Fe())).next(f=>({batchId:a,changes:lA(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next(r=>{let s=ac();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ac();return this.indexManager.getCollectionParents(e,i).next(a=>G.forEach(a,l=>{const u=function(d,h){return new Oa(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(f=>{f.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,wn.newInvalidDocument(f)))});let a=ac();return o.forEach((l,u)=>{const f=i.get(l);f!==void 0&&Ic(f.mutation,u,sr.empty(),At.now()),xm(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return G.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:vs(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:c5(s.bundledQuery),readTime:vs(s.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(){this.overlays=new yt(ve.comparator),this.Ir=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yo();return G.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const s=Yo(),i=n.length+1,o=new ve(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new yt((u,f)=>u-f);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=i.get(u.largestBatchId);f===null&&(f=Yo(),i=i.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const a=Yo(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,f)=>a.set(u,f)),!(a.size()>=s)););return G.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new U$(n,r));let i=this.Ir.get(n);i===void 0&&(i=Fe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(){this.Tr=new an(qt.Er),this.dr=new an(qt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new qt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new qt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ve(new nt([])),r=new qt(n,e),s=new qt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ve(new nt([])),r=new qt(n,e),s=new qt(n,e+1);let i=Fe();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new qt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ve.comparator(e.key,n.key)||qe(e.wr,n.wr)}static Ar(e,n){return qe(e.wr,n.wr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new an(qt.Er)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new F$(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new qt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qt(n,0),s=new qt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new an(qe);return n.forEach(s=>{const i=new qt(s,0),o=new qt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),G.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ve.isDocumentKey(i)||(i=i.child(""));const o=new qt(new ve(i),0);let a=new an(qe);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.wr)),!0)},o),G.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Xe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return G.forEach(n.mutations,s=>{const i=new qt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new qt(n,0),s=this.br.firstAfterOrEqual(r);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e){this.Mr=e,this.docs=function(){return new yt(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(n))}getEntries(e,n){let r=fi();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():wn.newInvalidDocument(s))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=fi();const o=n.path,a=new ve(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||n$(t$(f),r)<=0||(s.has(f.key)||xm(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Se()}Or(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new x5(this)}getSize(e){return G.resolve(this.size)}}class x5 extends h5{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(e){this.persistence=e,this.Nr=new Eu(n=>Gw(n),Kw),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new e0,this.targetCount=0,this.kr=ru.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),G.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ru(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Kn(n),G.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),G.waitFor(i).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Ww(0),this.Kr=!1,this.Kr=!0,this.$r=new v5,this.referenceDelegate=e(this),this.Ur=new E5(this),this.indexManager=new d5,this.remoteDocumentCache=function(s){return new w5(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new u5(n),this.Gr=new g5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new y5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new _5(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){me("MemoryPersistence","Starting transaction:",e);const s=new T5(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return G.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class T5 extends s${constructor(e){super(),this.currentSequenceNumber=e}}class t0{constructor(e){this.persistence=e,this.Jr=new e0,this.Yr=null}static Zr(e){return new t0(e)}get Xr(){if(this.Yr)return this.Yr;throw Se()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),G.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,r=>{const s=ve.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Re.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return G.or([()=>G.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Fe(),s=Fe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new n0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Ej()?8:i$(Tn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new S5;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Gu()<=$e.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Xa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(Gu()<=$e.DEBUG&&me("QueryEngine","Query:",Xa(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Gu()<=$e.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Xa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ys(n))):G.resolve())}Yi(e,n){if(yT(n))return G.resolve(null);let r=ys(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=_p(n,null,"F"),r=ys(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Fe(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,_p(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,s){return yT(n)||s.isEqual(Re.min())?G.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?G.resolve(null):(Gu()<=$e.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Xa(n)),this.rs(e,o,n,e$(s,-1)).next(a=>a))})}ts(e,n){let r=new an(oA(e));return n.forEach((s,i)=>{xm(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Gu()<=$e.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Xa(n)),this.Ji.getDocumentsMatchingQuery(e,n,vo.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new yt(qe),this._s=new Eu(i=>Gw(i),Kw),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new m5(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function R5(t,e,n,r){return new I5(t,e,n,r)}async function IA(t,e){const n=ke(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Fe();for(const u of s){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of i){a.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function k5(t,e){const n=ke(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,f){const d=u.batch,h=d.keys();let g=G.resolve();return h.forEach(_=>{g=g.next(()=>f.getEntry(l,_)).next(E=>{const x=u.docVersions.get(_);Xe(x!==null),E.version.compareTo(x)<0&&(d.applyToRemoteDocument(E,u),E.isValidDocument()&&(E.setReadTime(u.commitVersion),f.addEntry(E)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Fe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function RA(t){const e=ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function A5(t,e){const n=ke(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((f,d)=>{const h=s.get(d);if(!h)return;a.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,d)));let g=h.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(un.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):f.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(f.resumeToken,r)),s=s.insert(d,g),function(E,x,v){return E.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(h,g,f)&&a.push(n.Ur.updateTargetData(i,g))});let l=fi(),u=Fe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),a.push(P5(i,o,e.documentUpdates).next(f=>{l=f.Ps,u=f.Is})),!r.isEqual(Re.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(d=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(f)}return G.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.os=s,i))}function P5(t,e,n){let r=Fe(),s=Fe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=fi();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Re.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):me("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function N5(t,e){const n=ke(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function D5(t,e){const n=ke(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,G.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new to(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Gv(t,e,n){const r=ke(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!zd(o))throw o;me("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function RT(t,e,n){const r=ke(t);let s=Re.min(),i=Fe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,f){const d=ke(l),h=d._s.get(f);return h!==void 0?G.resolve(d.os.get(h)):d.Ur.getTargetData(u,f)}(r,o,ys(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Re.min(),n?i:Fe())).next(a=>(O5(r,b$(e),a),{documents:a,Ts:i})))}function O5(t,e,n){let r=t.us.get(e)||Re.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class kT{constructor(){this.activeTargetIds=k$()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class M5{constructor(){this.so=new kT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new kT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kf=null;function Kg(){return Kf===null?Kf=function(){return 268435456+Math.round(2147483648*Math.random())}():Kf++,"0x"+Kf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="WebChannelConnection";class F5 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Kg(),l=this.xo(n,r.toUriEncodedString());me("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,i,o),this.No(n,l,u,s).then(f=>(me("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw Xl("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",l,"request:",s),f})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=j5[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Kg();return new Promise((o,a)=>{const l=new zk;l.setWithCredentials(!0),l.listenOnce(Wk.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ch.NO_ERROR:const f=l.getResponseJson();me(mn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case Ch.TIMEOUT:me(mn,`RPC '${e}' ${i} timed out`),a(new ee(W.DEADLINE_EXCEEDED,"Request time out"));break;case Ch.HTTP_ERROR:const d=l.getStatus();if(me(mn,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const g=h==null?void 0:h.error;if(g&&g.status&&g.message){const _=function(x){const v=x.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(v)>=0?v:W.UNKNOWN}(g.status);a(new ee(_,g.message))}else a(new ee(W.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ee(W.UNAVAILABLE,"Connection failed."));break;default:Se()}}finally{me(mn,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);me(mn,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const s=Kg(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Gk(),a=qk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const f=i.join("");me(mn,`Creating RPC '${e}' stream ${s}: ${f}`,l);const d=o.createWebChannel(f,l);let h=!1,g=!1;const _=new V5({Io:x=>{g?me(mn,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(h||(me(mn,`Opening RPC '${e}' stream ${s} transport.`),d.open(),h=!0),me(mn,`RPC '${e}' stream ${s} sending:`,x),d.send(x))},To:()=>d.close()}),E=(x,v,b)=>{x.listen(v,T=>{try{b(T)}catch(A){setTimeout(()=>{throw A},0)}})};return E(d,oc.EventType.OPEN,()=>{g||(me(mn,`RPC '${e}' stream ${s} transport opened.`),_.yo())}),E(d,oc.EventType.CLOSE,()=>{g||(g=!0,me(mn,`RPC '${e}' stream ${s} transport closed`),_.So())}),E(d,oc.EventType.ERROR,x=>{g||(g=!0,Xl(mn,`RPC '${e}' stream ${s} transport errored:`,x),_.So(new ee(W.UNAVAILABLE,"The operation could not be completed")))}),E(d,oc.EventType.MESSAGE,x=>{var v;if(!g){const b=x.data[0];Xe(!!b);const T=b,A=T.error||((v=T[0])===null||v===void 0?void 0:v.error);if(A){me(mn,`RPC '${e}' stream ${s} received error:`,A);const O=A.status;let V=function(R){const k=Dt[R];if(k!==void 0)return yA(k)}(O),C=A.message;V===void 0&&(V=W.INTERNAL,C="Unknown error status: "+O+" with message "+A.message),g=!0,_.So(new ee(V,C)),d.close()}else me(mn,`RPC '${e}' stream ${s} received:`,b),_.bo(b)}}),E(a,Hk.STAT_EVENT,x=>{x.stat===jv.PROXY?me(mn,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===jv.NOPROXY&&me(mn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function Qg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t){return new Q$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&me("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new kA(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(di(n.toString()),di("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new ee(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class U5 extends AA{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=X$(this.serializer,e),r=function(i){if(!("targetChange"in i))return Re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Re.min():o.readTime?vs(o.readTime):Re.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=qv(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=$v(l)?{documents:t5(i,l)}:{query:n5(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=wA(i,o.resumeToken);const u=zv(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Re.min())>0){a.readTime=xp(i,o.snapshotVersion.toTimestamp());const u=zv(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=s5(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=qv(this.serializer),n.removeTarget=e,this.a_(n)}}class $5 extends AA{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=e5(e.writeResults,e.commitTime),r=vs(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=qv(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>J$(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ee(W.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Wv(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ee(W.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Wv(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(W.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class z5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(di(n),this.D_=!1):me("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ma(this)&&(me("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ke(l);u.L_.add(4),await qd(u),u.q_.set("Unknown"),u.L_.delete(4),await Im(u)}(this))})}),this.q_=new z5(r,s)}}async function Im(t){if(Ma(t))for(const e of t.B_)await e(!0)}async function qd(t){for(const e of t.B_)await e(!1)}function PA(t,e){const n=ke(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),o0(n)?i0(n):bu(n).r_()&&s0(n,e))}function r0(t,e){const n=ke(t),r=bu(n);n.N_.delete(e),r.r_()&&NA(n,e),n.N_.size===0&&(r.r_()?r.o_():Ma(n)&&n.q_.set("Unknown"))}function s0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bu(t).A_(e)}function NA(t,e){t.Q_.xe(e),bu(t).R_(e)}function i0(t){t.Q_=new H$({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),bu(t).start(),t.q_.v_()}function o0(t){return Ma(t)&&!bu(t).n_()&&t.N_.size>0}function Ma(t){return ke(t).L_.size===0}function DA(t){t.Q_=void 0}async function H5(t){t.q_.set("Online")}async function q5(t){t.N_.forEach((e,n)=>{s0(t,e)})}async function G5(t,e){DA(t),o0(t)?(t.q_.M_(e),i0(t)):t.q_.set("Unknown")}async function K5(t,e,n){if(t.q_.set("Online"),e instanceof _A&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ep(t,r)}else if(e instanceof kh?t.Q_.Ke(e):e instanceof vA?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Re.min()))try{const r=await RA(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=i.N_.get(u);f&&i.N_.set(u,f.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const f=i.N_.get(l);if(!f)return;i.N_.set(l,f.withResumeToken(un.EMPTY_BYTE_STRING,f.snapshotVersion)),NA(i,l);const d=new to(f.target,l,u,f.sequenceNumber);s0(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){me("RemoteStore","Failed to raise snapshot:",r),await Ep(t,r)}}async function Ep(t,e,n){if(!zd(e))throw e;t.L_.add(1),await qd(t),t.q_.set("Offline"),n||(n=()=>RA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{me("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Im(t)})}function OA(t,e){return e().catch(n=>Ep(t,n,e))}async function Rm(t){const e=ke(t),n=wo(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Q5(e);)try{const s=await N5(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,Y5(e,s)}catch(s){await Ep(e,s)}MA(e)&&LA(e)}function Q5(t){return Ma(t)&&t.O_.length<10}function Y5(t,e){t.O_.push(e);const n=wo(t);n.r_()&&n.V_&&n.m_(e.mutations)}function MA(t){return Ma(t)&&!wo(t).n_()&&t.O_.length>0}function LA(t){wo(t).start()}async function Z5(t){wo(t).p_()}async function X5(t){const e=wo(t);for(const n of t.O_)e.m_(n.mutations)}async function J5(t,e,n){const r=t.O_.shift(),s=Zw.from(r,e,n);await OA(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Rm(t)}async function e9(t,e){e&&wo(t).V_&&await async function(r,s){if(function(o){return B$(o)&&o!==W.ABORTED}(s.code)){const i=r.O_.shift();wo(r).s_(),await OA(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Rm(r)}}(t,e),MA(t)&&LA(t)}async function PT(t,e){const n=ke(t);n.asyncQueue.verifyOperationInProgress(),me("RemoteStore","RemoteStore received new credentials");const r=Ma(n);n.L_.add(3),await qd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Im(n)}async function t9(t,e){const n=ke(t);e?(n.L_.delete(2),await Im(n)):e||(n.L_.add(2),await qd(n),n.q_.set("Unknown"))}function bu(t){return t.K_||(t.K_=function(n,r,s){const i=ke(n);return i.w_(),new U5(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:H5.bind(null,t),Ro:q5.bind(null,t),mo:G5.bind(null,t),d_:K5.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),o0(t)?i0(t):t.q_.set("Unknown")):(await t.K_.stop(),DA(t))})),t.K_}function wo(t){return t.U_||(t.U_=function(n,r,s){const i=ke(n);return i.w_(),new $5(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Z5.bind(null,t),mo:e9.bind(null,t),f_:X5.bind(null,t),g_:J5.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Rm(t)):(await t.U_.stop(),t.O_.length>0&&(me("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new a0(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function l0(t,e){if(di("AsyncQueue",`${e}: ${t}`),zd(t))return new ee(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ve.comparator(n.key,r.key):(n,r)=>ve.comparator(n.key,r.key),this.keyedMap=ac(),this.sortedSet=new yt(this.comparator)}static emptySet(e){return new Cl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Cl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Cl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(){this.W_=new yt(ve.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Se():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class su{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new su(e,n,Cl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class r9{constructor(){this.queries=DT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ke(n),i=s.queries;s.queries=DT(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ee(W.ABORTED,"Firestore shutting down"))}}function DT(){return new Eu(t=>iA(t),wm)}async function u0(t,e){const n=ke(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new n9,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=l0(o,`Initialization of query '${Xa(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&d0(n)}async function c0(t,e){const n=ke(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function s9(t,e){const n=ke(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&d0(n)}function i9(t,e,n){const r=ke(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function d0(t){t.Y_.forEach(e=>{e.next()})}var Kv,OT;(OT=Kv||(Kv={})).ea="default",OT.Cache="cache";class f0{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new su(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=su.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Kv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.key=e}}class VA{constructor(e){this.key=e}}class o9{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Fe(),this.mutatedKeys=Fe(),this.Aa=oA(e),this.Ra=new Cl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new NT,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,d)=>{const h=s.get(f),g=xm(this.query,d)?d:null,_=!!h&&this.mutatedKeys.has(h.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let x=!1;h&&g?h.data.isEqual(g.data)?_!==E&&(r.track({type:3,doc:g}),x=!0):this.ga(h,g)||(r.track({type:2,doc:g}),x=!0,(l&&this.Aa(g,l)>0||u&&this.Aa(g,u)<0)&&(a=!0)):!h&&g?(r.track({type:0,doc:g}),x=!0):h&&!g&&(r.track({type:1,doc:h}),x=!0,(l||u)&&(a=!0)),x&&(g?(o=o.add(g),i=E?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,d)=>function(g,_){const E=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se()}};return E(g)-E(_)}(f.type,d.type)||this.Aa(f.doc,d.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new su(this.query,e.Ra,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new NT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Fe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new VA(r))}),this.da.forEach(r=>{e.has(r)||n.push(new jA(r))}),n}ba(e){this.Ta=e.Ts,this.da=Fe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return su.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class a9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class l9{constructor(e){this.key=e,this.va=!1}}class u9{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Eu(a=>iA(a),wm),this.Ma=new Map,this.xa=new Set,this.Oa=new yt(ve.comparator),this.Na=new Map,this.La=new e0,this.Ba={},this.ka=new Map,this.qa=ru.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function c9(t,e,n=!0){const r=WA(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await FA(r,e,n,!0),s}async function d9(t,e){const n=WA(t);await FA(n,e,!0,!1)}async function FA(t,e,n,r){const s=await D5(t.localStore,ys(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await f9(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&PA(t.remoteStore,s),a}async function f9(t,e,n,r,s){t.Ka=(d,h,g)=>async function(E,x,v,b){let T=x.view.ma(v);T.ns&&(T=await RT(E.localStore,x.query,!1).then(({documents:C})=>x.view.ma(C,T)));const A=b&&b.targetChanges.get(x.targetId),O=b&&b.targetMismatches.get(x.targetId)!=null,V=x.view.applyChanges(T,E.isPrimaryClient,A,O);return LT(E,x.targetId,V.wa),V.snapshot}(t,d,h,g);const i=await RT(t.localStore,e,!0),o=new o9(e,i.Ts),a=o.ma(i.documents),l=Hd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);LT(t,n,u.wa);const f=new a9(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function h9(t,e,n){const r=ke(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!wm(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Gv(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&r0(r.remoteStore,s.targetId),Qv(r,s.targetId)}).catch(Bd)):(Qv(r,s.targetId),await Gv(r.localStore,s.targetId,!0))}async function p9(t,e){const n=ke(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),r0(n.remoteStore,r.targetId))}async function m9(t,e,n){const r=E9(t);try{const s=await function(o,a){const l=ke(o),u=At.now(),f=a.reduce((g,_)=>g.add(_.key),Fe());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=fi(),E=Fe();return l.cs.getEntries(g,f).next(x=>{_=x,_.forEach((v,b)=>{b.isValidDocument()||(E=E.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,_)).next(x=>{d=x;const v=[];for(const b of a){const T=j$(b,d.get(b.key).overlayedDocument);T!=null&&v.push(new Po(b.key,T,Xk(T.value.mapValue),On.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,v,a)}).next(x=>{h=x;const v=x.applyToLocalDocumentSet(d,E);return l.documentOverlayCache.saveOverlays(g,x.batchId,v)})}).then(()=>({batchId:h.batchId,changes:lA(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new yt(qe)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,s.batchId,n),await Gd(r,s.changes),await Rm(r.remoteStore)}catch(s){const i=l0(s,"Failed to persist write");n.reject(i)}}async function UA(t,e){const n=ke(t);try{const r=await A5(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Xe(o.va):s.removedDocuments.size>0&&(Xe(o.va),o.va=!1))}),await Gd(n,r,e)}catch(r){await Bd(r)}}function MT(t,e,n){const r=ke(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ke(o);l.onlineState=a;let u=!1;l.queries.forEach((f,d)=>{for(const h of d.j_)h.Z_(a)&&(u=!0)}),u&&d0(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function g9(t,e,n){const r=ke(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new yt(ve.comparator);o=o.insert(i,wn.newNoDocument(i,Re.min()));const a=Fe().add(i),l=new Sm(Re.min(),new Map,new yt(qe),o,a);await UA(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),h0(r)}else await Gv(r.localStore,e,!1).then(()=>Qv(r,e,n)).catch(Bd)}async function y9(t,e){const n=ke(t),r=e.batch.batchId;try{const s=await k5(n.localStore,e);BA(n,r,null),$A(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gd(n,s)}catch(s){await Bd(s)}}async function v9(t,e,n){const r=ke(t);try{const s=await function(o,a){const l=ke(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(Xe(d!==null),f=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>l.localDocuments.getDocuments(u,f))})}(r.localStore,e);BA(r,e,n),$A(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Gd(r,s)}catch(s){await Bd(s)}}function $A(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function BA(t,e,n){const r=ke(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Qv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||zA(t,r)})}function zA(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(r0(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),h0(t))}function LT(t,e,n){for(const r of n)r instanceof jA?(t.La.addReference(r.key,e),_9(t,r)):r instanceof VA?(me("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||zA(t,r.key)):Se()}function _9(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(me("SyncEngine","New document in limbo: "+n),t.xa.add(r),h0(t))}function h0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ve(nt.fromString(e)),r=t.qa.next();t.Na.set(r,new l9(n)),t.Oa=t.Oa.insert(n,r),PA(t.remoteStore,new to(ys(_m(n.path)),r,"TargetPurposeLimboResolution",Ww.oe))}}async function Gd(t,e,n){const r=ke(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var f;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(f=n==null?void 0:n.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){s.push(u);const d=n0.Wi(l.targetId,u);i.push(d)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,u){const f=ke(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>G.forEach(u,h=>G.forEach(h.$i,g=>f.persistence.referenceDelegate.addReference(d,h.targetId,g)).next(()=>G.forEach(h.Ui,g=>f.persistence.referenceDelegate.removeReference(d,h.targetId,g)))))}catch(d){if(!zd(d))throw d;me("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const h=d.targetId;if(!d.fromCache){const g=f.os.get(h),_=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(_);f.os=f.os.insert(h,E)}}}(r.localStore,i))}async function w9(t,e){const n=ke(t);if(!n.currentUser.isEqual(e)){me("SyncEngine","User change. New user:",e.toKey());const r=await IA(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new ee(W.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gd(n,r.hs)}}function x9(t,e){const n=ke(t),r=n.Na.get(e);if(r&&r.va)return Fe().add(r.key);{let s=Fe();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function WA(t){const e=ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=UA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g9.bind(null,e),e.Ca.d_=s9.bind(null,e.eventManager),e.Ca.$a=i9.bind(null,e.eventManager),e}function E9(t){const e=ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v9.bind(null,e),e}class bp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cm(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return R5(this.persistence,new C5,e.initialUser,this.serializer)}Ga(e){return new b5(t0.Zr,this.serializer)}Wa(e){return new M5}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bp.provider={build:()=>new bp};class Yv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>MT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=w9.bind(null,this.syncEngine),await t9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new r9}()}createDatastore(e){const n=Cm(e.databaseInfo.databaseId),r=function(i){return new F5(i)}(e.databaseInfo);return function(i,o,a,l){return new B5(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new W5(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>MT(this.syncEngine,n,0),function(){return AT.D()?new AT:new L5}())}createSyncEngine(e,n){return function(s,i,o,a,l,u,f){const d=new u9(s,i,o,a,l,u);return f&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ke(s);me("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await qd(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Yv.provider={build:()=>new Yv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):di("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=vn.UNAUTHENTICATED,this.clientId=Qk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{me("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(me("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=l0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Yg(t,e){t.asyncQueue.verifyOperationInProgress(),me("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await IA(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await T9(t);me("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>PT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>PT(e.remoteStore,s)),t._onlineComponents=e}async function T9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){me("FirestoreClient","Using user provided OfflineComponentProvider");try{await Yg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===W.FAILED_PRECONDITION||s.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Xl("Error using user provided cache. Falling back to memory cache: "+n),await Yg(t,new bp)}}else me("FirestoreClient","Using default OfflineComponentProvider"),await Yg(t,new bp);return t._offlineComponents}async function HA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(me("FirestoreClient","Using user provided OnlineComponentProvider"),await jT(t,t._uninitializedComponentsProvider._online)):(me("FirestoreClient","Using default OnlineComponentProvider"),await jT(t,new Yv))),t._onlineComponents}function S9(t){return HA(t).then(e=>e.syncEngine)}async function Tp(t){const e=await HA(t),n=e.eventManager;return n.onListen=c9.bind(null,e.syncEngine),n.onUnlisten=h9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=d9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=p9.bind(null,e.syncEngine),n}function C9(t,e,n={}){const r=new ti;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const f=new p0({next:h=>{f.Za(),o.enqueueAndForget(()=>c0(i,d));const g=h.docs.has(a);!g&&h.fromCache?u.reject(new ee(W.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&h.fromCache&&l&&l.source==="server"?u.reject(new ee(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new f0(_m(a.path),f,{includeMetadataChanges:!0,_a:!0});return u0(i,d)}(await Tp(t),t.asyncQueue,e,n,r)),r.promise}function I9(t,e,n={}){const r=new ti;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const f=new p0({next:h=>{f.Za(),o.enqueueAndForget(()=>c0(i,d)),h.fromCache&&l.source==="server"?u.reject(new ee(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new f0(a,f,{includeMetadataChanges:!0,_a:!0});return u0(i,d)}(await Tp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t,e,n){if(!n)throw new ee(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function R9(t,e,n,r){if(e===!0&&r===!0)throw new ee(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function FT(t){if(!ve.isDocumentKey(t))throw new ee(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function UT(t){if(ve.isDocumentKey(t))throw new ee(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function km(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Se()}function Mn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=km(t);throw new ee(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function k9(t,e){if(e<=0)throw new ee(W.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}R9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ee(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ee(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ee(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Am{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $T({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $T(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new HU;switch(r.type){case"firstParty":return new QU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=VT.get(n);r&&(me("ComponentProvider","Removing Datastore"),VT.delete(n),r.terminate())}(this),Promise.resolve()}}function A9(t,e,n,r={}){var s;const i=(t=Mn(t,Am))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Xl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=vn.MOCK_USER;else{a=WR(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new ee(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new vn(u)}t._authCredentials=new qU(new Kk(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new As(this.firestore,e,this._query)}}class En{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ho(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}}class ho extends As{constructor(e,n,r){super(e,n,_m(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new ve(e))}withConverter(e){return new ho(this.firestore,e,this._path)}}function Vt(t,e,...n){if(t=at(t),GA("collection","path",e),t instanceof Am){const r=nt.fromString(e,...n);return UT(r),new ho(t,null,r)}{if(!(t instanceof En||t instanceof ho))throw new ee(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(nt.fromString(e,...n));return UT(r),new ho(t.firestore,null,r)}}function jt(t,e,...n){if(t=at(t),arguments.length===1&&(e=Qk.newId()),GA("doc","path",e),t instanceof Am){const r=nt.fromString(e,...n);return FT(r),new En(t,null,new ve(r))}{if(!(t instanceof En||t instanceof ho))throw new ee(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(nt.fromString(e,...n));return FT(r),new En(t.firestore,t instanceof ho?t.converter:null,new ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new kA(this,"async_queue_retry"),this.Vu=()=>{const r=Qg();r&&me("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Qg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Qg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ti;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!zd(e))throw e;me("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw di("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=a0.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Se()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function zT(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class bs extends Am{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new BT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new BT(e),this._firestoreClient=void 0,await e}}}function KA(t,e){const n=typeof t=="object"?t:dm(),r=typeof t=="string"?t:"(default)",s=cm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=$R("firestore");i&&A9(s,...i)}return s}function Kd(t){if(t._terminated)throw new ee(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||P9(t),t._firestoreClient}function P9(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,u,f){return new l$(a,l,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,qA(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new b9(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new iu(un.fromBase64String(e))}catch(n){throw new ee(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new iu(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9=/^__.*__$/;class D9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Po(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wd(e,this.data,n,this.fieldTransforms)}}class QA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Po(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function YA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se()}}class y0{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new y0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Sp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(YA(this.Cu)&&N9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class O9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cm(e)}Qu(e,n,r,s=!1){return new y0({Cu:e,methodName:n,qu:r,path:sn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tu(t){const e=t._freezeSettings(),n=Cm(t._databaseId);return new O9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function v0(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);w0("Data must be an object, but it was:",o,r);const a=e1(r,o);let l,u;if(i.merge)l=new sr(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const d of i.mergeFields){const h=Zv(e,d,n);if(!o.contains(h))throw new ee(W.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);n1(f,h)||f.push(h)}l=new sr(f),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new D9(new Gn(a),l,u)}class Nm extends Pm{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nm}}class _0 extends Pm{_toFieldTransform(e){return new D$(e.path,new sd)}isEqual(e){return e instanceof _0}}function ZA(t,e,n,r){const s=t.Qu(1,e,n);w0("Data must be an object, but it was:",s,r);const i=[],o=Gn.empty();Da(r,(l,u)=>{const f=x0(e,l,n);u=at(u);const d=s.Nu(f);if(u instanceof Nm)i.push(f);else{const h=Yd(u,d);h!=null&&(i.push(f),o.set(f,h))}});const a=new sr(i);return new QA(o,a,s.fieldTransforms)}function XA(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[Zv(e,r,n)],l=[s];if(i.length%2!=0)throw new ee(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)a.push(Zv(e,i[h])),l.push(i[h+1]);const u=[],f=Gn.empty();for(let h=a.length-1;h>=0;--h)if(!n1(u,a[h])){const g=a[h];let _=l[h];_=at(_);const E=o.Nu(g);if(_ instanceof Nm)u.push(g);else{const x=Yd(_,E);x!=null&&(u.push(g),f.set(g,x))}}const d=new sr(u);return new QA(f,d,o.fieldTransforms)}function JA(t,e,n,r=!1){return Yd(n,t.Qu(r?4:3,e))}function Yd(t,e){if(t1(t=at(t)))return w0("Unsupported field value:",e,t),e1(t,e);if(t instanceof Pm)return function(r,s){if(!YA(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Yd(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return A$(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=At.fromDate(r);return{timestampValue:xp(s.serializer,i)}}if(r instanceof At){const i=new At(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xp(s.serializer,i)}}if(r instanceof m0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof iu)return{bytesValue:wA(s.serializer,r._byteString)};if(r instanceof En){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Jw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof g0)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Yw(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${km(r)}`)}(t,e)}function e1(t,e){const n={};return Yk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Da(t,(r,s)=>{const i=Yd(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function t1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof At||t instanceof m0||t instanceof iu||t instanceof En||t instanceof Pm||t instanceof g0)}function w0(t,e,n){if(!t1(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=km(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Zv(t,e,n){if((e=at(e))instanceof Qd)return e._internalPath;if(typeof e=="string")return x0(t,e);throw Sp("Field path arguments must be of type string or ",t,!1,void 0,n)}const M9=new RegExp("[~\\*/\\[\\]]");function x0(t,e,n){if(e.search(M9)>=0)throw Sp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qd(...e.split("."))._internalPath}catch{throw Sp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sp(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new ee(W.INVALID_ARGUMENT,a+t+l)}function n1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new L9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Dm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class L9 extends E0{data(){return super.data()}}function Dm(t,e){return typeof e=="string"?x0(t,e):e instanceof Qd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class b0{}class Om extends b0{}function po(t,e,...n){let r=[];e instanceof b0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof T0).length,a=i.filter(l=>l instanceof Mm).length;if(o>1||o>0&&a>0)throw new ee(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Mm extends Om{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mm(e,n,r)}_apply(e){const n=this._parse(e);return s1(e._query,n),new As(e.firestore,e.converter,Bv(e._query,n))}_parse(e){const n=Tu(e.firestore);return function(i,o,a,l,u,f,d){let h;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new ee(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){qT(d,f);const g=[];for(const _ of d)g.push(HT(l,i,_));h={arrayValue:{values:g}}}else h=HT(l,i,d)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||qT(d,f),h=JA(a,o,d,f==="in"||f==="not-in");return Lt.create(u,f,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Wn(t,e,n){const r=e,s=Dm("where",t);return Mm._create(s,r,n)}class T0 extends b0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new T0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:zr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)s1(o,l),o=Bv(o,l)}(e._query,n),new As(e.firestore,e.converter,Bv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class S0 extends Om{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new S0(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new ee(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ee(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rd(i,o)}(e._query,this._field,this._direction);return new As(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Oa(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Cp(t,e="asc"){const n=e,r=Dm("orderBy",t);return S0._create(r,n)}class C0 extends Om{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new C0(e,n,r)}_apply(e){return new As(e.firestore,e.converter,_p(e._query,this._limit,this._limitType))}}function Xv(t){return k9("limit",t),C0._create("limit",t,"F")}class I0 extends Om{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new I0(e,n,r)}_apply(e){const n=j9(e,this.type,this._docOrFields,this._inclusive);return new As(e.firestore,e.converter,function(s,i){return new Oa(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function WT(...t){return I0._create("startAfter",t,!1)}function j9(t,e,n,r){if(n[0]=at(n[0]),n[0]instanceof E0)return function(i,o,a,l,u){if(!l)throw new ee(W.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const d of Sl(i))if(d.field.isKeyField())f.push(vp(o,l.key));else{const h=l.data.field(d.field);if(vm(h))throw new ee(W.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const g=d.field.canonicalString();throw new ee(W.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}f.push(h)}return new nu(f,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Tu(t.firestore);return function(o,a,l,u,f,d){const h=o.explicitOrderBy;if(f.length>h.length)throw new ee(W.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let _=0;_<f.length;_++){const E=f[_];if(h[_].field.isKeyField()){if(typeof E!="string")throw new ee(W.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof E}`);if(!Qw(o)&&E.indexOf("/")!==-1)throw new ee(W.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${E}' contains a slash.`);const x=o.path.child(nt.fromString(E));if(!ve.isDocumentKey(x))throw new ee(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const v=new ve(x);g.push(vp(a,v))}else{const x=JA(l,u,E);g.push(x)}}return new nu(g,d)}(t._query,t.firestore._databaseId,s,e,n,r)}}function HT(t,e,n){if(typeof(n=at(n))=="string"){if(n==="")throw new ee(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qw(e)&&n.indexOf("/")!==-1)throw new ee(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(nt.fromString(n));if(!ve.isDocumentKey(r))throw new ee(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vp(t,new ve(r))}if(n instanceof En)return vp(t,n._key);throw new ee(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${km(n)}.`)}function qT(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function s1(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class V9{convertValue(e,n="none"){switch(ba(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Se()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Da(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>It(o.doubleValue));return new g0(i)}convertGeoPoint(e){return new m0(It(e.latitude),It(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Hw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ed(e));default:return null}}convertTimestamp(e){const n=_o(e);return new At(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=nt.fromString(e);Xe(CA(r));const s=new td(r.get(1),r.get(3)),i=new ve(r.popFirst(5));return s.isEqual(n)||di(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class i1 extends E0{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ah(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Dm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ah extends i1{data(e={}){return super.data(e)}}class o1{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new uc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ah(this._firestore,this._userDataWriter,r.key,r,new uc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Ah(s._firestore,s._userDataWriter,a.doc.key,a.doc,new uc(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Ah(s._firestore,s._userDataWriter,a.doc.key,a.doc,new uc(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,f=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:F9(a.type),doc:l,oldIndex:u,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function F9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t){t=Mn(t,En);const e=Mn(t.firestore,bs);return C9(Kd(e),t._key).then(n=>l1(e,t,n))}class k0 extends V9{constructor(e){super(),this.firestore=e}convertBytes(e){return new iu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,n)}}function ar(t){t=Mn(t,As);const e=Mn(t.firestore,bs),n=Kd(e),r=new k0(e);return r1(t._query),I9(n,t._query).then(s=>new o1(e,r,t,s))}function Jv(t,e,n){t=Mn(t,En);const r=Mn(t.firestore,bs),s=R0(t.converter,e,n);return Zd(r,[v0(Tu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,On.none())])}function ou(t,e,n,...r){t=Mn(t,En);const s=Mn(t.firestore,bs),i=Tu(s);let o;return o=typeof(e=at(e))=="string"||e instanceof Qd?XA(i,"updateDoc",t._key,e,n,r):ZA(i,"updateDoc",t._key,e),Zd(s,[o.toMutation(t._key,On.exists(!0))])}function Ts(t){return Zd(Mn(t.firestore,bs),[new Tm(t._key,On.none())])}function La(t,e){const n=Mn(t.firestore,bs),r=jt(t),s=R0(t.converter,e);return Zd(n,[v0(Tu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,On.exists(!1))]).then(()=>r)}function a1(t,...e){var n,r,s;t=at(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||zT(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(zT(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,u,f;if(t instanceof En)u=Mn(t.firestore,bs),f=_m(t._key.path),l={next:d=>{e[o]&&e[o](l1(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Mn(t,As);u=Mn(d.firestore,bs),f=d._query;const h=new k0(u);l={next:g=>{e[o]&&e[o](new o1(u,h,d,g))},error:e[o+1],complete:e[o+2]},r1(t._query)}return function(h,g,_,E){const x=new p0(E),v=new f0(g,x,_);return h.asyncQueue.enqueueAndForget(async()=>u0(await Tp(h),v)),()=>{x.Za(),h.asyncQueue.enqueueAndForget(async()=>c0(await Tp(h),v))}}(Kd(u),f,a,l)}function Zd(t,e){return function(r,s){const i=new ti;return r.asyncQueue.enqueueAndForget(async()=>m9(await S9(r),s,i)),i.promise}(Kd(t),e)}function l1(t,e,n){const r=n.docs.get(e._key),s=new k0(t);return new i1(t,s,e._key,r,new uc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Tu(e)}set(e,n,r){this._verifyNotCommitted();const s=Zg(e,this._firestore),i=R0(s.converter,n,r),o=v0(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,On.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Zg(e,this._firestore);let o;return o=typeof(n=at(n))=="string"||n instanceof Qd?XA(this._dataReader,"WriteBatch.update",i._key,n,r,s):ZA(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,On.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Zg(e,this._firestore);return this._mutations=this._mutations.concat(new Tm(n._key,On.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ee(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zg(t,e){if((t=at(t)).firestore!==e)throw new ee(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function ad(){return new _0("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(t){return Kd(t=Mn(t,bs)),new U9(t,e=>Zd(t,e))}(function(e,n=!0){(function(s){xu=s})(Na),ya(new yo("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new bs(new GU(r.getProvider("auth-internal")),new ZU(r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ee(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new td(u.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),ms(aT,"4.7.3",e),ms(aT,"4.7.3","esm2017")})();var $9="firebase",B9="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms($9,B9,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="firebasestorage.googleapis.com",c1="storageBucket",z9=2*60*1e3,W9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et extends ks{constructor(e,n,r=0){super(Jg(e),`Firebase Storage: ${n} (${Jg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Et.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var xt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(xt||(xt={}));function Jg(t){return"storage/"+t}function A0(){const t="An unknown error occurred, please check the error payload for server response.";return new Et(xt.UNKNOWN,t)}function H9(t){return new Et(xt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function q9(t){return new Et(xt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function G9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Et(xt.UNAUTHENTICATED,t)}function K9(){return new Et(xt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Q9(t){return new Et(xt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Y9(){return new Et(xt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Z9(){return new Et(xt.CANCELED,"User canceled the upload/download.")}function X9(t){return new Et(xt.INVALID_URL,"Invalid URL '"+t+"'.")}function J9(t){return new Et(xt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function e3(){return new Et(xt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+c1+"' property when initializing the app?")}function t3(){return new Et(xt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function n3(){return new Et(xt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function r3(t){return new Et(xt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function e_(t){return new Et(xt.INVALID_ARGUMENT,t)}function d1(){return new Et(xt.APP_DELETED,"The Firebase app was deleted.")}function s3(t){return new Et(xt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Rc(t,e){return new Et(xt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ku(t){throw new Et(xt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ir.makeFromUrl(e,n)}catch{return new ir(e,"")}if(r.path==="")return r;throw J9(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function u(A){A.path_=decodeURIComponent(A.path)}const f="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${f}/b/${s}/o${h}`,"i"),_={bucket:1,path:3},E=n===u1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",v=new RegExp(`^https?://${E}/${s}/${x}`,"i"),T=[{regex:a,indices:l,postModify:i},{regex:g,indices:_,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let A=0;A<T.length;A++){const O=T[A],V=O.regex.exec(e);if(V){const C=V[O.indices.bucket];let S=V[O.indices.path];S||(S=""),r=new ir(C,S),O.postModify(r);break}}if(r==null)throw X9(e);return r}}class i3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function f(...x){u||(u=!0,e.apply(null,x))}function d(x){s=setTimeout(()=>{s=null,t(g,l())},x)}function h(){i&&clearTimeout(i)}function g(x,...v){if(u){h();return}if(x){h(),f.call(null,x,...v);return}if(l()||o){h(),f.call(null,x,...v);return}r<64&&(r*=2);let T;a===1?(a=2,T=0):T=(r+Math.random())*1e3,d(T)}let _=!1;function E(x){_||(_=!0,h(),!u&&(s!==null?(x||(a=2),clearTimeout(s),d(0)):x||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,E(!0)},n),E}function a3(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(t){return t!==void 0}function u3(t){return typeof t=="object"&&!Array.isArray(t)}function P0(t){return typeof t=="string"||t instanceof String}function GT(t){return N0()&&t instanceof Blob}function N0(){return typeof Blob<"u"}function KT(t,e,n,r){if(r<e)throw e_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw e_(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function f1(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ca;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ca||(ca={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e,n,r,s,i,o,a,l,u,f,d,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,_)=>{this.resolve_=g,this.reject_=_,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Qf(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ca.NO_ERROR,l=i.getStatus();if(!a||c3(l,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===ca.ABORT;r(!1,new Qf(!1,null,f));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Qf(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());l3(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=A0();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?d1():Z9();o(l)}else{const l=Y9();o(l)}};this.canceled_?n(!1,new Qf(!1,null,!0)):this.backoffId_=o3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&a3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function f3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function h3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function p3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function m3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function g3(t,e,n,r,s,i,o=!0){const a=f1(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return p3(u,e),f3(u,n),h3(u,i),m3(u,r),new d3(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function v3(...t){const e=y3();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(N0())return new Blob(t);throw new Et(xt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function _3(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(t){if(typeof atob>"u")throw r3("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ey{constructor(e,n){this.data=e,this.contentType=n||null}}function x3(t,e){switch(t){case ds.RAW:return new ey(h1(e));case ds.BASE64:case ds.BASE64URL:return new ey(p1(t,e));case ds.DATA_URL:return new ey(b3(e),T3(e))}throw A0()}function h1(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function E3(t){let e;try{e=decodeURIComponent(t)}catch{throw Rc(ds.DATA_URL,"Malformed data URL.")}return h1(e)}function p1(t,e){switch(t){case ds.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Rc(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ds.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Rc(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=w3(e)}catch(s){throw s.message.includes("polyfill")?s:Rc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class m1{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Rc(ds.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=S3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function b3(t){const e=new m1(t);return e.base64?p1(ds.BASE64,e.rest):E3(e.rest)}function T3(t){return new m1(t).contentType}function S3(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n){let r=0,s="";GT(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(GT(this.data_)){const r=this.data_,s=_3(r,e,n);return s===null?null:new Ui(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ui(r,!0)}}static getBlob(...e){if(N0()){const n=e.map(r=>r instanceof Ui?r.data_:r);return new Ui(v3.apply(null,n))}else{const n=e.map(o=>P0(o)?x3(ds.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Ui(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t){let e;try{e=JSON.parse(t)}catch{return null}return u3(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function I3(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function y1(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(t,e){return e}class Cn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||R3}}let Yf=null;function k3(t){return!P0(t)||t.length<2?t:y1(t)}function v1(){if(Yf)return Yf;const t=[];t.push(new Cn("bucket")),t.push(new Cn("generation")),t.push(new Cn("metageneration")),t.push(new Cn("name","fullPath",!0));function e(i,o){return k3(o)}const n=new Cn("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Cn("size");return s.xform=r,t.push(s),t.push(new Cn("timeCreated")),t.push(new Cn("updated")),t.push(new Cn("md5Hash",null,!0)),t.push(new Cn("cacheControl",null,!0)),t.push(new Cn("contentDisposition",null,!0)),t.push(new Cn("contentEncoding",null,!0)),t.push(new Cn("contentLanguage",null,!0)),t.push(new Cn("contentType",null,!0)),t.push(new Cn("metadata","customMetadata",!0)),Yf=t,Yf}function A3(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new ir(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function P3(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return A3(r,t),r}function _1(t,e,n){const r=g1(e);return r===null?null:P3(t,r,n)}function N3(t,e,n,r){const s=g1(e);if(s===null||!P0(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const f=t.bucket,d=t.fullPath,h="/b/"+o(f)+"/o/"+o(d),g=D0(h,n,r),_=f1({alt:"media",token:u});return g+_})[0]}function D3(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class w1{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t){if(!t)throw A0()}function O3(t,e){function n(r,s){const i=_1(t,s,e);return x1(i!==null),i}return n}function M3(t,e){function n(r,s){const i=_1(t,s,e);return x1(i!==null),N3(i,s,t.host,t._protocol)}return n}function E1(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=K9():s=G9():n.getStatus()===402?s=q9(t.bucket):n.getStatus()===403?s=Q9(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function L3(t){const e=E1(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=H9(t.path)),i.serverResponse=s.serverResponse,i}return n}function j3(t,e,n){const r=e.fullServerUrl(),s=D0(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new w1(s,i,M3(t,n),o);return a.errorHandler=L3(e),a}function V3(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function F3(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=V3(null,e)),r}function U3(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let T="";for(let A=0;A<2;A++)T=T+Math.random().toString().slice(2);return T}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=F3(e,r,s),f=D3(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+l+"--",g=Ui.getBlob(d,r,h);if(g===null)throw t3();const _={name:u.fullPath},E=D0(i,t.host,t._protocol),x="POST",v=t.maxUploadRetryTime,b=new w1(E,x,O3(t,n),v);return b.urlParams=_,b.headers=o,b.body=g.uploadData(),b.errorHandler=E1(e),b}class $3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ca.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ca.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ca.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Ku("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ku("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ku("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ku("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ku("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class B3 extends $3{initXhr(){this.xhr_.responseType="text"}}function b1(){return new B3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n){this._service=e,n instanceof ir?this._location=n:this._location=ir.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ta(e,n)}get root(){const e=new ir(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return y1(this._location.path)}get storage(){return this._service}get parent(){const e=C3(this._location.path);if(e===null)return null;const n=new ir(this._location.bucket,e);return new Ta(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw s3(e)}}function z3(t,e,n){t._throwIfRoot("uploadBytes");const r=U3(t.storage,t._location,v1(),new Ui(e,!0),n);return t.storage.makeRequestWithTokens(r,b1).then(s=>({metadata:s,ref:t}))}function W3(t){t._throwIfRoot("getDownloadURL");const e=j3(t.storage,t._location,v1());return t.storage.makeRequestWithTokens(e,b1).then(n=>{if(n===null)throw n3();return n})}function H3(t,e){const n=I3(t._location.path,e),r=new ir(t._location.bucket,n);return new Ta(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3(t){return/^[A-Za-z]+:\/\//.test(t)}function G3(t,e){return new Ta(t,e)}function T1(t,e){if(t instanceof O0){const n=t;if(n._bucket==null)throw e3();const r=new Ta(n,n._bucket);return e!=null?T1(r,e):r}else return e!==void 0?H3(t,e):t}function K3(t,e){if(e&&q3(e)){if(t instanceof O0)return G3(t,e);throw e_("To use ref(service, url), the first argument must be a Storage instance.")}else return T1(t,e)}function QT(t,e){const n=e==null?void 0:e[c1];return n==null?null:ir.makeFromBucketSpec(n,t)}function Q3(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:WR(s,t.app.options.projectId))}class O0{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=u1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=z9,this._maxUploadRetryTime=W9,this._requests=new Set,s!=null?this._bucket=ir.makeFromBucketSpec(s,this._host):this._bucket=QT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ir.makeFromBucketSpec(this._url,e):this._bucket=QT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){KT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){KT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ta(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new i3(d1());{const o=g3(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const YT="@firebase/storage",ZT="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="storage";function C1(t,e,n){return t=at(t),z3(t,e,n)}function I1(t){return t=at(t),W3(t)}function R1(t,e){return t=at(t),K3(t,e)}function M0(t=dm(),e){t=at(t);const r=cm(t,S1).getImmediate({identifier:e}),s=$R("storage");return s&&Y3(r,...s),r}function Y3(t,e,n,r={}){Q3(t,e,n,r)}function Z3(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new O0(n,r,s,e,Na)}function X3(){ya(new yo(S1,Z3,"PUBLIC").setMultipleInstances(!0)),ms(YT,ZT,""),ms(YT,ZT,"esm2017")}X3();const Ph={apiKey:"AIzaSyAfb2YtBxD5YEWrNpG0J3GN_g0ZfPzsoOE",authDomain:"sports-card-analyzer.firebaseapp.com",projectId:"sports-card-analyzer",storageBucket:"sports-card-analyzer.firebasestorage.app",messagingSenderId:"27312906394",appId:"1:27312906394:web:11296b8bb530daad5a7f23"};console.log("Firebase config:",{projectId:Ph.projectId,hasApiKey:!!Ph.apiKey,hasAuthDomain:!!Ph.authDomain});const L0=Rw(Ph),De=KA(L0);mm(L0);const J3=M0(L0);console.log("Firebase initialized successfully");async function eB(t){try{if(!t.ownerId)throw new Error("Owner ID is required");console.log("addCard: Adding card for user",t.ownerId,t);const e=Vt(De,"users",t.ownerId,"cards");(!t.tags||!Array.isArray(t.tags))&&(t.tags=[]);const n=await La(e,{...t,createdAt:ad(),updatedAt:ad()});return console.log("addCard: Card added successfully with ID",n.id),n.id}catch(e){throw console.error("addCard: Error adding card:",e),e}}async function tB(t){try{console.log("getCards: Fetching cards for user",t);const e=[Vt(De,"users",t,"cards"),Vt(De,"users",t,"collection")];let n=[];console.log("getCards: Trying path users/{uid}/cards");const s=(await ar(e[0])).docs.map(l=>{const u=l.data();return console.log("getCards: Raw card data from cards path:",l.id),(!u.tags||!Array.isArray(u.tags))&&(console.log("getCards: Fixing missing or invalid tags for card",l.id),u.tags=[]),{...u,id:l.id,tags:u.tags||[]}});n=[...n,...s],console.log("getCards: Also trying path users/{uid}/collection");const o=(await ar(e[1])).docs.map(l=>{const u=l.data();return console.log("getCards: Raw card data from collection path:",l.id),(!u.tags||!Array.isArray(u.tags))&&(console.log("getCards: Fixing missing or invalid tags for card",l.id),u.tags=[]),{...u,id:l.id,tags:u.tags||[]}}),a=new Map;return[...s,...o].forEach(l=>{a.has(l.id)||a.set(l.id,l)}),n=Array.from(a.values()),console.log(`getCards: Found ${n.length} cards total from both paths`),n}catch(e){throw console.error("getCards: Error fetching cards:",e),e}}async function nB(t,e){try{console.log("deleteCard: Deleting card",t,"for user",e);const n=[jt(De,"users",e,"cards",t),jt(De,"users",e,"collection",t)];try{(await Ct(n[0])).exists()&&(await Ts(n[0]),console.log("deleteCard: Card deleted from cards path"))}catch(r){console.log("deleteCard: Card not found in cards path or deletion failed",r)}try{(await Ct(n[1])).exists()&&(await Ts(n[1]),console.log("deleteCard: Card deleted from collection path"))}catch(r){console.log("deleteCard: Card not found in collection path or deletion failed",r)}console.log("deleteCard: Card delete operation completed")}catch(n){throw console.error("deleteCard: Error deleting card:",n),n}}function Xd(){const{user:t,loading:e}=Yt(),n=gm(),{data:r,isLoading:s,error:i}=$k({queryKey:["cards",t==null?void 0:t.uid],queryFn:async()=>t!=null&&t.uid?(console.log("useCards: Fetching cards for user",t.uid),tB(t.uid)):(console.log("useCards: No user ID available"),[]),enabled:!!(t!=null&&t.uid)&&!e,retry:1});i&&(console.error("useCards: Error fetching cards:",i),Ae.error("Failed to load cards. Please try again."));const o=Tc({mutationFn:async l=>{if(console.log("useCards: Starting addCard mutation",{card:l}),!(t!=null&&t.uid))throw console.error("useCards: No user ID available for addCard"),new Error("User must be logged in to add cards");try{const u=await eB(l);return console.log("useCards: Successfully added card",{result:u}),u}catch(u){throw console.error("useCards: Error in addCard mutation",{error:u,card:l}),u}},onSuccess:()=>{n.invalidateQueries({queryKey:["cards",t==null?void 0:t.uid]}),Ae.success("Card added successfully")},onError:l=>{console.error("useCards: Error adding card",{error:l}),Ae.error(l instanceof Error?l.message:"Failed to add card")}}),a=Tc({mutationFn:l=>{if(!(t!=null&&t.uid))throw new Error("No user ID available");return nB(l,t.uid)},onSuccess:()=>{n.invalidateQueries({queryKey:["cards"]}),Ae.success("Card deleted successfully")},onError:l=>{console.error("useCards: Error deleting card:",l),Ae.error("Failed to delete card")}});return{data:r,isLoading:s||e,error:i,addCard:o.mutate,deleteCard:a.mutate}}function rB(){var h,g,_;const{data:t=[]}=Xd(),e=t.length,n=t.reduce((E,x)=>E+(x.currentValue||0),0),r=t.reduce((E,x)=>E+(x.pricePaid||0),0),s=n-r,i=r/(e||1),o=r?s/r*100:0,a={};t.forEach(E=>{const x=E.playerName||"Unknown";a[x]=(a[x]||0)+1});const l=((h=Object.entries(a).sort((E,x)=>x[1]-E[1])[0])==null?void 0:h[0])||"N/A",u={};t.forEach(E=>{const x=E.condition||"Raw";u[x]=(u[x]||0)+1});const f=((g=Object.entries(u).sort((E,x)=>x[1]-E[1])[0])==null?void 0:g[0])||"N/A",d=t.reduce((E,x)=>(x.currentValue||0)>(E.currentValue||0)?x:E,t[0]||{playerName:"N/A",currentValue:0});return p.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[p.jsx("h1",{className:"text-3xl font-bold mb-6",children:"📊 Collection Dashboard"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[p.jsx(Zf,{title:"Total Cards",value:e,icon:"🎴"}),p.jsx(Zf,{title:"Total Value",value:`$${n.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:"💰"}),p.jsx(Zf,{title:"Average Price",value:`$${i.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:"📊"}),p.jsx(Zf,{title:"ROI",value:`${o.toFixed(1)}%`,icon:"📈",valueColor:o>=0?"text-green-600":"text-red-600"})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-white shadow rounded-lg p-6 border border-gray-200",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Collection Insights"}),p.jsxs("div",{className:"space-y-4",children:[p.jsx(Xf,{label:"Most Valuable Card",value:`${d.playerName} - $${(_=d.currentValue)==null?void 0:_.toLocaleString()}`}),p.jsx(Xf,{label:"Most Common Grade",value:f}),p.jsx(Xf,{label:"Top Player",value:l}),p.jsx(Xf,{label:"Total Profit/Loss",value:`$${s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,valueColor:s>=0?"text-green-600":"text-red-600"})]})]}),p.jsxs("div",{className:"bg-white shadow rounded-lg p-6 border border-gray-200",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Grade Distribution"}),p.jsx("div",{className:"space-y-4",children:Object.entries(u).map(([E,x])=>p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"w-24 text-sm text-gray-600",children:E}),p.jsx("div",{className:"flex-1",children:p.jsx("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${x/e*100}%`}})})}),p.jsx("div",{className:"w-12 text-sm text-gray-600 text-right",children:x})]},E))})]})]})]})}function Zf({title:t,value:e,icon:n,valueColor:r="text-gray-900"}){return p.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border border-gray-200",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h2",{className:"text-sm font-medium text-gray-500",children:t}),n&&p.jsx("span",{className:"text-xl",children:n})]}),p.jsx("p",{className:`mt-2 text-2xl font-bold ${r}`,children:e})]})}function Xf({label:t,value:e,valueColor:n="text-gray-900"}){return p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-gray-600",children:t}),p.jsx("span",{className:`font-medium ${n}`,children:e})]})}const sB=({cards:t,onEditCard:e})=>!t||t.length===0?p.jsx("div",{className:"text-center text-gray-500 py-4",children:"No cards in your collection yet. Add your first card!"}):p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map(n=>p.jsxs("div",{className:"relative group rounded-xl overflow-hidden shadow bg-white cursor-pointer",onClick:()=>e(n),children:[p.jsx("div",{className:"aspect-[3/4] bg-gray-100 flex items-center justify-center",children:p.jsx("img",{src:n.imageUrl||"/placeholder-card.png",alt:n.playerName,className:"w-full h-auto rounded-lg border object-contain"})}),p.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-black bg-opacity-75 text-white opacity-0 group-hover:opacity-100 transition-opacity",children:[p.jsxs("p",{className:"text-sm font-semibold",children:[n.playerName," - ",n.year]}),p.jsxs("p",{className:"text-xs",children:["Set: ",n.cardSet]}),p.jsxs("p",{className:"text-xs",children:["Variation: ",n.variation]}),p.jsxs("p",{className:"text-xs",children:["Condition: ",n.condition]}),p.jsxs("p",{className:"text-xs",children:["Paid: $",n.pricePaid]}),p.jsxs("p",{className:"text-xs",children:["Value: $",n.currentValue]})]})]},n.id))});var Jd=t=>t.type==="checkbox",Zo=t=>t instanceof Date,Nn=t=>t==null;const k1=t=>typeof t=="object";var Pt=t=>!Nn(t)&&!Array.isArray(t)&&k1(t)&&!Zo(t),iB=t=>Pt(t)&&t.target?Jd(t.target)?t.target.checked:t.target.value:t,oB=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,aB=(t,e)=>t.has(oB(e)),lB=t=>{const e=t.constructor&&t.constructor.prototype;return Pt(e)&&e.hasOwnProperty("isPrototypeOf")},j0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function gn(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(j0&&(t instanceof Blob||r))&&(n||Pt(t)))if(e=n?[]:{},!n&&!lB(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=gn(t[s]));else return t;return e}var Lm=t=>Array.isArray(t)?t.filter(Boolean):[],Ot=t=>t===void 0,he=(t,e,n)=>{if(!e||!Pt(t))return n;const r=Lm(e.split(/[,[\].]+?/)).reduce((s,i)=>Nn(s)?s:s[i],t);return Ot(r)||r===t?Ot(t[e])?n:t[e]:r},is=t=>typeof t=="boolean",V0=t=>/^\w*$/.test(t),A1=t=>Lm(t.replace(/["|']|\]/g,"").split(/\.|\[/)),et=(t,e,n)=>{let r=-1;const s=V0(e)?[e]:A1(e),i=s.length,o=i-1;for(;++r<i;){const a=s[r];let l=n;if(r!==o){const u=t[a];l=Pt(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const XT={BLUR:"blur",FOCUS_OUT:"focusout"},Dr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ls={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};q.createContext(null);var uB=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==Dr.all&&(e._proxyFormState[o]=!r||Dr.all),t[o]}});return s};const cB=typeof window<"u"?y.useLayoutEffect:y.useEffect;var fs=t=>typeof t=="string",dB=(t,e,n,r,s)=>fs(t)?(r&&e.watch.add(t),he(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),he(n,i))):(r&&(e.watchAll=!0),n),P1=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},kc=t=>Array.isArray(t)?t:[t],JT=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}},t_=t=>Nn(t)||!k1(t);function $i(t,e){if(t_(t)||t_(e))return t===e;if(Zo(t)&&Zo(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const i=t[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=e[s];if(Zo(i)&&Zo(o)||Pt(i)&&Pt(o)||Array.isArray(i)&&Array.isArray(o)?!$i(i,o):i!==o)return!1}}return!0}var kn=t=>Pt(t)&&!Object.keys(t).length,F0=t=>t.type==="file",Or=t=>typeof t=="function",Ip=t=>{if(!j0)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},N1=t=>t.type==="select-multiple",U0=t=>t.type==="radio",fB=t=>U0(t)||Jd(t),ty=t=>Ip(t)&&t.isConnected;function hB(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Ot(t)?r++:t[e[r++]];return t}function pB(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ot(t[e]))return!1;return!0}function Bt(t,e){const n=Array.isArray(e)?e:V0(e)?[e]:A1(e),r=n.length===1?t:hB(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(Pt(r)&&kn(r)||Array.isArray(r)&&pB(r))&&Bt(t,n.slice(0,-1)),t}var D1=t=>{for(const e in t)if(Or(t[e]))return!0;return!1};function Rp(t,e={}){const n=Array.isArray(t);if(Pt(t)||n)for(const r in t)Array.isArray(t[r])||Pt(t[r])&&!D1(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Rp(t[r],e[r])):Nn(t[r])||(e[r]=!0);return e}function O1(t,e,n){const r=Array.isArray(t);if(Pt(t)||r)for(const s in t)Array.isArray(t[s])||Pt(t[s])&&!D1(t[s])?Ot(e)||t_(n[s])?n[s]=Array.isArray(t[s])?Rp(t[s],[]):{...Rp(t[s])}:O1(t[s],Nn(e)?{}:e[s],n[s]):n[s]=!$i(t[s],e[s]);return n}var Qu=(t,e)=>O1(t,e,Rp(e));const eS={value:!1,isValid:!1},tS={value:!0,isValid:!0};var M1=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ot(t[0].attributes.value)?Ot(t[0].value)||t[0].value===""?tS:{value:t[0].value,isValid:!0}:tS:eS}return eS},L1=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Ot(t)?t:e?t===""?NaN:t&&+t:n&&fs(t)?new Date(t):r?r(t):t;const nS={isValid:!1,value:null};var j1=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,nS):nS;function rS(t){const e=t.ref;return F0(e)?e.files:U0(e)?j1(t.refs).value:N1(e)?[...e.selectedOptions].map(({value:n})=>n):Jd(e)?M1(t.refs).value:L1(Ot(e.value)?t.ref.value:e.value,t)}var mB=(t,e,n,r)=>{const s={};for(const i of t){const o=he(e,i);o&&et(s,i,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},kp=t=>t instanceof RegExp,Yu=t=>Ot(t)?t:kp(t)?t.source:Pt(t)?kp(t.value)?t.value.source:t.value:t,sS=t=>({isOnSubmit:!t||t===Dr.onSubmit,isOnBlur:t===Dr.onBlur,isOnChange:t===Dr.onChange,isOnAll:t===Dr.all,isOnTouch:t===Dr.onTouched});const iS="AsyncFunction";var gB=t=>!!t&&!!t.validate&&!!(Or(t.validate)&&t.validate.constructor.name===iS||Pt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===iS)),yB=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),oS=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Ac=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=he(t,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Ac(a,e))break}else if(Pt(a)&&Ac(a,e))break}}};function aS(t,e,n){const r=he(t,n);if(r||V0(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),o=he(e,i),a=he(t,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(a&&a.type)return{name:i,error:a};s.pop()}return{name:n}}var vB=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return kn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||Dr.all))},_B=(t,e,n)=>!t||!e||t===e||kc(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),wB=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,xB=(t,e)=>!Lm(he(t,e)).length&&Bt(t,e),EB=(t,e,n)=>{const r=kc(he(t,n));return et(r,"root",e[n]),et(t,n,r),t},Nh=t=>fs(t);function lS(t,e,n="validate"){if(Nh(t)||Array.isArray(t)&&t.every(Nh)||is(t)&&!t)return{type:n,message:Nh(t)?t:"",ref:e}}var Ga=t=>Pt(t)&&!kp(t)?t:{value:t,message:""},uS=async(t,e,n,r,s,i)=>{const{ref:o,refs:a,required:l,maxLength:u,minLength:f,min:d,max:h,pattern:g,validate:_,name:E,valueAsNumber:x,mount:v}=t._f,b=he(n,E);if(!v||e.has(E))return{};const T=a?a[0]:o,A=D=>{s&&T.reportValidity&&(T.setCustomValidity(is(D)?"":D||""),T.reportValidity())},O={},V=U0(o),C=Jd(o),S=V||C,R=(x||F0(o))&&Ot(o.value)&&Ot(b)||Ip(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,k=P1.bind(null,E,r,O),N=(D,P,ce,pe=Ls.maxLength,Z=Ls.minLength)=>{const ge=D?P:ce;O[E]={type:D?pe:Z,message:ge,ref:o,...k(D?pe:Z,ge)}};if(i?!Array.isArray(b)||!b.length:l&&(!S&&(R||Nn(b))||is(b)&&!b||C&&!M1(a).isValid||V&&!j1(a).isValid)){const{value:D,message:P}=Nh(l)?{value:!!l,message:l}:Ga(l);if(D&&(O[E]={type:Ls.required,message:P,ref:T,...k(Ls.required,P)},!r))return A(P),O}if(!R&&(!Nn(d)||!Nn(h))){let D,P;const ce=Ga(h),pe=Ga(d);if(!Nn(b)&&!isNaN(b)){const Z=o.valueAsNumber||b&&+b;Nn(ce.value)||(D=Z>ce.value),Nn(pe.value)||(P=Z<pe.value)}else{const Z=o.valueAsDate||new Date(b),ge=X=>new Date(new Date().toDateString()+" "+X),j=o.type=="time",B=o.type=="week";fs(ce.value)&&b&&(D=j?ge(b)>ge(ce.value):B?b>ce.value:Z>new Date(ce.value)),fs(pe.value)&&b&&(P=j?ge(b)<ge(pe.value):B?b<pe.value:Z<new Date(pe.value))}if((D||P)&&(N(!!D,ce.message,pe.message,Ls.max,Ls.min),!r))return A(O[E].message),O}if((u||f)&&!R&&(fs(b)||i&&Array.isArray(b))){const D=Ga(u),P=Ga(f),ce=!Nn(D.value)&&b.length>+D.value,pe=!Nn(P.value)&&b.length<+P.value;if((ce||pe)&&(N(ce,D.message,P.message),!r))return A(O[E].message),O}if(g&&!R&&fs(b)){const{value:D,message:P}=Ga(g);if(kp(D)&&!b.match(D)&&(O[E]={type:Ls.pattern,message:P,ref:o,...k(Ls.pattern,P)},!r))return A(P),O}if(_){if(Or(_)){const D=await _(b,n),P=lS(D,T);if(P&&(O[E]={...P,...k(Ls.validate,P.message)},!r))return A(P.message),O}else if(Pt(_)){let D={};for(const P in _){if(!kn(D)&&!r)break;const ce=lS(await _[P](b,n),T,P);ce&&(D={...ce,...k(P,ce.message)},A(ce.message),r&&(O[E]=D))}if(!kn(D)&&(O[E]={ref:T,...D},!r))return O}}return A(!0),O};const bB={mode:Dr.onSubmit,reValidateMode:Dr.onChange,shouldFocusError:!0};function TB(t={}){let e={...bB,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Or(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let s=Pt(e.defaultValues)||Pt(e.values)?gn(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:gn(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let d={...f};const h={array:JT(),state:JT()},g=sS(e.mode),_=sS(e.reValidateMode),E=e.criteriaMode===Dr.all,x=M=>U=>{clearTimeout(u),u=setTimeout(M,U)},v=async M=>{if(!e.disabled&&(f.isValid||d.isValid||M)){const U=e.resolver?kn((await R()).errors):await N(r,!0);U!==n.isValid&&h.state.next({isValid:U})}},b=(M,U)=>{!e.disabled&&(f.isValidating||f.validatingFields||d.isValidating||d.validatingFields)&&((M||Array.from(a.mount)).forEach(z=>{z&&(U?et(n.validatingFields,z,U):Bt(n.validatingFields,z))}),h.state.next({validatingFields:n.validatingFields,isValidating:!kn(n.validatingFields)}))},T=(M,U=[],z,re,K=!0,H=!0)=>{if(re&&z&&!e.disabled){if(o.action=!0,H&&Array.isArray(he(r,M))){const ie=z(he(r,M),re.argA,re.argB);K&&et(r,M,ie)}if(H&&Array.isArray(he(n.errors,M))){const ie=z(he(n.errors,M),re.argA,re.argB);K&&et(n.errors,M,ie),xB(n.errors,M)}if((f.touchedFields||d.touchedFields)&&H&&Array.isArray(he(n.touchedFields,M))){const ie=z(he(n.touchedFields,M),re.argA,re.argB);K&&et(n.touchedFields,M,ie)}(f.dirtyFields||d.dirtyFields)&&(n.dirtyFields=Qu(s,i)),h.state.next({name:M,isDirty:P(M,U),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else et(i,M,U)},A=(M,U)=>{et(n.errors,M,U),h.state.next({errors:n.errors})},O=M=>{n.errors=M,h.state.next({errors:n.errors,isValid:!1})},V=(M,U,z,re)=>{const K=he(r,M);if(K){const H=he(i,M,Ot(z)?he(s,M):z);Ot(H)||re&&re.defaultChecked||U?et(i,M,U?H:rS(K._f)):Z(M,H),o.mount&&v()}},C=(M,U,z,re,K)=>{let H=!1,ie=!1;const Me={name:M};if(!e.disabled){if(!z||re){(f.isDirty||d.isDirty)&&(ie=n.isDirty,n.isDirty=Me.isDirty=P(),H=ie!==Me.isDirty);const Ke=$i(he(s,M),U);ie=!!he(n.dirtyFields,M),Ke?Bt(n.dirtyFields,M):et(n.dirtyFields,M,!0),Me.dirtyFields=n.dirtyFields,H=H||(f.dirtyFields||d.dirtyFields)&&ie!==!Ke}if(z){const Ke=he(n.touchedFields,M);Ke||(et(n.touchedFields,M,z),Me.touchedFields=n.touchedFields,H=H||(f.touchedFields||d.touchedFields)&&Ke!==z)}H&&K&&h.state.next(Me)}return H?Me:{}},S=(M,U,z,re)=>{const K=he(n.errors,M),H=(f.isValid||d.isValid)&&is(U)&&n.isValid!==U;if(e.delayError&&z?(l=x(()=>A(M,z)),l(e.delayError)):(clearTimeout(u),l=null,z?et(n.errors,M,z):Bt(n.errors,M)),(z?!$i(K,z):K)||!kn(re)||H){const ie={...re,...H&&is(U)?{isValid:U}:{},errors:n.errors,name:M};n={...n,...ie},h.state.next(ie)}},R=async M=>{b(M,!0);const U=await e.resolver(i,e.context,mB(M||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return b(M),U},k=async M=>{const{errors:U}=await R(M);if(M)for(const z of M){const re=he(U,z);re?et(n.errors,z,re):Bt(n.errors,z)}else n.errors=U;return U},N=async(M,U,z={valid:!0})=>{for(const re in M){const K=M[re];if(K){const{_f:H,...ie}=K;if(H){const Me=a.array.has(H.name),Ke=K._f&&gB(K._f);Ke&&f.validatingFields&&b([re],!0);const bt=await uS(K,a.disabled,i,E,e.shouldUseNativeValidation&&!U,Me);if(Ke&&f.validatingFields&&b([re]),bt[H.name]&&(z.valid=!1,U))break;!U&&(he(bt,H.name)?Me?EB(n.errors,bt,H.name):et(n.errors,H.name,bt[H.name]):Bt(n.errors,H.name))}!kn(ie)&&await N(ie,U,z)}}return z.valid},D=()=>{for(const M of a.unMount){const U=he(r,M);U&&(U._f.refs?U._f.refs.every(z=>!ty(z)):!ty(U._f.ref))&&Ye(M)}a.unMount=new Set},P=(M,U)=>!e.disabled&&(M&&U&&et(i,M,U),!$i(le(),s)),ce=(M,U,z)=>dB(M,a,{...o.mount?i:Ot(U)?s:fs(M)?{[M]:U}:U},z,U),pe=M=>Lm(he(o.mount?i:s,M,e.shouldUnregister?he(s,M,[]):[])),Z=(M,U,z={})=>{const re=he(r,M);let K=U;if(re){const H=re._f;H&&(!H.disabled&&et(i,M,L1(U,H)),K=Ip(H.ref)&&Nn(U)?"":U,N1(H.ref)?[...H.ref.options].forEach(ie=>ie.selected=K.includes(ie.value)):H.refs?Jd(H.ref)?H.refs.length>1?H.refs.forEach(ie=>(!ie.defaultChecked||!ie.disabled)&&(ie.checked=Array.isArray(K)?!!K.find(Me=>Me===ie.value):K===ie.value)):H.refs[0]&&(H.refs[0].checked=!!K):H.refs.forEach(ie=>ie.checked=ie.value===K):F0(H.ref)?H.ref.value="":(H.ref.value=K,H.ref.type||h.state.next({name:M,values:gn(i)})))}(z.shouldDirty||z.shouldTouch)&&C(M,K,z.shouldTouch,z.shouldDirty,!0),z.shouldValidate&&te(M)},ge=(M,U,z)=>{for(const re in U){const K=U[re],H=`${M}.${re}`,ie=he(r,H);(a.array.has(M)||Pt(K)||ie&&!ie._f)&&!Zo(K)?ge(H,K,z):Z(H,K,z)}},j=(M,U,z={})=>{const re=he(r,M),K=a.array.has(M),H=gn(U);et(i,M,H),K?(h.array.next({name:M,values:gn(i)}),(f.isDirty||f.dirtyFields||d.isDirty||d.dirtyFields)&&z.shouldDirty&&h.state.next({name:M,dirtyFields:Qu(s,i),isDirty:P(M,H)})):re&&!re._f&&!Nn(H)?ge(M,H,z):Z(M,H,z),oS(M,a)&&h.state.next({...n}),h.state.next({name:o.mount?M:void 0,values:gn(i)})},B=async M=>{o.mount=!0;const U=M.target;let z=U.name,re=!0;const K=he(r,z),H=ie=>{re=Number.isNaN(ie)||Zo(ie)&&isNaN(ie.getTime())||$i(ie,he(i,z,ie))};if(K){let ie,Me;const Ke=U.type?rS(K._f):iB(M),bt=M.type===XT.BLUR||M.type===XT.FOCUS_OUT,Un=!yB(K._f)&&!e.resolver&&!he(n.errors,z)&&!K._f.deps||wB(bt,he(n.touchedFields,z),n.isSubmitted,_,g),wi=oS(z,a,bt);et(i,z,Ke),bt?(K._f.onBlur&&K._f.onBlur(M),l&&l(0)):K._f.onChange&&K._f.onChange(M);const xi=C(z,Ke,bt),Ei=!kn(xi)||wi;if(!bt&&h.state.next({name:z,type:M.type,values:gn(i)}),Un)return(f.isValid||d.isValid)&&(e.mode==="onBlur"?bt&&v():bt||v()),Ei&&h.state.next({name:z,...wi?{}:xi});if(!bt&&wi&&h.state.next({...n}),e.resolver){const{errors:Mo}=await R([z]);if(H(Ke),re){const ku=aS(n.errors,r,z),es=aS(Mo,r,ku.name||z);ie=es.error,z=es.name,Me=kn(Mo)}}else b([z],!0),ie=(await uS(K,a.disabled,i,E,e.shouldUseNativeValidation))[z],b([z]),H(Ke),re&&(ie?Me=!1:(f.isValid||d.isValid)&&(Me=await N(r,!0)));re&&(K._f.deps&&te(K._f.deps),S(z,Me,ie,xi))}},X=(M,U)=>{if(he(n.errors,U)&&M.focus)return M.focus(),1},te=async(M,U={})=>{let z,re;const K=kc(M);if(e.resolver){const H=await k(Ot(M)?M:K);z=kn(H),re=M?!K.some(ie=>he(H,ie)):z}else M?(re=(await Promise.all(K.map(async H=>{const ie=he(r,H);return await N(ie&&ie._f?{[H]:ie}:ie)}))).every(Boolean),!(!re&&!n.isValid)&&v()):re=z=await N(r);return h.state.next({...!fs(M)||(f.isValid||d.isValid)&&z!==n.isValid?{}:{name:M},...e.resolver||!M?{isValid:z}:{},errors:n.errors}),U.shouldFocus&&!re&&Ac(r,X,M?K:a.mount),re},le=M=>{const U={...o.mount?i:s};return Ot(M)?U:fs(M)?he(U,M):M.map(z=>he(U,z))},se=(M,U)=>({invalid:!!he((U||n).errors,M),isDirty:!!he((U||n).dirtyFields,M),error:he((U||n).errors,M),isValidating:!!he(n.validatingFields,M),isTouched:!!he((U||n).touchedFields,M)}),Ie=M=>{M&&kc(M).forEach(U=>Bt(n.errors,U)),h.state.next({errors:M?n.errors:{}})},Ge=(M,U,z)=>{const re=(he(r,M,{_f:{}})._f||{}).ref,K=he(n.errors,M)||{},{ref:H,message:ie,type:Me,...Ke}=K;et(n.errors,M,{...Ke,...U,ref:re}),h.state.next({name:M,errors:n.errors,isValid:!1}),z&&z.shouldFocus&&re&&re.focus&&re.focus()},Ce=(M,U)=>Or(M)?h.state.subscribe({next:z=>M(ce(void 0,U),z)}):ce(M,U,!0),be=M=>h.state.subscribe({next:U=>{_B(M.name,U.name,M.exact)&&vB(U,M.formState||f,Ut,M.reRenderRoot)&&M.callback({values:{...i},...n,...U})}}).unsubscribe,Ft=M=>(o.mount=!0,d={...d,...M.formState},be({...M,formState:d})),Ye=(M,U={})=>{for(const z of M?kc(M):a.mount)a.mount.delete(z),a.array.delete(z),U.keepValue||(Bt(r,z),Bt(i,z)),!U.keepError&&Bt(n.errors,z),!U.keepDirty&&Bt(n.dirtyFields,z),!U.keepTouched&&Bt(n.touchedFields,z),!U.keepIsValidating&&Bt(n.validatingFields,z),!e.shouldUnregister&&!U.keepDefaultValue&&Bt(s,z);h.state.next({values:gn(i)}),h.state.next({...n,...U.keepDirty?{isDirty:P()}:{}}),!U.keepIsValid&&v()},ut=({disabled:M,name:U})=>{(is(M)&&o.mount||M||a.disabled.has(U))&&(M?a.disabled.add(U):a.disabled.delete(U))},Zt=(M,U={})=>{let z=he(r,M);const re=is(U.disabled)||is(e.disabled);return et(r,M,{...z||{},_f:{...z&&z._f?z._f:{ref:{name:M}},name:M,mount:!0,...U}}),a.mount.add(M),z?ut({disabled:is(U.disabled)?U.disabled:e.disabled,name:M}):V(M,!0,U.value),{...re?{disabled:U.disabled||e.disabled}:{},...e.progressive?{required:!!U.required,min:Yu(U.min),max:Yu(U.max),minLength:Yu(U.minLength),maxLength:Yu(U.maxLength),pattern:Yu(U.pattern)}:{},name:M,onChange:B,onBlur:B,ref:K=>{if(K){Zt(M,U),z=he(r,M);const H=Ot(K.value)&&K.querySelectorAll&&K.querySelectorAll("input,select,textarea")[0]||K,ie=fB(H),Me=z._f.refs||[];if(ie?Me.find(Ke=>Ke===H):H===z._f.ref)return;et(r,M,{_f:{...z._f,...ie?{refs:[...Me.filter(ty),H,...Array.isArray(he(s,M))?[{}]:[]],ref:{type:H.type,name:M}}:{ref:H}}}),V(M,!1,void 0,H)}else z=he(r,M,{}),z._f&&(z._f.mount=!1),(e.shouldUnregister||U.shouldUnregister)&&!(aB(a.array,M)&&o.action)&&a.unMount.add(M)}}},Xt=()=>e.shouldFocusError&&Ac(r,X,a.mount),Xn=M=>{is(M)&&(h.state.next({disabled:M}),Ac(r,(U,z)=>{const re=he(r,z);re&&(U.disabled=re._f.disabled||M,Array.isArray(re._f.refs)&&re._f.refs.forEach(K=>{K.disabled=re._f.disabled||M}))},0,!1))},Jn=(M,U)=>async z=>{let re;z&&(z.preventDefault&&z.preventDefault(),z.persist&&z.persist());let K=gn(i);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:H,values:ie}=await R();n.errors=H,K=ie}else await N(r);if(a.disabled.size)for(const H of a.disabled)et(K,H,void 0);if(Bt(n.errors,"root"),kn(n.errors)){h.state.next({errors:{}});try{await M(K,z)}catch(H){re=H}}else U&&await U({...n.errors},z),Xt(),setTimeout(Xt);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:kn(n.errors)&&!re,submitCount:n.submitCount+1,errors:n.errors}),re)throw re},Ns=(M,U={})=>{he(r,M)&&(Ot(U.defaultValue)?j(M,gn(he(s,M))):(j(M,U.defaultValue),et(s,M,gn(U.defaultValue))),U.keepTouched||Bt(n.touchedFields,M),U.keepDirty||(Bt(n.dirtyFields,M),n.isDirty=U.defaultValue?P(M,gn(he(s,M))):P()),U.keepError||(Bt(n.errors,M),f.isValid&&v()),h.state.next({...n}))},Jr=(M,U={})=>{const z=M?gn(M):s,re=gn(z),K=kn(M),H=K?s:re;if(U.keepDefaultValues||(s=z),!U.keepValues){if(U.keepDirtyValues){const ie=new Set([...a.mount,...Object.keys(Qu(s,i))]);for(const Me of Array.from(ie))he(n.dirtyFields,Me)?et(H,Me,he(i,Me)):j(Me,he(H,Me))}else{if(j0&&Ot(M))for(const ie of a.mount){const Me=he(r,ie);if(Me&&Me._f){const Ke=Array.isArray(Me._f.refs)?Me._f.refs[0]:Me._f.ref;if(Ip(Ke)){const bt=Ke.closest("form");if(bt){bt.reset();break}}}}for(const ie of a.mount)j(ie,he(H,ie))}i=gn(H),h.array.next({values:{...H}}),h.state.next({values:{...H}})}a={mount:U.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!f.isValid||!!U.keepIsValid||!!U.keepDirtyValues,o.watch=!!e.shouldUnregister,h.state.next({submitCount:U.keepSubmitCount?n.submitCount:0,isDirty:K?!1:U.keepDirty?n.isDirty:!!(U.keepDefaultValues&&!$i(M,s)),isSubmitted:U.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:K?{}:U.keepDirtyValues?U.keepDefaultValues&&i?Qu(s,i):n.dirtyFields:U.keepDefaultValues&&M?Qu(s,M):U.keepDirty?n.dirtyFields:{},touchedFields:U.keepTouched?n.touchedFields:{},errors:U.keepErrors?n.errors:{},isSubmitSuccessful:U.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},hr=(M,U)=>Jr(Or(M)?M(i):M,U),_i=(M,U={})=>{const z=he(r,M),re=z&&z._f;if(re){const K=re.refs?re.refs[0]:re.ref;K.focus&&(K.focus(),U.shouldSelect&&Or(K.select)&&K.select())}},Ut=M=>{n={...n,...M}},Oo={control:{register:Zt,unregister:Ye,getFieldState:se,handleSubmit:Jn,setError:Ge,_subscribe:be,_runSchema:R,_getWatch:ce,_getDirty:P,_setValid:v,_setFieldArray:T,_setDisabledField:ut,_setErrors:O,_getFieldArray:pe,_reset:Jr,_resetDefaultValues:()=>Or(e.defaultValues)&&e.defaultValues().then(M=>{hr(M,e.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:D,_disableForm:Xn,_subjects:h,_proxyFormState:f,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(M){o=M},get _defaultValues(){return s},get _names(){return a},set _names(M){a=M},get _formState(){return n},get _options(){return e},set _options(M){e={...e,...M}}},subscribe:Ft,trigger:te,register:Zt,handleSubmit:Jn,watch:Ce,setValue:j,getValues:le,reset:hr,resetField:Ns,clearErrors:Ie,unregister:Ye,setError:Ge,setFocus:_i,getFieldState:se};return{...Oo,formControl:Oo}}function SB(t={}){const e=q.useRef(void 0),n=q.useRef(void 0),[r,s]=q.useState({isDirty:!1,isValidating:!1,isLoading:Or(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Or(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:TB(t),formState:r},t.formControl&&t.defaultValues&&!Or(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const i=e.current.control;return i._options=t,cB(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),i._formState.isReady=!0,o},[i]),q.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),q.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode),t.errors&&!kn(t.errors)&&i._setErrors(t.errors)},[i,t.errors,t.mode,t.reValidateMode]),q.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),q.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),q.useEffect(()=>{t.values&&!$i(t.values,n.current)?(i._reset(t.values,i._options.resetOptions),n.current=t.values,s(o=>({...o}))):i._resetDefaultValues()},[i,t.values]),q.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=uB(r,i),e.current}const cS=(t,e,n)=>{if(t&&"reportValidity"in t){const r=he(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},V1=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?cS(r.ref,n,t):r&&r.refs&&r.refs.forEach(s=>cS(s,n,t))}},CB=(t,e)=>{e.shouldUseNativeValidation&&V1(t,e);const n={};for(const r in t){const s=he(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(IB(e.names||Object.keys(t),r)){const o=Object.assign({},he(n,r));et(o,"root",i),et(n,r,o)}else et(n,r,i)}return n},IB=(t,e)=>{const n=dS(e);return t.some(r=>dS(r).match(`^${n}\\.\\d+`))};function dS(t){return t.replace(/\]|\[/g,"")}function RB(t,e){for(var n={};t.length;){var r=t[0],s=r.code,i=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(f){return f.errors.forEach(function(d){return t.push(d)})}),e){var l=n[o].types,u=l&&l[r.code];n[o]=P1(o,e,n,s,u?[].concat(u,r.message):r.message)}t.shift()}return n}function kB(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return i.shouldUseNativeValidation&&V1({},i),{errors:{},values:n.raw?Object.assign({},r):u}})}catch(u){return a(u)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:CB(RB(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}}var ze;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(ze||(ze={}));var n_;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(n_||(n_={}));const ae=ze.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),zs=t=>{switch(typeof t){case"undefined":return ae.undefined;case"string":return ae.string;case"number":return isNaN(t)?ae.nan:ae.number;case"boolean":return ae.boolean;case"function":return ae.function;case"bigint":return ae.bigint;case"symbol":return ae.symbol;case"object":return Array.isArray(t)?ae.array:t===null?ae.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ae.promise:typeof Map<"u"&&t instanceof Map?ae.map:typeof Set<"u"&&t instanceof Set?ae.set:typeof Date<"u"&&t instanceof Date?ae.date:ae.object;default:return ae.unknown}},Q=ze.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),AB=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class lr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return s(this),r}static assert(e){if(!(e instanceof lr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ze.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}lr.create=t=>new lr(t);const au=(t,e)=>{let n;switch(t.code){case Q.invalid_type:t.received===ae.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Q.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ze.jsonStringifyReplacer)}`;break;case Q.unrecognized_keys:n=`Unrecognized key(s) in object: ${ze.joinValues(t.keys,", ")}`;break;case Q.invalid_union:n="Invalid input";break;case Q.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ze.joinValues(t.options)}`;break;case Q.invalid_enum_value:n=`Invalid enum value. Expected ${ze.joinValues(t.options)}, received '${t.received}'`;break;case Q.invalid_arguments:n="Invalid function arguments";break;case Q.invalid_return_type:n="Invalid function return type";break;case Q.invalid_date:n="Invalid date";break;case Q.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ze.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Q.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Q.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Q.custom:n="Invalid input";break;case Q.invalid_intersection_types:n="Intersection results could not be merged";break;case Q.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Q.not_finite:n="Number must be finite";break;default:n=e.defaultError,ze.assertNever(t)}return{message:n}};let F1=au;function PB(t){F1=t}function Ap(){return F1}const Pp=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}},NB=[];function ne(t,e){const n=Ap(),r=Pp({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===au?void 0:au].filter(s=>!!s)});t.common.issues.push(r)}class Sn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Ee;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return Sn.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Ee;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Ee=Object.freeze({status:"aborted"}),pl=t=>({status:"dirty",value:t}),Ln=t=>({status:"valid",value:t}),r_=t=>t.status==="aborted",s_=t=>t.status==="dirty",Sa=t=>t.status==="valid",ld=t=>typeof Promise<"u"&&t instanceof Promise;function Np(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function U1(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var ye;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ye||(ye={}));var cc,dc;class Ss{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const fS=(t,e)=>{if(Sa(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new lr(t.common.issues);return this._error=n,this._error}}};function Pe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{var l,u;const{message:f}=t;return o.code==="invalid_enum_value"?{message:f??a.defaultError}:typeof a.data>"u"?{message:(l=f??r)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(u=f??n)!==null&&u!==void 0?u:a.defaultError}},description:s}}class Oe{get description(){return this._def.description}_getType(e){return zs(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:zs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Sn,ctx:{common:e.parent.common,data:e.data,parsedType:zs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(ld(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zs(e)},i=this._parseSync({data:e,path:s.path,parent:s});return fS(s,i)}"~validate"(e){var n,r;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zs(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:s});return Sa(i)?{value:i.value}:{issues:s.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>Sa(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zs(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(ld(s)?s:Promise.resolve(s));return fS(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Q.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Wr({schema:this,typeName:we.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return _s.create(this,this._def)}nullable(){return To.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ur.create(this)}promise(){return uu.create(this,this._def)}or(e){return fd.create([this,e],this._def)}and(e){return hd.create(this,e,this._def)}transform(e){return new Wr({...Pe(this._def),schema:this,typeName:we.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new vd({...Pe(this._def),innerType:this,defaultValue:n,typeName:we.ZodDefault})}brand(){return new $0({typeName:we.ZodBranded,type:this,...Pe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new _d({...Pe(this._def),innerType:this,catchValue:n,typeName:we.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ef.create(this,e)}readonly(){return wd.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const DB=/^c[^\s-]{8,}$/i,OB=/^[0-9a-z]+$/,MB=/^[0-9A-HJKMNP-TV-Z]{26}$/i,LB=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,jB=/^[a-z0-9_-]{21}$/i,VB=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,FB=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,UB=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,$B="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let ny;const BB=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,zB=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,WB=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,HB=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,qB=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,GB=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,$1="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",KB=new RegExp(`^${$1}$`);function B1(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function QB(t){return new RegExp(`^${B1(t)}$`)}function z1(t){let e=`${$1}T${B1(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function YB(t,e){return!!((e==="v4"||!e)&&BB.test(t)||(e==="v6"||!e)&&WB.test(t))}function ZB(t,e){if(!VB.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function XB(t,e){return!!((e==="v4"||!e)&&zB.test(t)||(e==="v6"||!e)&&HB.test(t))}class Mr extends Oe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ae.string){const i=this._getOrReturnCtx(e);return ne(i,{code:Q.invalid_type,expected:ae.string,received:i.parsedType}),Ee}const r=new Sn;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ne(s,{code:Q.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ne(s,{code:Q.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ne(s,{code:Q.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ne(s,{code:Q.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")UB.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"email",code:Q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")ny||(ny=new RegExp($B,"u")),ny.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"emoji",code:Q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")LB.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"uuid",code:Q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")jB.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"nanoid",code:Q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")DB.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"cuid",code:Q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")OB.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"cuid2",code:Q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")MB.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"ulid",code:Q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ne(s,{validation:"url",code:Q.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"regex",code:Q.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ne(s,{code:Q.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ne(s,{code:Q.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ne(s,{code:Q.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?z1(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{code:Q.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?KB.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{code:Q.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?QB(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{code:Q.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?FB.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"duration",code:Q.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?YB(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"ip",code:Q.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?ZB(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"jwt",code:Q.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?XB(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"cidr",code:Q.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?qB.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"base64",code:Q.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?GB.test(e.data)||(s=this._getOrReturnCtx(e,s),ne(s,{validation:"base64url",code:Q.invalid_string,message:i.message}),r.dirty()):ze.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Q.invalid_string,...ye.errToObj(r)})}_addCheck(e){return new Mr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ye.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ye.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ye.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ye.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ye.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ye.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ye.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ye.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ye.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ye.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ye.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ye.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ye.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...ye.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ye.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ye.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ye.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ye.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ye.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ye.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ye.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ye.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ye.errToObj(n)})}nonempty(e){return this.min(1,ye.errToObj(e))}trim(){return new Mr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Mr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Mr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Mr.create=t=>{var e;return new Mr({checks:[],typeName:we.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Pe(t)})};function JB(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class xo extends Oe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ae.number){const i=this._getOrReturnCtx(e);return ne(i,{code:Q.invalid_type,expected:ae.number,received:i.parsedType}),Ee}let r;const s=new Sn;for(const i of this._def.checks)i.kind==="int"?ze.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{code:Q.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:Q.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:Q.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?JB(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),ne(r,{code:Q.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{code:Q.not_finite,message:i.message}),s.dirty()):ze.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ye.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ye.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ye.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ye.toString(n))}setLimit(e,n,r,s){return new xo({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ye.toString(s)}]})}_addCheck(e){return new xo({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ye.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ye.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ye.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ye.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ye.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ye.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ye.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ye.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ye.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ze.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}xo.create=t=>new xo({checks:[],typeName:we.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Pe(t)});class Eo extends Oe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ae.bigint)return this._getInvalidInput(e);let r;const s=new Sn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:Q.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:Q.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:Q.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):ze.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ne(n,{code:Q.invalid_type,expected:ae.bigint,received:n.parsedType}),Ee}gte(e,n){return this.setLimit("min",e,!0,ye.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ye.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ye.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ye.toString(n))}setLimit(e,n,r,s){return new Eo({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ye.toString(s)}]})}_addCheck(e){return new Eo({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ye.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ye.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ye.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ye.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ye.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Eo.create=t=>{var e;return new Eo({checks:[],typeName:we.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Pe(t)})};class ud extends Oe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ae.boolean){const r=this._getOrReturnCtx(e);return ne(r,{code:Q.invalid_type,expected:ae.boolean,received:r.parsedType}),Ee}return Ln(e.data)}}ud.create=t=>new ud({typeName:we.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Pe(t)});class Ca extends Oe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ae.date){const i=this._getOrReturnCtx(e);return ne(i,{code:Q.invalid_type,expected:ae.date,received:i.parsedType}),Ee}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ne(i,{code:Q.invalid_date}),Ee}const r=new Sn;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ne(s,{code:Q.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ne(s,{code:Q.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ze.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ca({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ye.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ye.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Ca.create=t=>new Ca({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:we.ZodDate,...Pe(t)});class Dp extends Oe{_parse(e){if(this._getType(e)!==ae.symbol){const r=this._getOrReturnCtx(e);return ne(r,{code:Q.invalid_type,expected:ae.symbol,received:r.parsedType}),Ee}return Ln(e.data)}}Dp.create=t=>new Dp({typeName:we.ZodSymbol,...Pe(t)});class cd extends Oe{_parse(e){if(this._getType(e)!==ae.undefined){const r=this._getOrReturnCtx(e);return ne(r,{code:Q.invalid_type,expected:ae.undefined,received:r.parsedType}),Ee}return Ln(e.data)}}cd.create=t=>new cd({typeName:we.ZodUndefined,...Pe(t)});class dd extends Oe{_parse(e){if(this._getType(e)!==ae.null){const r=this._getOrReturnCtx(e);return ne(r,{code:Q.invalid_type,expected:ae.null,received:r.parsedType}),Ee}return Ln(e.data)}}dd.create=t=>new dd({typeName:we.ZodNull,...Pe(t)});class lu extends Oe{constructor(){super(...arguments),this._any=!0}_parse(e){return Ln(e.data)}}lu.create=t=>new lu({typeName:we.ZodAny,...Pe(t)});class da extends Oe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ln(e.data)}}da.create=t=>new da({typeName:we.ZodUnknown,...Pe(t)});class hi extends Oe{_parse(e){const n=this._getOrReturnCtx(e);return ne(n,{code:Q.invalid_type,expected:ae.never,received:n.parsedType}),Ee}}hi.create=t=>new hi({typeName:we.ZodNever,...Pe(t)});class Op extends Oe{_parse(e){if(this._getType(e)!==ae.undefined){const r=this._getOrReturnCtx(e);return ne(r,{code:Q.invalid_type,expected:ae.void,received:r.parsedType}),Ee}return Ln(e.data)}}Op.create=t=>new Op({typeName:we.ZodVoid,...Pe(t)});class Ur extends Oe{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==ae.array)return ne(n,{code:Q.invalid_type,expected:ae.array,received:n.parsedType}),Ee;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(ne(n,{code:o?Q.too_big:Q.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(ne(n,{code:Q.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(ne(n,{code:Q.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Ss(n,o,n.path,a)))).then(o=>Sn.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Ss(n,o,n.path,a)));return Sn.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Ur({...this._def,minLength:{value:e,message:ye.toString(n)}})}max(e,n){return new Ur({...this._def,maxLength:{value:e,message:ye.toString(n)}})}length(e,n){return new Ur({...this._def,exactLength:{value:e,message:ye.toString(n)}})}nonempty(e){return this.min(1,e)}}Ur.create=(t,e)=>new Ur({type:t,minLength:null,maxLength:null,exactLength:null,typeName:we.ZodArray,...Pe(e)});function tl(t){if(t instanceof ht){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=_s.create(tl(r))}return new ht({...t._def,shape:()=>e})}else return t instanceof Ur?new Ur({...t._def,type:tl(t.element)}):t instanceof _s?_s.create(tl(t.unwrap())):t instanceof To?To.create(tl(t.unwrap())):t instanceof Cs?Cs.create(t.items.map(e=>tl(e))):t}class ht extends Oe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ze.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ae.object){const u=this._getOrReturnCtx(e);return ne(u,{code:Q.invalid_type,expected:ae.object,received:u.parsedType}),Ee}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof hi&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const l=[];for(const u of o){const f=i[u],d=s.data[u];l.push({key:{status:"valid",value:u},value:f._parse(new Ss(s,d,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof hi){const u=this._def.unknownKeys;if(u==="passthrough")for(const f of a)l.push({key:{status:"valid",value:f},value:{status:"valid",value:s.data[f]}});else if(u==="strict")a.length>0&&(ne(s,{code:Q.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const f of a){const d=s.data[f];l.push({key:{status:"valid",value:f},value:u._parse(new Ss(s,d,s.path,f)),alwaysSet:f in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const f of l){const d=await f.key,h=await f.value;u.push({key:d,value:h,alwaysSet:f.alwaysSet})}return u}).then(u=>Sn.mergeObjectSync(r,u)):Sn.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return ye.errToObj,new ht({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const l=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=ye.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new ht({...this._def,unknownKeys:"strip"})}passthrough(){return new ht({...this._def,unknownKeys:"passthrough"})}extend(e){return new ht({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ht({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:we.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ht({...this._def,catchall:e})}pick(e){const n={};return ze.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new ht({...this._def,shape:()=>n})}omit(e){const n={};return ze.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new ht({...this._def,shape:()=>n})}deepPartial(){return tl(this)}partial(e){const n={};return ze.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new ht({...this._def,shape:()=>n})}required(e){const n={};return ze.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof _s;)i=i._def.innerType;n[r]=i}}),new ht({...this._def,shape:()=>n})}keyof(){return W1(ze.objectKeys(this.shape))}}ht.create=(t,e)=>new ht({shape:()=>t,unknownKeys:"strip",catchall:hi.create(),typeName:we.ZodObject,...Pe(e)});ht.strictCreate=(t,e)=>new ht({shape:()=>t,unknownKeys:"strict",catchall:hi.create(),typeName:we.ZodObject,...Pe(e)});ht.lazycreate=(t,e)=>new ht({shape:t,unknownKeys:"strip",catchall:hi.create(),typeName:we.ZodObject,...Pe(e)});class fd extends Oe{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new lr(a.ctx.common.issues));return ne(n,{code:Q.invalid_union,unionErrors:o}),Ee}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},f=l._parseSync({data:n.data,path:n.path,parent:u});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new lr(l));return ne(n,{code:Q.invalid_union,unionErrors:a}),Ee}}get options(){return this._def.options}}fd.create=(t,e)=>new fd({options:t,typeName:we.ZodUnion,...Pe(e)});const Us=t=>t instanceof md?Us(t.schema):t instanceof Wr?Us(t.innerType()):t instanceof gd?[t.value]:t instanceof bo?t.options:t instanceof yd?ze.objectValues(t.enum):t instanceof vd?Us(t._def.innerType):t instanceof cd?[void 0]:t instanceof dd?[null]:t instanceof _s?[void 0,...Us(t.unwrap())]:t instanceof To?[null,...Us(t.unwrap())]:t instanceof $0||t instanceof wd?Us(t.unwrap()):t instanceof _d?Us(t._def.innerType):[];class jm extends Oe{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ae.object)return ne(n,{code:Q.invalid_type,expected:ae.object,received:n.parsedType}),Ee;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(ne(n,{code:Q.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ee)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=Us(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new jm({typeName:we.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Pe(r)})}}function i_(t,e){const n=zs(t),r=zs(e);if(t===e)return{valid:!0,data:t};if(n===ae.object&&r===ae.object){const s=ze.objectKeys(e),i=ze.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const l=i_(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===ae.array&&r===ae.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],l=i_(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===ae.date&&r===ae.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class hd extends Oe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(r_(i)||r_(o))return Ee;const a=i_(i.value,o.value);return a.valid?((s_(i)||s_(o))&&n.dirty(),{status:n.value,value:a.data}):(ne(r,{code:Q.invalid_intersection_types}),Ee)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}hd.create=(t,e,n)=>new hd({left:t,right:e,typeName:we.ZodIntersection,...Pe(n)});class Cs extends Oe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ae.array)return ne(r,{code:Q.invalid_type,expected:ae.array,received:r.parsedType}),Ee;if(r.data.length<this._def.items.length)return ne(r,{code:Q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ee;!this._def.rest&&r.data.length>this._def.items.length&&(ne(r,{code:Q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Ss(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Sn.mergeArray(n,o)):Sn.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Cs({...this._def,rest:e})}}Cs.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Cs({items:t,typeName:we.ZodTuple,rest:null,...Pe(e)})};class pd extends Oe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ae.object)return ne(r,{code:Q.invalid_type,expected:ae.object,received:r.parsedType}),Ee;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Ss(r,a,r.path,a)),value:o._parse(new Ss(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Sn.mergeObjectAsync(n,s):Sn.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Oe?new pd({keyType:e,valueType:n,typeName:we.ZodRecord,...Pe(r)}):new pd({keyType:Mr.create(),valueType:e,typeName:we.ZodRecord,...Pe(n)})}}class Mp extends Oe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ae.map)return ne(r,{code:Q.invalid_type,expected:ae.map,received:r.parsedType}),Ee;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,l],u)=>({key:s._parse(new Ss(r,a,r.path,[u,"key"])),value:i._parse(new Ss(r,l,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,f=await l.value;if(u.status==="aborted"||f.status==="aborted")return Ee;(u.status==="dirty"||f.status==="dirty")&&n.dirty(),a.set(u.value,f.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const u=l.key,f=l.value;if(u.status==="aborted"||f.status==="aborted")return Ee;(u.status==="dirty"||f.status==="dirty")&&n.dirty(),a.set(u.value,f.value)}return{status:n.value,value:a}}}}Mp.create=(t,e,n)=>new Mp({valueType:e,keyType:t,typeName:we.ZodMap,...Pe(n)});class Ia extends Oe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ae.set)return ne(r,{code:Q.invalid_type,expected:ae.set,received:r.parsedType}),Ee;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(ne(r,{code:Q.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(ne(r,{code:Q.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(l){const u=new Set;for(const f of l){if(f.status==="aborted")return Ee;f.status==="dirty"&&n.dirty(),u.add(f.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((l,u)=>i._parse(new Ss(r,l,r.path,u)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Ia({...this._def,minSize:{value:e,message:ye.toString(n)}})}max(e,n){return new Ia({...this._def,maxSize:{value:e,message:ye.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Ia.create=(t,e)=>new Ia({valueType:t,minSize:null,maxSize:null,typeName:we.ZodSet,...Pe(e)});class Il extends Oe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ae.function)return ne(n,{code:Q.invalid_type,expected:ae.function,received:n.parsedType}),Ee;function r(a,l){return Pp({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ap(),au].filter(u=>!!u),issueData:{code:Q.invalid_arguments,argumentsError:l}})}function s(a,l){return Pp({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ap(),au].filter(u=>!!u),issueData:{code:Q.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof uu){const a=this;return Ln(async function(...l){const u=new lr([]),f=await a._def.args.parseAsync(l,i).catch(g=>{throw u.addIssue(r(l,g)),u}),d=await Reflect.apply(o,this,f);return await a._def.returns._def.type.parseAsync(d,i).catch(g=>{throw u.addIssue(s(d,g)),u})})}else{const a=this;return Ln(function(...l){const u=a._def.args.safeParse(l,i);if(!u.success)throw new lr([r(l,u.error)]);const f=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(f,i);if(!d.success)throw new lr([s(f,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Il({...this._def,args:Cs.create(e).rest(da.create())})}returns(e){return new Il({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Il({args:e||Cs.create([]).rest(da.create()),returns:n||da.create(),typeName:we.ZodFunction,...Pe(r)})}}class md extends Oe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}md.create=(t,e)=>new md({getter:t,typeName:we.ZodLazy,...Pe(e)});class gd extends Oe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ne(n,{received:n.data,code:Q.invalid_literal,expected:this._def.value}),Ee}return{status:"valid",value:e.data}}get value(){return this._def.value}}gd.create=(t,e)=>new gd({value:t,typeName:we.ZodLiteral,...Pe(e)});function W1(t,e){return new bo({values:t,typeName:we.ZodEnum,...Pe(e)})}class bo extends Oe{constructor(){super(...arguments),cc.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ne(n,{expected:ze.joinValues(r),received:n.parsedType,code:Q.invalid_type}),Ee}if(Np(this,cc)||U1(this,cc,new Set(this._def.values)),!Np(this,cc).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return ne(n,{received:n.data,code:Q.invalid_enum_value,options:r}),Ee}return Ln(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return bo.create(e,{...this._def,...n})}exclude(e,n=this._def){return bo.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}cc=new WeakMap;bo.create=W1;class yd extends Oe{constructor(){super(...arguments),dc.set(this,void 0)}_parse(e){const n=ze.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ae.string&&r.parsedType!==ae.number){const s=ze.objectValues(n);return ne(r,{expected:ze.joinValues(s),received:r.parsedType,code:Q.invalid_type}),Ee}if(Np(this,dc)||U1(this,dc,new Set(ze.getValidEnumValues(this._def.values))),!Np(this,dc).has(e.data)){const s=ze.objectValues(n);return ne(r,{received:r.data,code:Q.invalid_enum_value,options:s}),Ee}return Ln(e.data)}get enum(){return this._def.values}}dc=new WeakMap;yd.create=(t,e)=>new yd({values:t,typeName:we.ZodNativeEnum,...Pe(e)});class uu extends Oe{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ae.promise&&n.common.async===!1)return ne(n,{code:Q.invalid_type,expected:ae.promise,received:n.parsedType}),Ee;const r=n.parsedType===ae.promise?n.data:Promise.resolve(n.data);return Ln(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}uu.create=(t,e)=>new uu({type:t,typeName:we.ZodPromise,...Pe(e)});class Wr extends Oe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===we.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ne(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Ee;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?Ee:l.status==="dirty"||n.value==="dirty"?pl(l.value):l});{if(n.value==="aborted")return Ee;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Ee:a.status==="dirty"||n.value==="dirty"?pl(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ee:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Ee:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Sa(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Sa(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);ze.assertNever(s)}}Wr.create=(t,e,n)=>new Wr({schema:t,typeName:we.ZodEffects,effect:e,...Pe(n)});Wr.createWithPreprocess=(t,e,n)=>new Wr({schema:e,effect:{type:"preprocess",transform:t},typeName:we.ZodEffects,...Pe(n)});class _s extends Oe{_parse(e){return this._getType(e)===ae.undefined?Ln(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}_s.create=(t,e)=>new _s({innerType:t,typeName:we.ZodOptional,...Pe(e)});class To extends Oe{_parse(e){return this._getType(e)===ae.null?Ln(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}To.create=(t,e)=>new To({innerType:t,typeName:we.ZodNullable,...Pe(e)});class vd extends Oe{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ae.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}vd.create=(t,e)=>new vd({innerType:t,typeName:we.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Pe(e)});class _d extends Oe{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return ld(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new lr(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new lr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}_d.create=(t,e)=>new _d({innerType:t,typeName:we.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Pe(e)});class Lp extends Oe{_parse(e){if(this._getType(e)!==ae.nan){const r=this._getOrReturnCtx(e);return ne(r,{code:Q.invalid_type,expected:ae.nan,received:r.parsedType}),Ee}return{status:"valid",value:e.data}}}Lp.create=t=>new Lp({typeName:we.ZodNaN,...Pe(t)});const e6=Symbol("zod_brand");class $0 extends Oe{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class ef extends Oe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ee:i.status==="dirty"?(n.dirty(),pl(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ee:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new ef({in:e,out:n,typeName:we.ZodPipeline})}}class wd extends Oe{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Sa(s)&&(s.value=Object.freeze(s.value)),s);return ld(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}wd.create=(t,e)=>new wd({innerType:t,typeName:we.ZodReadonly,...Pe(e)});function hS(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function H1(t,e={},n){return t?lu.create().superRefine((r,s)=>{var i,o;const a=t(r);if(a instanceof Promise)return a.then(l=>{var u,f;if(!l){const d=hS(e,r),h=(f=(u=d.fatal)!==null&&u!==void 0?u:n)!==null&&f!==void 0?f:!0;s.addIssue({code:"custom",...d,fatal:h})}});if(!a){const l=hS(e,r),u=(o=(i=l.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0;s.addIssue({code:"custom",...l,fatal:u})}}):lu.create()}const t6={object:ht.lazycreate};var we;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(we||(we={}));const n6=(t,e={message:`Input not instance of ${t.name}`})=>H1(n=>n instanceof t,e),q1=Mr.create,G1=xo.create,r6=Lp.create,s6=Eo.create,K1=ud.create,i6=Ca.create,o6=Dp.create,a6=cd.create,l6=dd.create,u6=lu.create,c6=da.create,d6=hi.create,f6=Op.create,h6=Ur.create,p6=ht.create,m6=ht.strictCreate,g6=fd.create,y6=jm.create,v6=hd.create,_6=Cs.create,w6=pd.create,x6=Mp.create,E6=Ia.create,b6=Il.create,T6=md.create,S6=gd.create,C6=bo.create,I6=yd.create,R6=uu.create,pS=Wr.create,k6=_s.create,A6=To.create,P6=Wr.createWithPreprocess,N6=ef.create,D6=()=>q1().optional(),O6=()=>G1().optional(),M6=()=>K1().optional(),L6={string:t=>Mr.create({...t,coerce:!0}),number:t=>xo.create({...t,coerce:!0}),boolean:t=>ud.create({...t,coerce:!0}),bigint:t=>Eo.create({...t,coerce:!0}),date:t=>Ca.create({...t,coerce:!0})},j6=Ee;var Cr=Object.freeze({__proto__:null,defaultErrorMap:au,setErrorMap:PB,getErrorMap:Ap,makeIssue:Pp,EMPTY_PATH:NB,addIssueToContext:ne,ParseStatus:Sn,INVALID:Ee,DIRTY:pl,OK:Ln,isAborted:r_,isDirty:s_,isValid:Sa,isAsync:ld,get util(){return ze},get objectUtil(){return n_},ZodParsedType:ae,getParsedType:zs,ZodType:Oe,datetimeRegex:z1,ZodString:Mr,ZodNumber:xo,ZodBigInt:Eo,ZodBoolean:ud,ZodDate:Ca,ZodSymbol:Dp,ZodUndefined:cd,ZodNull:dd,ZodAny:lu,ZodUnknown:da,ZodNever:hi,ZodVoid:Op,ZodArray:Ur,ZodObject:ht,ZodUnion:fd,ZodDiscriminatedUnion:jm,ZodIntersection:hd,ZodTuple:Cs,ZodRecord:pd,ZodMap:Mp,ZodSet:Ia,ZodFunction:Il,ZodLazy:md,ZodLiteral:gd,ZodEnum:bo,ZodNativeEnum:yd,ZodPromise:uu,ZodEffects:Wr,ZodTransformer:Wr,ZodOptional:_s,ZodNullable:To,ZodDefault:vd,ZodCatch:_d,ZodNaN:Lp,BRAND:e6,ZodBranded:$0,ZodPipeline:ef,ZodReadonly:wd,custom:H1,Schema:Oe,ZodSchema:Oe,late:t6,get ZodFirstPartyTypeKind(){return we},coerce:L6,any:u6,array:h6,bigint:s6,boolean:K1,date:i6,discriminatedUnion:y6,effect:pS,enum:C6,function:b6,instanceof:n6,intersection:v6,lazy:T6,literal:S6,map:x6,nan:r6,nativeEnum:I6,never:d6,null:l6,nullable:A6,number:G1,object:p6,oboolean:M6,onumber:O6,optional:k6,ostring:D6,pipeline:N6,preprocess:P6,promise:R6,record:w6,set:E6,strictObject:m6,string:q1,symbol:o6,transformer:pS,tuple:_6,undefined:a6,union:g6,unknown:c6,void:f6,NEVER:j6,ZodIssueCode:Q,quotelessJson:AB,ZodError:lr});async function V6(t,e){const n=R1(J3,`cards/${e}/${Date.now()}-${t.name}`);return await C1(n,t),I1(n)}function mS(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function B0(...t){return e=>{let n=!1;const r=t.map(s=>{const i=mS(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():mS(t[s],null)}}}}function Qt(...t){return y.useCallback(B0(...t),t)}function cu(t){const e=U6(t),n=y.forwardRef((r,s)=>{const{children:i,...o}=r,a=y.Children.toArray(i),l=a.find(B6);if(l){const u=l.props.children,f=a.map(d=>d===l?y.Children.count(u)>1?y.Children.only(null):y.isValidElement(u)?u.props.children:null:d);return p.jsx(e,{...o,ref:s,children:y.isValidElement(u)?y.cloneElement(u,void 0,f):null})}return p.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var F6=cu("Slot");function U6(t){const e=y.forwardRef((n,r)=>{const{children:s,...i}=n,o=y.isValidElement(s)?W6(s):void 0,a=Qt(o,r);if(y.isValidElement(s)){const l=z6(i,s.props);return s.type!==y.Fragment&&(l.ref=a),y.cloneElement(s,l)}return y.Children.count(s)>1?y.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var $6=Symbol("radix.slottable");function B6(t){return y.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===$6}function z6(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function W6(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Q1(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Q1(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Y1(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Q1(t))&&(r&&(r+=" "),r+=e);return r}const gS=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,yS=Y1,H6=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return yS(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const f=n==null?void 0:n[u],d=i==null?void 0:i[u];if(f===null)return null;const h=gS(f)||gS(d);return s[u][h]}),a=n&&Object.entries(n).reduce((u,f)=>{let[d,h]=f;return h===void 0||(u[d]=h),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,f)=>{let{class:d,className:h,...g}=f;return Object.entries(g).every(_=>{let[E,x]=_;return Array.isArray(x)?x.includes({...i,...a}[E]):{...i,...a}[E]===x})?[...u,d,h]:u},[]);return yS(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},z0="-",q6=t=>{const e=K6(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(z0);return a[0]===""&&a.length!==1&&a.shift(),Z1(a,e)||G6(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},Z1=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?Z1(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(z0);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},vS=/^\[(.+)\]$/,G6=t=>{if(vS.test(t)){const e=vS.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},K6=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const s in n)o_(n[s],r,s,e);return r},o_=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:_S(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(Q6(s)){o_(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{o_(o,_S(e,i),n,r)})})},_S=(t,e)=>{let n=t;return e.split(z0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Q6=t=>t.isThemeGetter,Y6=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},a_="!",l_=":",Z6=l_.length,X6=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const i=[];let o=0,a=0,l=0,u;for(let _=0;_<s.length;_++){let E=s[_];if(o===0&&a===0){if(E===l_){i.push(s.slice(l,_)),l=_+Z6;continue}if(E==="/"){u=_;continue}}E==="["?o++:E==="]"?o--:E==="("?a++:E===")"&&a--}const f=i.length===0?s:s.substring(l),d=J6(f),h=d!==f,g=u&&u>l?u-l:void 0;return{modifiers:i,hasImportantModifier:h,baseClassName:d,maybePostfixModifierPosition:g}};if(e){const s=e+l_,i=r;r=o=>o.startsWith(s)?i(o.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},J6=t=>t.endsWith(a_)?t.substring(0,t.length-1):t.startsWith(a_)?t.substring(1):t,ez=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let i=[];return r.forEach(o=>{o[0]==="["||e[o]?(s.push(...i.sort(),o),i=[]):i.push(o)}),s.push(...i.sort()),s}},tz=t=>({cache:Y6(t.cacheSize),parseClassName:X6(t),sortModifiers:ez(t),...q6(t)}),nz=/\s+/,rz=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=e,o=[],a=t.trim().split(nz);let l="";for(let u=a.length-1;u>=0;u-=1){const f=a[u],{isExternal:d,modifiers:h,hasImportantModifier:g,baseClassName:_,maybePostfixModifierPosition:E}=n(f);if(d){l=f+(l.length>0?" "+l:l);continue}let x=!!E,v=r(x?_.substring(0,E):_);if(!v){if(!x){l=f+(l.length>0?" "+l:l);continue}if(v=r(_),!v){l=f+(l.length>0?" "+l:l);continue}x=!1}const b=i(h).join(":"),T=g?b+a_:b,A=T+v;if(o.includes(A))continue;o.push(A);const O=s(v,x);for(let V=0;V<O.length;++V){const C=O[V];o.push(T+C)}l=f+(l.length>0?" "+l:l)}return l};function sz(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=X1(e))&&(r&&(r+=" "),r+=n);return r}const X1=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=X1(t[r]))&&(n&&(n+=" "),n+=e);return n};function iz(t,...e){let n,r,s,i=o;function o(l){const u=e.reduce((f,d)=>d(f),t());return n=tz(u),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const u=r(l);if(u)return u;const f=rz(l,n);return s(l,f),f}return function(){return i(sz.apply(null,arguments))}}const $t=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},J1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,eP=/^\((?:(\w[\w-]*):)?(.+)\)$/i,oz=/^\d+\/\d+$/,az=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,uz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,cz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,dz=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ka=t=>oz.test(t),Le=t=>!!t&&!Number.isNaN(Number(t)),Ri=t=>!!t&&Number.isInteger(Number(t)),ry=t=>t.endsWith("%")&&Le(t.slice(0,-1)),js=t=>az.test(t),fz=()=>!0,hz=t=>lz.test(t)&&!uz.test(t),tP=()=>!1,pz=t=>cz.test(t),mz=t=>dz.test(t),gz=t=>!de(t)&&!fe(t),yz=t=>Su(t,sP,tP),de=t=>J1.test(t),Bo=t=>Su(t,iP,hz),sy=t=>Su(t,Ez,Le),wS=t=>Su(t,nP,tP),vz=t=>Su(t,rP,mz),Jf=t=>Su(t,oP,pz),fe=t=>eP.test(t),Zu=t=>Cu(t,iP),_z=t=>Cu(t,bz),xS=t=>Cu(t,nP),wz=t=>Cu(t,sP),xz=t=>Cu(t,rP),eh=t=>Cu(t,oP,!0),Su=(t,e,n)=>{const r=J1.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Cu=(t,e,n=!1)=>{const r=eP.exec(t);return r?r[1]?e(r[1]):n:!1},nP=t=>t==="position"||t==="percentage",rP=t=>t==="image"||t==="url",sP=t=>t==="length"||t==="size"||t==="bg-size",iP=t=>t==="length",Ez=t=>t==="number",bz=t=>t==="family-name",oP=t=>t==="shadow",Tz=()=>{const t=$t("color"),e=$t("font"),n=$t("text"),r=$t("font-weight"),s=$t("tracking"),i=$t("leading"),o=$t("breakpoint"),a=$t("container"),l=$t("spacing"),u=$t("radius"),f=$t("shadow"),d=$t("inset-shadow"),h=$t("text-shadow"),g=$t("drop-shadow"),_=$t("blur"),E=$t("perspective"),x=$t("aspect"),v=$t("ease"),b=$t("animate"),T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],O=()=>[...A(),fe,de],V=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],S=()=>[fe,de,l],R=()=>[Ka,"full","auto",...S()],k=()=>[Ri,"none","subgrid",fe,de],N=()=>["auto",{span:["full",Ri,fe,de]},Ri,fe,de],D=()=>[Ri,"auto",fe,de],P=()=>["auto","min","max","fr",fe,de],ce=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],pe=()=>["start","end","center","stretch","center-safe","end-safe"],Z=()=>["auto",...S()],ge=()=>[Ka,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],j=()=>[t,fe,de],B=()=>[...A(),xS,wS,{position:[fe,de]}],X=()=>["no-repeat",{repeat:["","x","y","space","round"]}],te=()=>["auto","cover","contain",wz,yz,{size:[fe,de]}],le=()=>[ry,Zu,Bo],se=()=>["","none","full",u,fe,de],Ie=()=>["",Le,Zu,Bo],Ge=()=>["solid","dashed","dotted","double"],Ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],be=()=>[Le,ry,xS,wS],Ft=()=>["","none",_,fe,de],Ye=()=>["none",Le,fe,de],ut=()=>["none",Le,fe,de],Zt=()=>[Le,fe,de],Xt=()=>[Ka,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[js],breakpoint:[js],color:[fz],container:[js],"drop-shadow":[js],ease:["in","out","in-out"],font:[gz],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[js],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[js],shadow:[js],spacing:["px",Le],text:[js],"text-shadow":[js],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ka,de,fe,x]}],container:["container"],columns:[{columns:[Le,de,fe,a]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:O()}],overflow:[{overflow:V()}],"overflow-x":[{"overflow-x":V()}],"overflow-y":[{"overflow-y":V()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[Ri,"auto",fe,de]}],basis:[{basis:[Ka,"full","auto",a,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Le,Ka,"auto","initial","none",de]}],grow:[{grow:["",Le,fe,de]}],shrink:[{shrink:["",Le,fe,de]}],order:[{order:[Ri,"first","last","none",fe,de]}],"grid-cols":[{"grid-cols":k()}],"col-start-end":[{col:N()}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":k()}],"row-start-end":[{row:N()}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":P()}],"auto-rows":[{"auto-rows":P()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...ce(),"normal"]}],"justify-items":[{"justify-items":[...pe(),"normal"]}],"justify-self":[{"justify-self":["auto",...pe()]}],"align-content":[{content:["normal",...ce()]}],"align-items":[{items:[...pe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...pe(),{baseline:["","last"]}]}],"place-content":[{"place-content":ce()}],"place-items":[{"place-items":[...pe(),"baseline"]}],"place-self":[{"place-self":["auto",...pe()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:Z()}],mx:[{mx:Z()}],my:[{my:Z()}],ms:[{ms:Z()}],me:[{me:Z()}],mt:[{mt:Z()}],mr:[{mr:Z()}],mb:[{mb:Z()}],ml:[{ml:Z()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:ge()}],w:[{w:[a,"screen",...ge()]}],"min-w":[{"min-w":[a,"screen","none",...ge()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...ge()]}],h:[{h:["screen",...ge()]}],"min-h":[{"min-h":["screen","none",...ge()]}],"max-h":[{"max-h":["screen",...ge()]}],"font-size":[{text:["base",n,Zu,Bo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,fe,sy]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ry,de]}],"font-family":[{font:[_z,de,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,fe,de]}],"line-clamp":[{"line-clamp":[Le,"none",fe,sy]}],leading:[{leading:[i,...S()]}],"list-image":[{"list-image":["none",fe,de]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",fe,de]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:j()}],"text-color":[{text:j()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ge(),"wavy"]}],"text-decoration-thickness":[{decoration:[Le,"from-font","auto",fe,Bo]}],"text-decoration-color":[{decoration:j()}],"underline-offset":[{"underline-offset":[Le,"auto",fe,de]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fe,de]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fe,de]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:B()}],"bg-repeat":[{bg:X()}],"bg-size":[{bg:te()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ri,fe,de],radial:["",fe,de],conic:[Ri,fe,de]},xz,vz]}],"bg-color":[{bg:j()}],"gradient-from-pos":[{from:le()}],"gradient-via-pos":[{via:le()}],"gradient-to-pos":[{to:le()}],"gradient-from":[{from:j()}],"gradient-via":[{via:j()}],"gradient-to":[{to:j()}],rounded:[{rounded:se()}],"rounded-s":[{"rounded-s":se()}],"rounded-e":[{"rounded-e":se()}],"rounded-t":[{"rounded-t":se()}],"rounded-r":[{"rounded-r":se()}],"rounded-b":[{"rounded-b":se()}],"rounded-l":[{"rounded-l":se()}],"rounded-ss":[{"rounded-ss":se()}],"rounded-se":[{"rounded-se":se()}],"rounded-ee":[{"rounded-ee":se()}],"rounded-es":[{"rounded-es":se()}],"rounded-tl":[{"rounded-tl":se()}],"rounded-tr":[{"rounded-tr":se()}],"rounded-br":[{"rounded-br":se()}],"rounded-bl":[{"rounded-bl":se()}],"border-w":[{border:Ie()}],"border-w-x":[{"border-x":Ie()}],"border-w-y":[{"border-y":Ie()}],"border-w-s":[{"border-s":Ie()}],"border-w-e":[{"border-e":Ie()}],"border-w-t":[{"border-t":Ie()}],"border-w-r":[{"border-r":Ie()}],"border-w-b":[{"border-b":Ie()}],"border-w-l":[{"border-l":Ie()}],"divide-x":[{"divide-x":Ie()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ie()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ge(),"hidden","none"]}],"divide-style":[{divide:[...Ge(),"hidden","none"]}],"border-color":[{border:j()}],"border-color-x":[{"border-x":j()}],"border-color-y":[{"border-y":j()}],"border-color-s":[{"border-s":j()}],"border-color-e":[{"border-e":j()}],"border-color-t":[{"border-t":j()}],"border-color-r":[{"border-r":j()}],"border-color-b":[{"border-b":j()}],"border-color-l":[{"border-l":j()}],"divide-color":[{divide:j()}],"outline-style":[{outline:[...Ge(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Le,fe,de]}],"outline-w":[{outline:["",Le,Zu,Bo]}],"outline-color":[{outline:j()}],shadow:[{shadow:["","none",f,eh,Jf]}],"shadow-color":[{shadow:j()}],"inset-shadow":[{"inset-shadow":["none",d,eh,Jf]}],"inset-shadow-color":[{"inset-shadow":j()}],"ring-w":[{ring:Ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:j()}],"ring-offset-w":[{"ring-offset":[Le,Bo]}],"ring-offset-color":[{"ring-offset":j()}],"inset-ring-w":[{"inset-ring":Ie()}],"inset-ring-color":[{"inset-ring":j()}],"text-shadow":[{"text-shadow":["none",h,eh,Jf]}],"text-shadow-color":[{"text-shadow":j()}],opacity:[{opacity:[Le,fe,de]}],"mix-blend":[{"mix-blend":[...Ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Le]}],"mask-image-linear-from-pos":[{"mask-linear-from":be()}],"mask-image-linear-to-pos":[{"mask-linear-to":be()}],"mask-image-linear-from-color":[{"mask-linear-from":j()}],"mask-image-linear-to-color":[{"mask-linear-to":j()}],"mask-image-t-from-pos":[{"mask-t-from":be()}],"mask-image-t-to-pos":[{"mask-t-to":be()}],"mask-image-t-from-color":[{"mask-t-from":j()}],"mask-image-t-to-color":[{"mask-t-to":j()}],"mask-image-r-from-pos":[{"mask-r-from":be()}],"mask-image-r-to-pos":[{"mask-r-to":be()}],"mask-image-r-from-color":[{"mask-r-from":j()}],"mask-image-r-to-color":[{"mask-r-to":j()}],"mask-image-b-from-pos":[{"mask-b-from":be()}],"mask-image-b-to-pos":[{"mask-b-to":be()}],"mask-image-b-from-color":[{"mask-b-from":j()}],"mask-image-b-to-color":[{"mask-b-to":j()}],"mask-image-l-from-pos":[{"mask-l-from":be()}],"mask-image-l-to-pos":[{"mask-l-to":be()}],"mask-image-l-from-color":[{"mask-l-from":j()}],"mask-image-l-to-color":[{"mask-l-to":j()}],"mask-image-x-from-pos":[{"mask-x-from":be()}],"mask-image-x-to-pos":[{"mask-x-to":be()}],"mask-image-x-from-color":[{"mask-x-from":j()}],"mask-image-x-to-color":[{"mask-x-to":j()}],"mask-image-y-from-pos":[{"mask-y-from":be()}],"mask-image-y-to-pos":[{"mask-y-to":be()}],"mask-image-y-from-color":[{"mask-y-from":j()}],"mask-image-y-to-color":[{"mask-y-to":j()}],"mask-image-radial":[{"mask-radial":[fe,de]}],"mask-image-radial-from-pos":[{"mask-radial-from":be()}],"mask-image-radial-to-pos":[{"mask-radial-to":be()}],"mask-image-radial-from-color":[{"mask-radial-from":j()}],"mask-image-radial-to-color":[{"mask-radial-to":j()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[Le]}],"mask-image-conic-from-pos":[{"mask-conic-from":be()}],"mask-image-conic-to-pos":[{"mask-conic-to":be()}],"mask-image-conic-from-color":[{"mask-conic-from":j()}],"mask-image-conic-to-color":[{"mask-conic-to":j()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:B()}],"mask-repeat":[{mask:X()}],"mask-size":[{mask:te()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",fe,de]}],filter:[{filter:["","none",fe,de]}],blur:[{blur:Ft()}],brightness:[{brightness:[Le,fe,de]}],contrast:[{contrast:[Le,fe,de]}],"drop-shadow":[{"drop-shadow":["","none",g,eh,Jf]}],"drop-shadow-color":[{"drop-shadow":j()}],grayscale:[{grayscale:["",Le,fe,de]}],"hue-rotate":[{"hue-rotate":[Le,fe,de]}],invert:[{invert:["",Le,fe,de]}],saturate:[{saturate:[Le,fe,de]}],sepia:[{sepia:["",Le,fe,de]}],"backdrop-filter":[{"backdrop-filter":["","none",fe,de]}],"backdrop-blur":[{"backdrop-blur":Ft()}],"backdrop-brightness":[{"backdrop-brightness":[Le,fe,de]}],"backdrop-contrast":[{"backdrop-contrast":[Le,fe,de]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Le,fe,de]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Le,fe,de]}],"backdrop-invert":[{"backdrop-invert":["",Le,fe,de]}],"backdrop-opacity":[{"backdrop-opacity":[Le,fe,de]}],"backdrop-saturate":[{"backdrop-saturate":[Le,fe,de]}],"backdrop-sepia":[{"backdrop-sepia":["",Le,fe,de]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",fe,de]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Le,"initial",fe,de]}],ease:[{ease:["linear","initial",v,fe,de]}],delay:[{delay:[Le,fe,de]}],animate:[{animate:["none",b,fe,de]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[E,fe,de]}],"perspective-origin":[{"perspective-origin":O()}],rotate:[{rotate:Ye()}],"rotate-x":[{"rotate-x":Ye()}],"rotate-y":[{"rotate-y":Ye()}],"rotate-z":[{"rotate-z":Ye()}],scale:[{scale:ut()}],"scale-x":[{"scale-x":ut()}],"scale-y":[{"scale-y":ut()}],"scale-z":[{"scale-z":ut()}],"scale-3d":["scale-3d"],skew:[{skew:Zt()}],"skew-x":[{"skew-x":Zt()}],"skew-y":[{"skew-y":Zt()}],transform:[{transform:[fe,de,"","none","gpu","cpu"]}],"transform-origin":[{origin:O()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Xt()}],"translate-x":[{"translate-x":Xt()}],"translate-y":[{"translate-y":Xt()}],"translate-z":[{"translate-z":Xt()}],"translate-none":["translate-none"],accent:[{accent:j()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:j()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fe,de]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fe,de]}],fill:[{fill:["none",...j()]}],"stroke-w":[{stroke:[Le,Zu,Bo,sy]}],stroke:[{stroke:["none",...j()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Sz=iz(Tz);function lt(...t){return Sz(Y1(t))}const Cz=H6("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),kt=y.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?F6:"button";return p.jsx(o,{className:lt(Cz({variant:e,size:n,className:t})),ref:i,...s})});kt.displayName="Button";const An=y.forwardRef(({className:t,type:e,...n},r)=>p.jsx("input",{type:e,className:lt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));An.displayName="Input";function je(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Iz(t,e){const n=y.createContext(e),r=i=>{const{children:o,...a}=i,l=y.useMemo(()=>a,Object.values(a));return p.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=y.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function ja(t,e=[]){let n=[];function r(i,o){const a=y.createContext(o),l=n.length;n=[...n,o];const u=d=>{var v;const{scope:h,children:g,..._}=d,E=((v=h==null?void 0:h[t])==null?void 0:v[l])||a,x=y.useMemo(()=>_,Object.values(_));return p.jsx(E.Provider,{value:x,children:g})};u.displayName=i+"Provider";function f(d,h){var E;const g=((E=h==null?void 0:h[t])==null?void 0:E[l])||a,_=y.useContext(g);if(_)return _;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[u,f]}const s=()=>{const i=n.map(o=>y.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,Rz(s,...e)]}function Rz(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const d=l(i)[`__scope${u}`];return{...a,...d}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Hr=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},kz=_C[" useId ".trim().toString()]||(()=>{}),Az=0;function Rl(t){const[e,n]=y.useState(kz());return Hr(()=>{n(r=>r??String(Az++))},[t]),e?`radix-${e}`:""}var Pz=_C[" useInsertionEffect ".trim().toString()]||Hr;function W0({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=Nz({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const f=y.useRef(t!==void 0);y.useEffect(()=>{const d=f.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=a},[a,r])}const u=y.useCallback(f=>{var d;if(a){const h=Dz(f)?f(t):f;h!==t&&((d=o.current)==null||d.call(o,h))}else i(f)},[a,t,i,o]);return[l,u]}function Nz({defaultProp:t,onChange:e}){const[n,r]=y.useState(t),s=y.useRef(n),i=y.useRef(e);return Pz(()=>{i.current=e},[e]),y.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function Dz(t){return typeof t=="function"}var Oz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ft=Oz.reduce((t,e)=>{const n=cu(`Primitive.${e}`),r=y.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function aP(t,e){t&&om.flushSync(()=>t.dispatchEvent(e))}function Is(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Mz(t,e=globalThis==null?void 0:globalThis.document){const n=Is(t);y.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Lz="DismissableLayer",u_="dismissableLayer.update",jz="dismissableLayer.pointerDownOutside",Vz="dismissableLayer.focusOutside",ES,lP=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),H0=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,u=y.useContext(lP),[f,d]=y.useState(null),h=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=y.useState({}),_=Qt(e,C=>d(C)),E=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=E.indexOf(x),b=f?E.indexOf(f):-1,T=u.layersWithOutsidePointerEventsDisabled.size>0,A=b>=v,O=$z(C=>{const S=C.target,R=[...u.branches].some(k=>k.contains(S));!A||R||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},h),V=Bz(C=>{const S=C.target;[...u.branches].some(k=>k.contains(S))||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},h);return Mz(C=>{b===u.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},h),y.useEffect(()=>{if(f)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(ES=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),bS(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=ES)}},[f,h,n,u]),y.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),bS())},[f,u]),y.useEffect(()=>{const C=()=>g({});return document.addEventListener(u_,C),()=>document.removeEventListener(u_,C)},[]),p.jsx(ft.div,{...l,ref:_,style:{pointerEvents:T?A?"auto":"none":void 0,...t.style},onFocusCapture:je(t.onFocusCapture,V.onFocusCapture),onBlurCapture:je(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:je(t.onPointerDownCapture,O.onPointerDownCapture)})});H0.displayName=Lz;var Fz="DismissableLayerBranch",Uz=y.forwardRef((t,e)=>{const n=y.useContext(lP),r=y.useRef(null),s=Qt(e,r);return y.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),p.jsx(ft.div,{...t,ref:s})});Uz.displayName=Fz;function $z(t,e=globalThis==null?void 0:globalThis.document){const n=Is(t),r=y.useRef(!1),s=y.useRef(()=>{});return y.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){uP(jz,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Bz(t,e=globalThis==null?void 0:globalThis.document){const n=Is(t),r=y.useRef(!1);return y.useEffect(()=>{const s=i=>{i.target&&!r.current&&uP(Vz,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function bS(){const t=new CustomEvent(u_);document.dispatchEvent(t)}function uP(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?aP(s,i):s.dispatchEvent(i)}var iy="focusScope.autoFocusOnMount",oy="focusScope.autoFocusOnUnmount",TS={bubbles:!1,cancelable:!0},zz="FocusScope",q0=y.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=y.useState(null),u=Is(s),f=Is(i),d=y.useRef(null),h=Qt(e,E=>l(E)),g=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let E=function(T){if(g.paused||!a)return;const A=T.target;a.contains(A)?d.current=A:Pi(d.current,{select:!0})},x=function(T){if(g.paused||!a)return;const A=T.relatedTarget;A!==null&&(a.contains(A)||Pi(d.current,{select:!0}))},v=function(T){if(document.activeElement===document.body)for(const O of T)O.removedNodes.length>0&&Pi(a)};document.addEventListener("focusin",E),document.addEventListener("focusout",x);const b=new MutationObserver(v);return a&&b.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",E),document.removeEventListener("focusout",x),b.disconnect()}}},[r,a,g.paused]),y.useEffect(()=>{if(a){CS.add(g);const E=document.activeElement;if(!a.contains(E)){const v=new CustomEvent(iy,TS);a.addEventListener(iy,u),a.dispatchEvent(v),v.defaultPrevented||(Wz(Qz(cP(a)),{select:!0}),document.activeElement===E&&Pi(a))}return()=>{a.removeEventListener(iy,u),setTimeout(()=>{const v=new CustomEvent(oy,TS);a.addEventListener(oy,f),a.dispatchEvent(v),v.defaultPrevented||Pi(E??document.body,{select:!0}),a.removeEventListener(oy,f),CS.remove(g)},0)}}},[a,u,f,g]);const _=y.useCallback(E=>{if(!n&&!r||g.paused)return;const x=E.key==="Tab"&&!E.altKey&&!E.ctrlKey&&!E.metaKey,v=document.activeElement;if(x&&v){const b=E.currentTarget,[T,A]=Hz(b);T&&A?!E.shiftKey&&v===A?(E.preventDefault(),n&&Pi(T,{select:!0})):E.shiftKey&&v===T&&(E.preventDefault(),n&&Pi(A,{select:!0})):v===b&&E.preventDefault()}},[n,r,g.paused]);return p.jsx(ft.div,{tabIndex:-1,...o,ref:h,onKeyDown:_})});q0.displayName=zz;function Wz(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Pi(r,{select:e}),document.activeElement!==n)return}function Hz(t){const e=cP(t),n=SS(e,t),r=SS(e.reverse(),t);return[n,r]}function cP(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function SS(t,e){for(const n of t)if(!qz(n,{upTo:e}))return n}function qz(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Gz(t){return t instanceof HTMLInputElement&&"select"in t}function Pi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Gz(t)&&e&&t.select()}}var CS=Kz();function Kz(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=IS(t,e),t.unshift(e)},remove(e){var n;t=IS(t,e),(n=t[0])==null||n.resume()}}}function IS(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Qz(t){return t.filter(e=>e.tagName!=="A")}var Yz="Portal",G0=y.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=y.useState(!1);Hr(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?ER.createPortal(p.jsx(ft.div,{...r,ref:e}),o):null});G0.displayName=Yz;function Zz(t,e){return y.useReducer((n,r)=>e[n][r]??n,t)}var No=t=>{const{present:e,children:n}=t,r=Xz(e),s=typeof n=="function"?n({present:r.isPresent}):y.Children.only(n),i=Qt(r.ref,Jz(s));return typeof n=="function"||r.isPresent?y.cloneElement(s,{ref:i}):null};No.displayName="Presence";function Xz(t){const[e,n]=y.useState(),r=y.useRef(null),s=y.useRef(t),i=y.useRef("none"),o=t?"mounted":"unmounted",[a,l]=Zz(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const u=th(r.current);i.current=a==="mounted"?u:"none"},[a]),Hr(()=>{const u=r.current,f=s.current;if(f!==t){const h=i.current,g=th(u);t?l("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(f&&h!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Hr(()=>{if(e){let u;const f=e.ownerDocument.defaultView??window,d=g=>{const E=th(r.current).includes(g.animationName);if(g.target===e&&E&&(l("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",u=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},h=g=>{g.target===e&&(i.current=th(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{f.clearTimeout(u),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:y.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function th(t){return(t==null?void 0:t.animationName)||"none"}function Jz(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var ay=0;function dP(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??RS()),document.body.insertAdjacentElement("beforeend",t[1]??RS()),ay++,()=>{ay===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ay--}},[])}function RS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Dh="right-scroll-bar-position",Oh="width-before-scroll-bar",eW="with-scroll-bars-hidden",tW="--removed-body-scroll-bar-size";function ly(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function nW(t,e){var n=y.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var rW=typeof window<"u"?y.useLayoutEffect:y.useEffect,kS=new WeakMap;function sW(t,e){var n=nW(null,function(r){return t.forEach(function(s){return ly(s,r)})});return rW(function(){var r=kS.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||ly(a,null)}),i.forEach(function(a){s.has(a)||ly(a,o)})}kS.set(n,t)},[t]),n}function iW(t){return t}function oW(t,e){e===void 0&&(e=iW);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var f=o;o=[],f.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(f){o.push(f),u()},filter:function(f){return o=o.filter(f),n}}}};return s}function aW(t){t===void 0&&(t={});var e=oW(null);return e.options=cs({async:!0,ssr:!1},t),e}var fP=function(t){var e=t.sideCar,n=Vd(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,cs({},n))};fP.isSideCarExport=!0;function lW(t,e){return t.useMedium(e),fP}var hP=aW(),uy=function(){},Vm=y.forwardRef(function(t,e){var n=y.useRef(null),r=y.useState({onScrollCapture:uy,onWheelCapture:uy,onTouchMoveCapture:uy}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,f=t.enabled,d=t.shards,h=t.sideCar,g=t.noIsolation,_=t.inert,E=t.allowPinchZoom,x=t.as,v=x===void 0?"div":x,b=t.gapMode,T=Vd(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=h,O=sW([n,e]),V=cs(cs({},T),s);return y.createElement(y.Fragment,null,f&&y.createElement(A,{sideCar:hP,removeScrollBar:u,shards:d,noIsolation:g,inert:_,setCallbacks:i,allowPinchZoom:!!E,lockRef:n,gapMode:b}),o?y.cloneElement(y.Children.only(a),cs(cs({},V),{ref:O})):y.createElement(v,cs({},V,{className:l,ref:O}),a))});Vm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Vm.classNames={fullWidth:Oh,zeroRight:Dh};var uW=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function cW(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=uW();return e&&t.setAttribute("nonce",e),t}function dW(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function fW(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var hW=function(){var t=0,e=null;return{add:function(n){t==0&&(e=cW())&&(dW(e,n),fW(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},pW=function(){var t=hW();return function(e,n){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},pP=function(){var t=pW(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},mW={left:0,top:0,right:0,gap:0},cy=function(t){return parseInt(t||"",10)||0},gW=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[cy(n),cy(r),cy(s)]},yW=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return mW;var e=gW(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},vW=pP(),kl="data-scroll-locked",_W=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(eW,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(kl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Dh,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Oh,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Dh," .").concat(Dh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Oh," .").concat(Oh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(kl,`] {
    `).concat(tW,": ").concat(a,`px;
  }
`)},AS=function(){var t=parseInt(document.body.getAttribute(kl)||"0",10);return isFinite(t)?t:0},wW=function(){y.useEffect(function(){return document.body.setAttribute(kl,(AS()+1).toString()),function(){var t=AS()-1;t<=0?document.body.removeAttribute(kl):document.body.setAttribute(kl,t.toString())}},[])},xW=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;wW();var i=y.useMemo(function(){return yW(s)},[s]);return y.createElement(vW,{styles:_W(i,!e,s,n?"":"!important")})},c_=!1;if(typeof window<"u")try{var nh=Object.defineProperty({},"passive",{get:function(){return c_=!0,!0}});window.addEventListener("test",nh,nh),window.removeEventListener("test",nh,nh)}catch{c_=!1}var Qa=c_?{passive:!1}:!1,EW=function(t){return t.tagName==="TEXTAREA"},mP=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!EW(t)&&n[e]==="visible")},bW=function(t){return mP(t,"overflowY")},TW=function(t){return mP(t,"overflowX")},PS=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=gP(t,r);if(s){var i=yP(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},SW=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},CW=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},gP=function(t,e){return t==="v"?bW(e):TW(e)},yP=function(t,e){return t==="v"?SW(e):CW(e)},IW=function(t,e){return t==="h"&&e==="rtl"?-1:1},RW=function(t,e,n,r,s){var i=IW(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),u=!1,f=o>0,d=0,h=0;do{var g=yP(t,a),_=g[0],E=g[1],x=g[2],v=E-x-i*_;(_||v)&&gP(t,a)&&(d+=v,h+=_),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(f&&Math.abs(d)<1||!f&&Math.abs(h)<1)&&(u=!0),u},rh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},NS=function(t){return[t.deltaX,t.deltaY]},DS=function(t){return t&&"current"in t?t.current:t},kW=function(t,e){return t[0]===e[0]&&t[1]===e[1]},AW=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},PW=0,Ya=[];function NW(t){var e=y.useRef([]),n=y.useRef([0,0]),r=y.useRef(),s=y.useState(PW++)[0],i=y.useState(pP)[0],o=y.useRef(t);y.useEffect(function(){o.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var E=UV([t.lockRef.current],(t.shards||[]).map(DS),!0).filter(Boolean);return E.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),E.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=y.useCallback(function(E,x){if("touches"in E&&E.touches.length===2||E.type==="wheel"&&E.ctrlKey)return!o.current.allowPinchZoom;var v=rh(E),b=n.current,T="deltaX"in E?E.deltaX:b[0]-v[0],A="deltaY"in E?E.deltaY:b[1]-v[1],O,V=E.target,C=Math.abs(T)>Math.abs(A)?"h":"v";if("touches"in E&&C==="h"&&V.type==="range")return!1;var S=PS(C,V);if(!S)return!0;if(S?O=C:(O=C==="v"?"h":"v",S=PS(C,V)),!S)return!1;if(!r.current&&"changedTouches"in E&&(T||A)&&(r.current=O),!O)return!0;var R=r.current||O;return RW(R,x,E,R==="h"?T:A)},[]),l=y.useCallback(function(E){var x=E;if(!(!Ya.length||Ya[Ya.length-1]!==i)){var v="deltaY"in x?NS(x):rh(x),b=e.current.filter(function(O){return O.name===x.type&&(O.target===x.target||x.target===O.shadowParent)&&kW(O.delta,v)})[0];if(b&&b.should){x.cancelable&&x.preventDefault();return}if(!b){var T=(o.current.shards||[]).map(DS).filter(Boolean).filter(function(O){return O.contains(x.target)}),A=T.length>0?a(x,T[0]):!o.current.noIsolation;A&&x.cancelable&&x.preventDefault()}}},[]),u=y.useCallback(function(E,x,v,b){var T={name:E,delta:x,target:v,should:b,shadowParent:DW(v)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(A){return A!==T})},1)},[]),f=y.useCallback(function(E){n.current=rh(E),r.current=void 0},[]),d=y.useCallback(function(E){u(E.type,NS(E),E.target,a(E,t.lockRef.current))},[]),h=y.useCallback(function(E){u(E.type,rh(E),E.target,a(E,t.lockRef.current))},[]);y.useEffect(function(){return Ya.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Qa),document.addEventListener("touchmove",l,Qa),document.addEventListener("touchstart",f,Qa),function(){Ya=Ya.filter(function(E){return E!==i}),document.removeEventListener("wheel",l,Qa),document.removeEventListener("touchmove",l,Qa),document.removeEventListener("touchstart",f,Qa)}},[]);var g=t.removeScrollBar,_=t.inert;return y.createElement(y.Fragment,null,_?y.createElement(i,{styles:AW(s)}):null,g?y.createElement(xW,{gapMode:t.gapMode}):null)}function DW(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const OW=lW(hP,NW);var K0=y.forwardRef(function(t,e){return y.createElement(Vm,cs({},t,{ref:e,sideCar:OW}))});K0.classNames=Vm.classNames;var MW=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Za=new WeakMap,sh=new WeakMap,ih={},dy=0,vP=function(t){return t&&(t.host||vP(t.parentNode))},LW=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=vP(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},jW=function(t,e,n,r){var s=LW(e,Array.isArray(t)?t:[t]);ih[n]||(ih[n]=new WeakMap);var i=ih[n],o=[],a=new Set,l=new Set(s),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};s.forEach(u);var f=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))f(h);else try{var g=h.getAttribute(r),_=g!==null&&g!=="false",E=(Za.get(h)||0)+1,x=(i.get(h)||0)+1;Za.set(h,E),i.set(h,x),o.push(h),E===1&&_&&sh.set(h,!0),x===1&&h.setAttribute(n,"true"),_||h.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return f(e),a.clear(),dy++,function(){o.forEach(function(d){var h=Za.get(d)-1,g=i.get(d)-1;Za.set(d,h),i.set(d,g),h||(sh.has(d)||d.removeAttribute(r),sh.delete(d)),g||d.removeAttribute(n)}),dy--,dy||(Za=new WeakMap,Za=new WeakMap,sh=new WeakMap,ih={})}},_P=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=MW(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),jW(r,s,n,"aria-hidden")):function(){return null}},Fm="Dialog",[wP,UK]=ja(Fm),[VW,Yr]=wP(Fm),xP=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=y.useRef(null),l=y.useRef(null),[u,f]=W0({prop:r,defaultProp:s??!1,onChange:i,caller:Fm});return p.jsx(VW,{scope:e,triggerRef:a,contentRef:l,contentId:Rl(),titleId:Rl(),descriptionId:Rl(),open:u,onOpenChange:f,onOpenToggle:y.useCallback(()=>f(d=>!d),[f]),modal:o,children:n})};xP.displayName=Fm;var EP="DialogTrigger",bP=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Yr(EP,n),i=Qt(e,s.triggerRef);return p.jsx(ft.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Z0(s.open),...r,ref:i,onClick:je(t.onClick,s.onOpenToggle)})});bP.displayName=EP;var Q0="DialogPortal",[FW,TP]=wP(Q0,{forceMount:void 0}),SP=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Yr(Q0,e);return p.jsx(FW,{scope:e,forceMount:n,children:y.Children.map(r,o=>p.jsx(No,{present:n||i.open,children:p.jsx(G0,{asChild:!0,container:s,children:o})}))})};SP.displayName=Q0;var jp="DialogOverlay",CP=y.forwardRef((t,e)=>{const n=TP(jp,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Yr(jp,t.__scopeDialog);return i.modal?p.jsx(No,{present:r||i.open,children:p.jsx($W,{...s,ref:e})}):null});CP.displayName=jp;var UW=cu("DialogOverlay.RemoveScroll"),$W=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Yr(jp,n);return p.jsx(K0,{as:UW,allowPinchZoom:!0,shards:[s.contentRef],children:p.jsx(ft.div,{"data-state":Z0(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ra="DialogContent",IP=y.forwardRef((t,e)=>{const n=TP(Ra,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Yr(Ra,t.__scopeDialog);return p.jsx(No,{present:r||i.open,children:i.modal?p.jsx(BW,{...s,ref:e}):p.jsx(zW,{...s,ref:e})})});IP.displayName=Ra;var BW=y.forwardRef((t,e)=>{const n=Yr(Ra,t.__scopeDialog),r=y.useRef(null),s=Qt(e,n.contentRef,r);return y.useEffect(()=>{const i=r.current;if(i)return _P(i)},[]),p.jsx(RP,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:je(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:je(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:je(t.onFocusOutside,i=>i.preventDefault())})}),zW=y.forwardRef((t,e)=>{const n=Yr(Ra,t.__scopeDialog),r=y.useRef(!1),s=y.useRef(!1);return p.jsx(RP,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,u;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),RP=y.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=Yr(Ra,n),l=y.useRef(null),u=Qt(e,l);return dP(),p.jsxs(p.Fragment,{children:[p.jsx(q0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:p.jsx(H0,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Z0(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(WW,{titleId:a.titleId}),p.jsx(qW,{contentRef:l,descriptionId:a.descriptionId})]})]})}),Y0="DialogTitle",kP=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Yr(Y0,n);return p.jsx(ft.h2,{id:s.titleId,...r,ref:e})});kP.displayName=Y0;var AP="DialogDescription",PP=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Yr(AP,n);return p.jsx(ft.p,{id:s.descriptionId,...r,ref:e})});PP.displayName=AP;var NP="DialogClose",DP=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Yr(NP,n);return p.jsx(ft.button,{type:"button",...r,ref:e,onClick:je(t.onClick,()=>s.onOpenChange(!1))})});DP.displayName=NP;function Z0(t){return t?"open":"closed"}var OP="DialogTitleWarning",[$K,MP]=Iz(OP,{contentName:Ra,titleName:Y0,docsSlug:"dialog"}),WW=({titleId:t})=>{const e=MP(OP),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},HW="DialogDescriptionWarning",qW=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${MP(HW).contentName}}.`;return y.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},GW=xP,KW=bP,QW=SP,LP=CP,jP=IP,VP=kP,FP=PP,UP=DP;/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YW=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZW=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),OS=t=>{const e=ZW(t);return e.charAt(0).toUpperCase()+e.slice(1)},$P=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),XW=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>y.createElement("svg",{ref:l,...JW,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:$P("lucide",s),...!i&&!XW(a)&&{"aria-hidden":"true"},...a},[...o.map(([u,f])=>y.createElement(u,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=(t,e)=>{const n=y.forwardRef(({className:r,...s},i)=>y.createElement(e8,{ref:i,iconNode:e,className:$P(`lucide-${YW(OS(t))}`,`lucide-${t}`,r),...s}));return n.displayName=OS(t),n};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],n8=Zr("check",t8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],s8=Zr("chevron-right",r8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],o8=Zr("circle",i8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],l8=Zr("facebook",a8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],c8=Zr("heart",u8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],f8=Zr("link",d8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],p8=Zr("mail",h8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],g8=Zr("message-circle",m8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],v8=Zr("share-2",y8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],w8=Zr("twitter",_8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],E8=Zr("x",x8),X0=GW,b8=KW,T8=QW,S8=UP,BP=y.forwardRef(({className:t,...e},n)=>p.jsx(LP,{ref:n,className:lt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));BP.displayName=LP.displayName;const Um=y.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(T8,{children:[p.jsx(BP,{}),p.jsxs(jP,{ref:r,className:lt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-48 data-[state=closed]:slide-out-to-top-[48px] data-[state=open]:slide-in-from-left-48 data-[state=open]:slide-in-from-top-[48px] sm:rounded-lg max-h-[90vh] overflow-y-auto",t),...n,children:[e,p.jsxs(UP,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[p.jsx(E8,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Um.displayName=jP.displayName;const $m=({className:t,...e})=>p.jsx("div",{className:lt("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});$m.displayName="DialogHeader";const J0=({className:t,...e})=>p.jsx("div",{className:lt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});J0.displayName="DialogFooter";const Bm=y.forwardRef(({className:t,...e},n)=>p.jsx(VP,{ref:n,className:lt("text-lg font-semibold leading-none tracking-tight",t),...e}));Bm.displayName=VP.displayName;const ex=y.forwardRef(({className:t,...e},n)=>p.jsx(FP,{ref:n,className:lt("text-sm text-muted-foreground",t),...e}));ex.displayName=FP.displayName;const C8=Cr.object({playerName:Cr.string().min(1,"Player name is required"),year:Cr.string().min(1,"Year is required"),cardSet:Cr.string().min(1,"Card set is required"),variation:Cr.string().optional(),cardNumber:Cr.string().min(1,"Card number is required"),condition:Cr.string().min(1,"Condition is required"),pricePaid:Cr.number().optional(),currentValue:Cr.number().optional(),image:Cr.instanceof(File).optional(),tags:Cr.string().optional()});function I8({isOpen:t,onClose:e,onCardAdded:n}){const{user:r}=Yt(),{addCard:s}=Xd(),[i,o]=y.useState(!1),{register:a,handleSubmit:l,reset:u,setValue:f,formState:{errors:d}}=SB({resolver:kB(C8)}),h=async g=>{if(r)try{o(!0);let _;g.image&&(_=await V6(g.image,r.uid));const{image:E,tags:x,...v}=g,b={...v,ownerId:r.uid,..._?{imageUrl:_}:{},...x?{tags:x.split(",").map(T=>T.trim()).filter(Boolean)}:{}};await s(b),u(),e(),n==null||n(),Ae.success("Card added successfully")}catch(_){console.error("Error adding card:",_),Ae.error("Failed to add card")}finally{o(!1)}};return p.jsx(X0,{open:t,onOpenChange:e,children:p.jsxs(Um,{className:"max-h-[90vh] overflow-y-auto bg-white",children:[p.jsx($m,{children:p.jsx(Bm,{className:"text-2xl font-bold text-gray-900",children:"Add New Card"})}),p.jsxs("form",{onSubmit:l(h),className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Player Name"}),p.jsx(An,{...a("playerName"),className:"mt-1"}),d.playerName&&p.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.playerName.message})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Year"}),p.jsx(An,{...a("year"),className:"mt-1"}),d.year&&p.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.year.message})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Card Set"}),p.jsx(An,{...a("cardSet"),className:"mt-1"}),d.cardSet&&p.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.cardSet.message})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Variation (Optional)"}),p.jsx(An,{...a("variation"),className:"mt-1"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Card Number"}),p.jsx(An,{...a("cardNumber"),className:"mt-1"}),d.cardNumber&&p.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.cardNumber.message})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Condition"}),p.jsx(An,{...a("condition"),placeholder:"Enter condition (e.g., PSA 9, Raw, etc.)",className:"mt-1"}),d.condition&&p.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.condition.message})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Price Paid"}),p.jsx(An,{type:"number",step:"0.01",...a("pricePaid",{valueAsNumber:!0}),className:"mt-1"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Current Value"}),p.jsx(An,{type:"number",step:"0.01",...a("currentValue",{valueAsNumber:!0}),className:"mt-1"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Tags (comma separated)"}),p.jsx(An,{...a("tags"),placeholder:"e.g. Rookie, Jazz, Holo",className:"mt-1"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Card Image (Optional)"}),p.jsx(An,{type:"file",accept:"image/*",onChange:g=>{var E;const _=(E=g.target.files)==null?void 0:E[0];_&&f("image",_)},className:"mt-1"})]}),p.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[p.jsx(kt,{type:"button",variant:"outline",onClick:e,disabled:i,className:"text-gray-900",children:"Cancel"}),p.jsx(kt,{type:"submit",disabled:i,children:i?"Adding...":"Add Card"})]})]})]})})}let R8={data:""},k8=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||R8,A8=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,P8=/\/\*[^]*?\*\/|  +/g,MS=/\n+/g,Bi=(t,e)=>{let n="",r="",s="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?Bi(o,i):i+"{"+Bi(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=Bi(o,e?e.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Bi.p?Bi.p(i,o):i+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},Vs={},zP=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+zP(t[n]);return e}return t},N8=(t,e,n,r,s)=>{let i=zP(t),o=Vs[i]||(Vs[i]=(l=>{let u=0,f=11;for(;u<l.length;)f=101*f+l.charCodeAt(u++)>>>0;return"go"+f})(i));if(!Vs[o]){let l=i!==t?t:(u=>{let f,d,h=[{}];for(;f=A8.exec(u.replace(P8,""));)f[4]?h.shift():f[3]?(d=f[3].replace(MS," ").trim(),h.unshift(h[0][d]=h[0][d]||{})):h[0][f[1]]=f[2].replace(MS," ").trim();return h[0]})(t);Vs[o]=Bi(s?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&Vs.g?Vs.g:null;return n&&(Vs.g=Vs[o]),((l,u,f,d)=>{d?u.data=u.data.replace(d,l):u.data.indexOf(l)===-1&&(u.data=f?l+u.data:u.data+l)})(Vs[o],e,r,a),o},D8=(t,e,n)=>t.reduce((r,s,i)=>{let o=e[i];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Bi(a,""):a===!1?"":a}return r+s+(o??"")},"");function zm(t){let e=this||{},n=t.call?t(e.p):t;return N8(n.unshift?n.raw?D8(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,k8(e.target),e.g,e.o,e.k)}let WP,d_,f_;zm.bind({g:1});let pi=zm.bind({k:1});function O8(t,e,n,r){Bi.p=e,WP=t,d_=n,f_=r}function Do(t,e){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;n.p=Object.assign({theme:d_&&d_()},a),n.o=/ *go\d+/.test(l),a.className=zm.apply(n,r)+(l?" "+l:"");let u=t;return t[0]&&(u=a.as||t,delete a.as),f_&&u[0]&&f_(a),WP(u,a)}return s}}var M8=t=>typeof t=="function",h_=(t,e)=>M8(t)?t(e):t,L8=(()=>{let t=0;return()=>(++t).toString()})(),j8=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),V8=20,HP=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,V8)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return HP(t,{type:t.toasts.find(i=>i.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},F8=[],fy={toasts:[],pausedAt:void 0},tx=t=>{fy=HP(fy,t),F8.forEach(e=>{e(fy)})},U8=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||L8()}),tf=t=>(e,n)=>{let r=U8(e,t,n);return tx({type:2,toast:r}),r.id},qn=(t,e)=>tf("blank")(t,e);qn.error=tf("error");qn.success=tf("success");qn.loading=tf("loading");qn.custom=tf("custom");qn.dismiss=t=>{tx({type:3,toastId:t})};qn.remove=t=>tx({type:4,toastId:t});qn.promise=(t,e,n)=>{let r=qn.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?h_(e.success,s):void 0;return i?qn.success(i,{id:r,...n,...n==null?void 0:n.success}):qn.dismiss(r),s}).catch(s=>{let i=e.error?h_(e.error,s):void 0;i?qn.error(i,{id:r,...n,...n==null?void 0:n.error}):qn.dismiss(r)}),t};var $8=pi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,B8=pi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,z8=pi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,W8=Do("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$8} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${B8} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${z8} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,H8=pi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,q8=Do("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${H8} 1s linear infinite;
`,G8=pi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,K8=pi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Q8=Do("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${G8} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${K8} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Y8=Do("div")`
  position: absolute;
`,Z8=Do("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,X8=pi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,J8=Do("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${X8} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,e7=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?y.createElement(J8,null,e):e:n==="blank"?null:y.createElement(Z8,null,y.createElement(q8,{...r}),n!=="loading"&&y.createElement(Y8,null,n==="error"?y.createElement(W8,{...r}):y.createElement(Q8,{...r})))},t7=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,n7=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,r7="0%{opacity:0;} 100%{opacity:1;}",s7="0%{opacity:1;} 100%{opacity:0;}",i7=Do("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,o7=Do("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,a7=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=j8()?[r7,s7]:[t7(n),n7(n)];return{animation:e?`${pi(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${pi(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};y.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?a7(t.position||e||"top-center",t.visible):{opacity:0},i=y.createElement(e7,{toast:t}),o=y.createElement(o7,{...t.ariaProps},h_(t.message,t));return y.createElement(i7,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):y.createElement(y.Fragment,null,i,o))});O8(y.createElement);zm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;const Xu=10;function l7({onEditCard:t,cards:e}){const{user:n}=Yt(),[r,s]=y.useState([]),[i,o]=y.useState(!e),[a,l]=y.useState(1),[u,f]=y.useState(null);y.useEffect(()=>{if(e){s(e),o(!1);return}(async()=>{if(n){o(!0);try{const E=Vt(De,"users",n.uid,"collection"),v=(await ar(E)).docs.map(b=>({id:b.id,...b.data()}));s(v)}catch(E){console.error("Error fetching cards:",E),f("Failed to load cards")}finally{o(!1)}}})()},[n,e]);const d=async _=>{if(n)try{await Ts(jt(De,"users",n.uid,"collection",_)),s(r.filter(E=>E.id!==_)),qn.success("Card deleted successfully")}catch(E){console.error("Error deleting card:",E),qn.error("Failed to delete card")}},h=r.slice((a-1)*Xu,a*Xu),g=Math.ceil(r.length/Xu);return i?p.jsx("div",{className:"flex justify-center items-center py-8",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}):r.length===0?p.jsx("div",{className:"text-center py-8 text-gray-500",children:"No cards in your collection yet. Add some cards to get started!"}):p.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[p.jsx("thead",{className:"bg-gray-50",children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player"}),p.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year"}),p.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Set"}),p.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Variation"}),p.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Condition"}),p.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Value"}),p.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"}),p.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),p.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(_=>{var E;return p.jsxs("tr",{className:"hover:bg-gray-50",children:[p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:_.playerName}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_.year}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_.cardSet}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_.variation}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_.condition}),p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",((E=_.currentValue)==null?void 0:E.toFixed(2))||"N/A"]}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_.tags&&_.tags.length>0?_.tags.join(", "):"—"}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:p.jsxs("div",{className:"flex justify-end space-x-2",children:[p.jsx("button",{onClick:()=>t==null?void 0:t(_),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),p.jsx("button",{onClick:()=>d(_.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},_.id)})})]})}),g>1&&p.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[p.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[p.jsx("button",{onClick:()=>l(_=>Math.max(1,_-1)),disabled:a===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Previous"}),p.jsx("button",{onClick:()=>l(_=>Math.min(g,_+1)),disabled:a===g,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Next"})]}),p.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[p.jsx("div",{children:p.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",p.jsx("span",{className:"font-medium",children:(a-1)*Xu+1})," to"," ",p.jsx("span",{className:"font-medium",children:Math.min(a*Xu,r.length)})," of"," ",p.jsx("span",{className:"font-medium",children:r.length})," results"]})}),p.jsx("div",{children:p.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:Array.from({length:g},(_,E)=>E+1).map(_=>p.jsx("button",{onClick:()=>l(_),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${a===_?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:_},_))})})]})]})]})}const u7={apiKey:"AIzaSyAfb2YtBxD5YEWrNpG0J3GN_g0ZfPzsoOE",authDomain:"sports-card-analyzer.firebaseapp.com",projectId:"sports-card-analyzer",storageBucket:"sports-card-analyzer.firebasestorage.app",messagingSenderId:"27312906394",appId:"1:27312906394:web:11296b8bb530daad5a7f23",measurementId:"G-YNZTKCHQT0"},nx=AV().length?dm():Rw(u7);mm(nx);const c7=KA(nx);M0(nx);const LS="http://localhost:8000";class d7{static async fetchCardMarketValue(e){try{const n={player:e.playerName,year:e.year,set:e.brand,number:e.cardNumber,condition:e.grade||"ungraded"},r=new URLSearchParams(n).toString(),s=await fetch(`${LS}/api/fetch-price?${r}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return(await s.json()).price||null}catch(n){return console.error("Error fetching market value:",n),null}}static async fetchLatestCardPrice(e){try{const n=new URLSearchParams({player:e.player,year:e.year,set:e.set,number:e.number,condition:e.condition}),r=await fetch(`${LS}/api/fetch-price?${n}`);if(!r.ok)throw new Error(`Failed to fetch card price: ${r.statusText}`);const s=await r.json();return{price:s.price||0,source:s.source||"Unknown",timestamp:new Date().toISOString()}}catch(n){throw console.error("Error fetching card price:",n),n}}static async updateAllCardValues(e){try{const n=Vt(c7,"users",e,"cards"),r=await ar(n);for(const s of r.docs){const i=s.data();try{const o=await this.fetchLatestCardPrice({player:i.playerName,year:i.year,set:i.brand,number:i.cardNumber,condition:i.grade||"ungraded"});await ou(s.ref,{currentValue:o.price,lastUpdated:o.timestamp,priceSource:o.source})}catch(o){console.error(`Failed to update card ${i.playerName}:`,o);continue}}}catch(n){throw console.error("Error updating card values:",n),n}}}class jS{static getUserCardsRef(e){return Vt(De,"users",e,"cards")}static getUserCollectionRef(e){return Vt(De,"users",e,"collection")}static getCardRef(e,n){return jt(De,"users",e,"cards",n)}static getCollectionCardRef(e,n){return jt(De,"users",e,"collection",n)}static async createCard(e,n){const r=new Date().toISOString(),s=this.getUserCardsRef(e),i={...n,ownerId:e,createdAt:r,updatedAt:r},o=await La(s,i);return{...i,id:o.id}}static async batchCreateCards(e,n){const r=Xg(De),s=new Date().toISOString(),i=this.getUserCardsRef(e),o=[];for(const a of n){const l=jt(i),u={...a,ownerId:e,createdAt:s,updatedAt:s};r.set(l,u),o.push({...u,id:l.id})}return await r.commit(),o}static async getCardsByOwner(e,n,r){const s=[];r&&s.push(Cp(r.field,r.direction)),n&&(s.push(Xv(n.pageSize)),n.startAfter&&s.push(WT(n.startAfter)));const i=this.getUserCardsRef(e),o=this.getUserCollectionRef(e),a=po(i,...s),l=po(o,...s),[u,f]=await Promise.all([ar(a),ar(l)]),d=new Map;return[...u.docs,...f.docs].forEach(g=>{d.has(g.id)||d.set(g.id,{id:g.id,...g.data()})}),{cards:Array.from(d.values()),lastDoc:u.docs[u.docs.length-1]||f.docs[f.docs.length-1]}}static async getCard(e,n){const r=this.getCardRef(e,n),s=this.getCollectionCardRef(e,n),i=await Ct(r);if(i.exists())return{id:i.id,...i.data()};const o=await Ct(s);return o.exists()?{id:o.id,...o.data()}:null}static async updateCard(e,n,r){const s=this.getCardRef(e,n),i=this.getCollectionCardRef(e,n),o={...r,updatedAt:new Date().toISOString()},a=await Ct(s),l=await Ct(i);if(a.exists())await ou(s,o);else if(l.exists())await ou(i,o);else throw new Error("Card not found in either collection");const u=await this.getCard(e,n);if(!u)throw new Error("Failed to retrieve updated card");return u}static async batchUpdateCards(e,n){const r=Xg(De),s=new Date().toISOString();for(const i of n){const o=this.getCardRef(e,i.id),a=this.getCollectionCardRef(e,i.id),l=await Ct(o),u=await Ct(a);l.exists()?r.update(o,{...i.data,updatedAt:s}):u.exists()&&r.update(a,{...i.data,updatedAt:s})}await r.commit()}static async deleteCard(e,n){const r=this.getCardRef(e,n),s=this.getCollectionCardRef(e,n),i=await Ct(r),o=await Ct(s);i.exists()&&await Ts(r),o.exists()&&await Ts(s)}static async batchDeleteCards(e,n){const r=Xg(De);for(const s of n){const i=this.getCardRef(e,s),o=this.getCollectionCardRef(e,s),a=await Ct(i),l=await Ct(o);a.exists()&&r.delete(i),l.exists()&&r.delete(o)}await r.commit()}static async searchCards(e,n,r,s){const i=[];n.playerName&&(i.push(Wn("playerName",">=",n.playerName)),i.push(Wn("playerName","<=",n.playerName+""))),n.year&&i.push(Wn("year","==",n.year)),n.brand&&i.push(Wn("brand","==",n.brand)),n.grade&&i.push(Wn("grade","==",n.grade)),n.minValue!==void 0&&i.push(Wn("currentValue",">=",n.minValue)),n.maxValue!==void 0&&i.push(Wn("currentValue","<=",n.maxValue)),s&&i.push(Cp(s.field,s.direction)),r&&(i.push(Xv(r.pageSize)),r.startAfter&&i.push(WT(r.startAfter)));const o=this.getUserCardsRef(e),a=po(o,...i),l=await ar(a);return{cards:l.docs.map(f=>({id:f.id,...f.data()})),lastDoc:l.docs[l.docs.length-1]}}static async fetchCardMarketValue(e){return d7.fetchCardMarketValue(e)}}async function f7(t,e){const n=M0(),r=R1(n,`cards/${e}/${Date.now()}-${t.name}`);return await C1(r,t),await I1(r)}const h7=({card:t,isOpen:e,onClose:n,onCardUpdated:r,onCardDeleted:s})=>{var E;const{user:i}=Yt(),[o,a]=y.useState(t),[l,u]=y.useState(!1),[f,d]=y.useState(null),h=async x=>{var b;const v=(b=x.target.files)==null?void 0:b[0];if(!(!v||!i))try{const T=await f7(v,i.uid);a(A=>({...A,imageUrl:T}))}catch{d("Failed to upload image")}},g=async x=>{if(x.preventDefault(),!i){d("You must be logged in to edit cards");return}u(!0),d(null);try{const v={playerName:o.playerName,year:o.year,cardSet:o.cardSet,variation:o.variation,cardNumber:o.cardNumber,condition:o.condition,imageUrl:o.imageUrl};await jS.updateCard(i.uid,o.id,v),r(),n()}catch{d("Failed to update card")}finally{u(!1)}},_=async()=>{if(!i){d("You must be logged in to delete cards");return}if(window.confirm("Are you sure you want to delete this card?")){u(!0),d(null);try{await jS.deleteCard(i.uid,o.id),s(),n()}catch{d("Failed to delete card")}finally{u(!1)}}};return e?p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:p.jsxs("div",{className:"bg-white p-6 rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:[p.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Edit Card"}),p.jsxs("form",{onSubmit:g,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"playerName",className:"block text-sm font-medium text-gray-700",children:"Player Name"}),p.jsx("input",{id:"playerName",type:"text",value:o.playerName,onChange:x=>a(v=>({...v,playerName:x.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"year",className:"block text-sm font-medium text-gray-700",children:"Year"}),p.jsx("input",{id:"year",type:"text",value:o.year,onChange:x=>a({...o,year:x.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"cardSet",className:"block text-sm font-medium text-gray-700",children:"Card Set"}),p.jsx("input",{id:"cardSet",type:"text",value:o.cardSet,onChange:x=>a(v=>({...v,cardSet:x.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"variation",className:"block text-sm font-medium text-gray-700",children:"Variation"}),p.jsx("input",{id:"variation",type:"text",value:o.variation,onChange:x=>a(v=>({...v,variation:x.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"cardNumber",className:"block text-sm font-medium text-gray-700",children:"Card Number"}),p.jsx("input",{id:"cardNumber",type:"text",value:o.cardNumber,onChange:x=>a(v=>({...v,cardNumber:x.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"condition",className:"block text-sm font-medium text-gray-700",children:"Condition"}),p.jsxs("select",{id:"condition",value:o.condition,onChange:x=>a(v=>({...v,condition:x.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,children:[p.jsx("option",{value:"Mint",children:"Mint"}),p.jsx("option",{value:"Near Mint",children:"Near Mint"}),p.jsx("option",{value:"Excellent",children:"Excellent"}),p.jsx("option",{value:"Good",children:"Good"}),p.jsx("option",{value:"Poor",children:"Poor"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"pricePaid",className:"block text-sm font-medium text-gray-700",children:"Price Paid ($)"}),p.jsx("input",{id:"pricePaid",type:"number",value:o.pricePaid,onChange:x=>a(v=>({...v,pricePaid:parseFloat(x.target.value)})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,min:"0",step:"0.01"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"currentValue",className:"block text-sm font-medium text-gray-700",children:"Current Value ($)"}),p.jsx("input",{id:"currentValue",type:"number",value:o.currentValue,onChange:x=>a(v=>({...v,currentValue:parseFloat(x.target.value)})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,min:"0",step:"0.01"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700",children:"Tags (comma separated)"}),p.jsx("input",{id:"tags",type:"text",value:((E=o.tags)==null?void 0:E.join(", "))||"",onChange:x=>a({...o,tags:x.target.value.split(",").map(v=>v.trim()).filter(Boolean)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700",children:"Image"}),p.jsx("input",{id:"image",type:"file",accept:"image/*",onChange:h,className:"mt-1 block w-full"}),l&&p.jsx("p",{className:"text-sm text-gray-500",children:"Uploading..."}),o.imageUrl&&p.jsx("img",{src:o.imageUrl,alt:o.playerName,className:"mt-2 h-32 w-auto object-contain"})]}),f&&p.jsx("p",{className:"text-red-500 text-sm",children:f}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("button",{type:"button",onClick:_,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Delete Card"}),p.jsxs("div",{className:"space-x-2",children:[p.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),p.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700",disabled:l,children:"Save Changes"})]})]})]})]})}):null},p7=()=>{const[t,e]=y.useState(!1),[n,r]=y.useState(null),[s,i]=y.useState(null),[o,a]=y.useState("table"),{user:l}=Yt(),{data:u=[]}=Xd(),f=Array.from(new Set(u.flatMap(x=>x.tags||[]))).sort(),d=n?u.filter(x=>{var v;return(v=x.tags)==null?void 0:v.includes(n)}):u,h=()=>e(!0),g=()=>e(!1),_=()=>{g()},E=x=>i(x);return p.jsxs("div",{className:"p-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h1",{className:"text-2xl font-bold",children:"My Collection"}),p.jsx(kt,{onClick:h,children:"+ Add Card"})]}),p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[p.jsx("button",{className:`px-3 py-1 text-sm rounded-full border ${n?"bg-white":"bg-blue-600 text-white"}`,onClick:()=>r(null),children:"All"}),f.map(x=>p.jsx("button",{className:`px-3 py-1 text-sm rounded-full border ${n===x?"bg-blue-600 text-white":"bg-white"}`,onClick:()=>r(x),children:x},x))]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{className:`px-3 py-1 text-sm rounded border ${o==="table"?"bg-gray-200":"bg-white"}`,onClick:()=>a("table"),children:"Table View"}),p.jsx("button",{className:`px-3 py-1 text-sm rounded border ${o==="grid"?"bg-gray-200":"bg-white"}`,onClick:()=>a("grid"),children:"Grid View"})]})]}),o==="table"?p.jsx(l7,{cards:d,onEditCard:E}):p.jsx(sB,{cards:d,onEditCard:E}),t&&p.jsx(I8,{isOpen:t,onClose:g,onCardAdded:_}),s&&p.jsx(h7,{card:s,isOpen:!!s,onClose:()=>i(null),onCardUpdated:_,onCardDeleted:_})]})};function p_({className:t,...e}){return p.jsx("div",{className:lt("animate-pulse rounded-md bg-muted",t),...e})}const m7=()=>{const{signInWithGoogle:t,loading:e,user:n}=Yt(),[r,s]=y.useState(!1),i=vi();y.useEffect(()=>{n&&i("/dashboard")},[n,i]);const o=async()=>{try{s(!0),await t()}catch(a){console.error("Error signing in with Google:",a)}finally{s(!1)}};return e?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"max-w-md w-full space-y-8",children:[p.jsx(p_,{className:"h-12 w-full"}),p.jsx(p_,{className:"h-10 w-full"})]})}):p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"max-w-md w-full space-y-8",children:[p.jsx("div",{children:p.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"})}),p.jsxs("div",{className:"mt-8 space-y-6",children:[p.jsx(kt,{onClick:o,className:"w-full",disabled:r,children:r?"Signing in...":"Sign in with Google"}),p.jsx("div",{className:"text-center",children:p.jsx(Li,{to:"/",className:"text-sm text-blue-600 hover:text-blue-500",children:"Back to home"})})]})]})})},g7=({children:t})=>{const{user:e,logout:n}=Yt(),r=vi(),s=async()=>{try{await n(),r("/login")}catch(i){console.error("Error signing out:",i)}};return p.jsxs("div",{className:"min-h-screen bg-gray-100",children:[p.jsx(Ck,{position:"top-right"}),p.jsx("nav",{className:"bg-white shadow-sm",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex justify-between h-16",children:[p.jsx("div",{className:"flex items-center",children:p.jsx(Li,{to:"/",className:"text-xl font-semibold text-gray-900",children:"Sports Card Tracker"})}),p.jsx("div",{className:"flex items-center space-x-4",children:e?p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx(Li,{to:"/dashboard",className:"text-sm text-gray-700 hover:text-gray-900",children:"Dashboard"}),p.jsx(Li,{to:"/collection",className:"text-sm text-gray-700 hover:text-gray-900",children:"Collection"}),p.jsx(Li,{to:"/display-cases",className:"text-sm text-gray-700 hover:text-gray-900",children:"Display Cases"}),p.jsx("button",{onClick:s,className:"text-sm text-red-600 hover:text-red-900",children:"Sign Out"})]}):p.jsx(Li,{to:"/login",className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Sign in"})})]})})}),p.jsx("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:t})]})};function y7(t){const[e,n]=y.useState(null),[r,s]=y.useState([]),[i,o]=y.useState(!0);return y.useEffect(()=>{(async()=>{var l,u;if(!t){o(!1);return}try{const f=await Ct(jt(De,"displayCases",t));if(!f.exists()){n(null),o(!1);return}const d=f.data(),h={id:f.id,publicId:d.publicId,userId:d.userId,name:d.name,description:d.description,background:d.background,isPublic:d.isPublic,cardIds:d.cardIds||[],createdAt:d.createdAt.toDate(),updatedAt:d.updatedAt.toDate(),likes:d.likes||0,comments:((l=d.comments)==null?void 0:l.map(g=>({...g,timestamp:g.timestamp.toDate()})))||[]};if(n(h),((u=d.cardIds)==null?void 0:u.length)>0){const g=po(Vt(De,"cards"),Wn("id","in",d.cardIds)),E=(await ar(g)).docs.map(x=>({id:x.id,...x.data()}));s(E)}}catch(f){console.error("Error fetching display case:",f),n(null)}finally{o(!1)}})()},[t]),{displayCase:e,cards:r,isLoading:i}}async function Wm({userId:t,actionType:e,cooldownPeriod:n=6e4,maxActions:r=5}){if(!t)return!0;try{const s=At.fromMillis(Date.now()-n),i=Vt(De,"userActions"),o=po(i,Wn("userId","==",t),Wn("actionType","==",e),Wn("timestamp",">=",s),Cp("timestamp","desc"),Xv(r+1));return(await ar(o)).size>r}catch(s){return console.error("Error checking spam:",s),!1}}async function Hm(t,e,n){try{const r=Vt(De,"userActions");await La(r,{userId:t,actionType:e,targetId:n,timestamp:At.now()})}catch(r){console.error("Error recording user action:",r)}}function m_(t){if(!t)return!1;const e=t.toLowerCase(),n=[/buy.{0,10}now/i,/\b(cash|money|dollars).{0,15}(fast|quick|easy)/i,/\b(click|check|visit).{0,10}(link|site|page|url)/i,/https?:\/\/\S+/g,/\b(viagra|cialis|drugs|pills|meds)\b/i,/\b(casino|gambling|poker|bet|slots)\b/i,/\b(sex|dating|hot|adult)\b/i];for(const i of n)if(i.test(e))return!0;const r=t.replace(/[^A-Z]/g,"").length,s=t.replace(/\s/g,"").length;return!!(s>10&&r/s>.5||/(.)\1{4,}/.test(t))}function v7({displayCaseId:t}){const{user:e}=Yt(),[n,r]=y.useState([]),[s,i]=y.useState(!1),[o,a]=y.useState(!1);y.useEffect(()=>{if(!e)return;const u=Vt(De,"likes"),f=po(u,Wn("displayCaseId","==",t)),d=a1(f,h=>{const _=h.docs.map(E=>E.data().userId);r(_),i(_.includes(e.uid))});return()=>d()},[t,e]);const l=async()=>{if(!e){Ae.error("Please sign in to like display cases");return}if(!o)try{if(a(!0),await Wm({userId:e.uid,actionType:"like",cooldownPeriod:1e4,maxActions:10})){Ae.error("Please slow down. You're liking too many things too quickly.");return}if(s){const f=Vt(De,"likes"),d=po(f,Wn("displayCaseId","==",t),Wn("userId","==",e.uid));(await ar(d)).forEach(async g=>{await Ts(g.ref)})}else await La(Vt(De,"likes"),{displayCaseId:t,userId:e.uid,timestamp:ad()}),await Hm(e.uid,"like",t)}catch(u){console.error("Error updating like:",u),Ae.error("Failed to update like")}finally{a(!1)}};return p.jsxs("button",{onClick:l,disabled:o,className:`flex items-center space-x-1 text-sm transition-colors ${s?"text-red-500":"text-gray-400 hover:text-red-500"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[p.jsx(c8,{className:`w-4 h-4 ${o?"animate-pulse":""}`,fill:s?"currentColor":"none"}),p.jsx("span",{children:n.length})]})}var qP={exports:{}},GP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var du=y;function _7(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var w7=typeof Object.is=="function"?Object.is:_7,x7=du.useState,E7=du.useEffect,b7=du.useLayoutEffect,T7=du.useDebugValue;function S7(t,e){var n=e(),r=x7({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return b7(function(){s.value=n,s.getSnapshot=e,hy(s)&&i({inst:s})},[t,n,e]),E7(function(){return hy(s)&&i({inst:s}),t(function(){hy(s)&&i({inst:s})})},[t]),T7(n),n}function hy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!w7(t,n)}catch{return!0}}function C7(t,e){return e()}var I7=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?C7:S7;GP.useSyncExternalStore=du.useSyncExternalStore!==void 0?du.useSyncExternalStore:I7;qP.exports=GP;var R7=qP.exports;function k7(){return R7.useSyncExternalStore(A7,()=>!0,()=>!1)}function A7(){return()=>{}}var rx="Avatar",[P7,BK]=ja(rx),[N7,KP]=P7(rx),QP=y.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=y.useState("idle");return p.jsx(N7,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:p.jsx(ft.span,{...r,ref:e})})});QP.displayName=rx;var YP="AvatarImage",ZP=y.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=KP(YP,n),a=D7(r,i),l=Is(u=>{s(u),o.onImageLoadingStatusChange(u)});return Hr(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?p.jsx(ft.img,{...i,ref:e,src:r}):null});ZP.displayName=YP;var XP="AvatarFallback",JP=y.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=KP(XP,n),[o,a]=y.useState(r===void 0);return y.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&i.imageLoadingStatus!=="loaded"?p.jsx(ft.span,{...s,ref:e}):null});JP.displayName=XP;function VS(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function D7(t,{referrerPolicy:e,crossOrigin:n}){const r=k7(),s=y.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,a]=y.useState(()=>VS(i,t));return Hr(()=>{a(VS(i,t))},[i,t]),Hr(()=>{const l=d=>()=>{a(d)};if(!i)return;const u=l("loaded"),f=l("error");return i.addEventListener("load",u),i.addEventListener("error",f),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",f)}},[i,n,e]),o}var eN=QP,tN=ZP,nN=JP;const rN=y.forwardRef(({className:t,...e},n)=>p.jsx(eN,{ref:n,className:lt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));rN.displayName=eN.displayName;const sN=y.forwardRef(({className:t,...e},n)=>p.jsx(tN,{ref:n,className:lt("aspect-square h-full w-full",t),...e}));sN.displayName=tN.displayName;const iN=y.forwardRef(({className:t,...e},n)=>p.jsx(nN,{ref:n,className:lt("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));iN.displayName=nN.displayName;function g_(t){"@babel/helpers - typeof";return g_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g_(t)}function Xr(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function xn(t){Xr(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||g_(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var O7={};function M7(){return O7}function FS(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function Mh(t,e){Xr(2,arguments);var n=xn(t),r=xn(e),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function L7(t,e){Xr(2,arguments);var n=xn(t),r=xn(e),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function j7(t,e){return Xr(2,arguments),xn(t).getTime()-xn(e).getTime()}var V7={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},F7="trunc";function U7(t){return V7[F7]}function $7(t){Xr(1,arguments);var e=xn(t);return e.setHours(23,59,59,999),e}function B7(t){Xr(1,arguments);var e=xn(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function z7(t){Xr(1,arguments);var e=xn(t);return $7(e).getTime()===B7(e).getTime()}function W7(t,e){Xr(2,arguments);var n=xn(t),r=xn(e),s=Mh(n,r),i=Math.abs(L7(n,r)),o;if(i<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);var a=Mh(n,r)===-s;z7(xn(t))&&i===1&&Mh(t,r)===1&&(a=!1),o=s*(i-Number(a))}return o===0?0:o}function H7(t,e,n){Xr(2,arguments);var r=j7(t,e)/1e3;return U7()(r)}var q7={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},G7=function(e,n,r){var s,i=q7[e];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function py(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var K7={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Q7={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Y7={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Z7={date:py({formats:K7,defaultWidth:"full"}),time:py({formats:Q7,defaultWidth:"full"}),dateTime:py({formats:Y7,defaultWidth:"full"})},X7={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},J7=function(e,n,r,s){return X7[e]};function Ju(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):i;s=t.formattingValues[o]||t.formattingValues[i]}else{var a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[a]}var u=t.argumentCallback?t.argumentCallback(e):e;return s[u]}}var eH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},tH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},nH={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},rH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},iH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},oH=function(e,n){var r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},aH={ordinalNumber:oH,era:Ju({values:eH,defaultWidth:"wide"}),quarter:Ju({values:tH,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Ju({values:nH,defaultWidth:"wide"}),day:Ju({values:rH,defaultWidth:"wide"}),dayPeriod:Ju({values:sH,defaultWidth:"wide",formattingValues:iH,defaultFormattingWidth:"wide"})};function ec(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;var o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?uH(a,function(d){return d.test(o)}):lH(a,function(d){return d.test(o)}),u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;var f=e.slice(o.length);return{value:u,rest:f}}}function lH(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function uH(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function cH(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var s=r[0],i=e.match(t.parsePattern);if(!i)return null;var o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(s.length);return{value:o,rest:a}}}var dH=/^(\d+)(th|st|nd|rd)?/i,fH=/\d+/i,hH={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},pH={any:[/^b/i,/^(a|c)/i]},mH={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},gH={any:[/1/i,/2/i,/3/i,/4/i]},yH={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},vH={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_H={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},wH={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},xH={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},EH={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},bH={ordinalNumber:cH({matchPattern:dH,parsePattern:fH,valueCallback:function(e){return parseInt(e,10)}}),era:ec({matchPatterns:hH,defaultMatchWidth:"wide",parsePatterns:pH,defaultParseWidth:"any"}),quarter:ec({matchPatterns:mH,defaultMatchWidth:"wide",parsePatterns:gH,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:ec({matchPatterns:yH,defaultMatchWidth:"wide",parsePatterns:vH,defaultParseWidth:"any"}),day:ec({matchPatterns:_H,defaultMatchWidth:"wide",parsePatterns:wH,defaultParseWidth:"any"}),dayPeriod:ec({matchPatterns:xH,defaultMatchWidth:"any",parsePatterns:EH,defaultParseWidth:"any"})},TH={code:"en-US",formatDistance:G7,formatLong:Z7,formatRelative:J7,localize:aH,match:bH,options:{weekStartsOn:0,firstWeekContainsDate:1}};function oN(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function SH(t){return oN({},t)}var US=1440,CH=2520,my=43200,IH=86400;function RH(t,e,n){var r,s;Xr(2,arguments);var i=M7(),o=(r=(s=n==null?void 0:n.locale)!==null&&s!==void 0?s:i.locale)!==null&&r!==void 0?r:TH;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=Mh(t,e);if(isNaN(a))throw new RangeError("Invalid time value");var l=oN(SH(n),{addSuffix:!!(n!=null&&n.addSuffix),comparison:a}),u,f;a>0?(u=xn(e),f=xn(t)):(u=xn(t),f=xn(e));var d=H7(f,u),h=(FS(f)-FS(u))/1e3,g=Math.round((d-h)/60),_;if(g<2)return n!=null&&n.includeSeconds?d<5?o.formatDistance("lessThanXSeconds",5,l):d<10?o.formatDistance("lessThanXSeconds",10,l):d<20?o.formatDistance("lessThanXSeconds",20,l):d<40?o.formatDistance("halfAMinute",0,l):d<60?o.formatDistance("lessThanXMinutes",1,l):o.formatDistance("xMinutes",1,l):g===0?o.formatDistance("lessThanXMinutes",1,l):o.formatDistance("xMinutes",g,l);if(g<45)return o.formatDistance("xMinutes",g,l);if(g<90)return o.formatDistance("aboutXHours",1,l);if(g<US){var E=Math.round(g/60);return o.formatDistance("aboutXHours",E,l)}else{if(g<CH)return o.formatDistance("xDays",1,l);if(g<my){var x=Math.round(g/US);return o.formatDistance("xDays",x,l)}else if(g<IH)return _=Math.round(g/my),o.formatDistance("aboutXMonths",_,l)}if(_=W7(f,u),_<12){var v=Math.round(g/my);return o.formatDistance("xMonths",v,l)}else{var b=_%12,T=Math.floor(_/12);return b<3?o.formatDistance("aboutXYears",T,l):b<9?o.formatDistance("overXYears",T,l):o.formatDistance("almostXYears",T+1,l)}}function kH(t,e){return Xr(1,arguments),RH(t,Date.now(),e)}function AH({displayCaseId:t}){const{user:e}=Yt(),[n,r]=y.useState([]),[s,i]=y.useState(""),[o,a]=y.useState(!1);y.useEffect(()=>{const u=Vt(De,"displayCases",t,"comments"),f=po(u,Cp("createdAt","desc")),d=a1(f,h=>{const g=h.docs.map(_=>({id:_.id,..._.data(),createdAt:_.data().createdAt.toDate()}));r(g)});return()=>d()},[t]);const l=async u=>{if(u.preventDefault(),!(!e||!s.trim()))try{if(a(!0),await Wm({userId:e.uid,actionType:"comment",cooldownPeriod:2e4,maxActions:5})){Ae.error("Please slow down. You're commenting too frequently.");return}if(m_(s)){Ae.error("Your comment contains inappropriate content.");return}const d=Vt(De,"displayCases",t,"comments");await La(d,{text:s.trim(),uid:e.uid,authorName:e.displayName||"Anonymous",photoURL:e.photoURL,createdAt:ad()}),await Hm(e.uid,"comment",t),i(""),Ae.success("Comment added successfully")}catch(f){console.error("Error adding comment:",f),Ae.error("Failed to add comment")}finally{a(!1)}};return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h3",{className:"text-lg font-semibold",children:["Comments (",n.length,")"]}),e?p.jsxs("form",{onSubmit:l,className:"flex gap-2",children:[p.jsx(An,{value:s,onChange:u=>i(u.target.value),placeholder:"Add a comment...",className:"flex-1",disabled:o}),p.jsx(kt,{type:"submit",disabled:o||!s.trim(),children:o?"Posting...":"Post"})]}):p.jsx("p",{className:"text-sm text-gray-500",children:"Please sign in to leave a comment"}),p.jsx("div",{className:"space-y-4",children:n.map(u=>p.jsxs("div",{className:"flex gap-3",children:[p.jsxs(rN,{children:[p.jsx(sN,{src:u.photoURL}),p.jsx(iN,{children:u.authorName.charAt(0).toUpperCase()})]}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"font-medium",children:u.authorName}),p.jsx("span",{className:"text-sm text-gray-500",children:kH(u.createdAt,{addSuffix:!0})})]}),p.jsx("p",{className:"text-sm mt-1",children:u.text})]})]},u.id))})]})}const aN=y.forwardRef(({className:t,...e},n)=>p.jsx("textarea",{className:lt("flex min-h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));aN.displayName="Textarea";var PH="Label",lN=y.forwardRef((t,e)=>p.jsx(ft.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));lN.displayName=PH;var uN=lN;const Lr=y.forwardRef(({className:t,...e},n)=>p.jsx(uN,{ref:n,className:lt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...e}));Lr.displayName=uN.displayName;function NH({sellerId:t,displayCaseId:e,sellerName:n}){const{user:r}=Yt(),[s,i]=y.useState(!1),[o,a]=y.useState(""),[l,u]=y.useState(""),[f,d]=y.useState(!1),[h,g]=y.useState(!1),_=async()=>{if(!r){Ae.error("Please sign in to message sellers");return}if(h){Ae.error("Please wait before sending another message");return}i(!0)},E=async()=>{if(!r){Ae.error("Please sign in to message sellers");return}if(!o.trim()||!l.trim()){Ae.error("Please enter both subject and message");return}if(o.length>500){Ae.error("Message is too long (500 character limit)");return}try{if(d(!0),await Wm({userId:r.uid,actionType:"message",cooldownPeriod:6e4,maxActions:3})){Ae.error("Please slow down. You're sending messages too frequently.");return}if(m_(o)||m_(l)){Ae.error("Your message contains inappropriate content.");return}await La(Vt(De,"messages"),{senderId:r.uid,senderName:r.displayName||"Anonymous",senderEmail:r.email,recipientId:t,displayCaseId:e,subject:l.trim(),message:o.trim(),timestamp:ad(),read:!1}),await Hm(r.uid,"message",t),Ae.success("Message sent successfully"),a(""),u(""),i(!1),g(!0),setTimeout(()=>g(!1),3e4)}catch(x){console.error("Error sending message:",x),Ae.error("Failed to send message")}finally{d(!1)}};return p.jsxs(p.Fragment,{children:[p.jsxs(kt,{onClick:_,variant:"outline",size:"sm",className:"flex items-center gap-2",disabled:h,children:[p.jsx(g8,{className:"w-4 h-4"}),"Message Seller"]}),p.jsx(X0,{open:s,onOpenChange:i,children:p.jsxs(Um,{className:"sm:max-w-[425px]",children:[p.jsxs($m,{children:[p.jsxs(Bm,{children:["Send message to ",n]}),p.jsx(ex,{children:"Ask a question about this display case or its cards."})]}),p.jsxs("div",{className:"grid gap-4 py-4",children:[p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(Lr,{htmlFor:"subject",className:"text-right",children:"Subject"}),p.jsx(An,{id:"subject",value:l,onChange:x=>u(x.target.value),className:"col-span-3",maxLength:100,disabled:f})]}),p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(Lr,{htmlFor:"message",className:"text-right",children:"Message"}),p.jsx(aN,{id:"message",value:o,onChange:x=>a(x.target.value),className:"col-span-3",rows:5,maxLength:500,disabled:f})]}),p.jsxs("div",{className:"col-span-full text-xs text-gray-500 text-right",children:[o.length,"/500 characters"]})]}),p.jsxs(J0,{children:[p.jsx(S8,{asChild:!0,children:p.jsx(kt,{variant:"outline",children:"Cancel"})}),p.jsx(kt,{onClick:E,disabled:f||!o.trim()||!l.trim(),children:f?"Sending...":"Send Message"})]})]})})]})}function cN(t){const e=t+"CollectionProvider",[n,r]=ja(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=E=>{const{scope:x,children:v}=E,b=q.useRef(null),T=q.useRef(new Map).current;return p.jsx(s,{scope:x,itemMap:T,collectionRef:b,children:v})};o.displayName=e;const a=t+"CollectionSlot",l=cu(a),u=q.forwardRef((E,x)=>{const{scope:v,children:b}=E,T=i(a,v),A=Qt(x,T.collectionRef);return p.jsx(l,{ref:A,children:b})});u.displayName=a;const f=t+"CollectionItemSlot",d="data-radix-collection-item",h=cu(f),g=q.forwardRef((E,x)=>{const{scope:v,children:b,...T}=E,A=q.useRef(null),O=Qt(x,A),V=i(f,v);return q.useEffect(()=>(V.itemMap.set(A,{ref:A,...T}),()=>void V.itemMap.delete(A))),p.jsx(h,{[d]:"",ref:O,children:b})});g.displayName=f;function _(E){const x=i(t+"CollectionConsumer",E);return q.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const T=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(x.itemMap.values()).sort((V,C)=>T.indexOf(V.ref.current)-T.indexOf(C.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:u,ItemSlot:g},_,r]}var DH=y.createContext(void 0);function dN(t){const e=y.useContext(DH);return t||e||"ltr"}const OH=["top","right","bottom","left"],So=Math.min,nr=Math.max,Vp=Math.round,oh=Math.floor,ws=t=>({x:t,y:t}),MH={left:"right",right:"left",bottom:"top",top:"bottom"},LH={start:"end",end:"start"};function y_(t,e,n){return nr(t,So(e,n))}function mi(t,e){return typeof t=="function"?t(e):t}function gi(t){return t.split("-")[0]}function Iu(t){return t.split("-")[1]}function sx(t){return t==="x"?"y":"x"}function ix(t){return t==="y"?"height":"width"}function ni(t){return["top","bottom"].includes(gi(t))?"y":"x"}function ox(t){return sx(ni(t))}function jH(t,e,n){n===void 0&&(n=!1);const r=Iu(t),s=ox(t),i=ix(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Fp(o)),[o,Fp(o)]}function VH(t){const e=Fp(t);return[v_(t),e,v_(e)]}function v_(t){return t.replace(/start|end/g,e=>LH[e])}function FH(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function UH(t,e,n,r){const s=Iu(t);let i=FH(gi(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(v_)))),i}function Fp(t){return t.replace(/left|right|bottom|top/g,e=>MH[e])}function $H(t){return{top:0,right:0,bottom:0,left:0,...t}}function fN(t){return typeof t!="number"?$H(t):{top:t,right:t,bottom:t,left:t}}function Up(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function $S(t,e,n){let{reference:r,floating:s}=t;const i=ni(e),o=ox(e),a=ix(o),l=gi(e),u=i==="y",f=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,h=r[a]/2-s[a]/2;let g;switch(l){case"top":g={x:f,y:r.y-s.height};break;case"bottom":g={x:f,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:d};break;case"left":g={x:r.x-s.width,y:d};break;default:g={x:r.x,y:r.y}}switch(Iu(e)){case"start":g[o]-=h*(n&&u?-1:1);break;case"end":g[o]+=h*(n&&u?-1:1);break}return g}const BH=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:f,y:d}=$S(u,r,l),h=r,g={},_=0;for(let E=0;E<a.length;E++){const{name:x,fn:v}=a[E],{x:b,y:T,data:A,reset:O}=await v({x:f,y:d,initialPlacement:r,placement:h,strategy:s,middlewareData:g,rects:u,platform:o,elements:{reference:t,floating:e}});f=b??f,d=T??d,g={...g,[x]:{...g[x],...A}},O&&_<=50&&(_++,typeof O=="object"&&(O.placement&&(h=O.placement),O.rects&&(u=O.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):O.rects),{x:f,y:d}=$S(u,h,l)),E=-1)}return{x:f,y:d,placement:h,strategy:s,middlewareData:g}};async function xd(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:h=!1,padding:g=0}=mi(e,t),_=fN(g),x=a[h?d==="floating"?"reference":"floating":d],v=Up(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:f,strategy:l})),b=d==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),A=await(i.isElement==null?void 0:i.isElement(T))?await(i.getScale==null?void 0:i.getScale(T))||{x:1,y:1}:{x:1,y:1},O=Up(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:T,strategy:l}):b);return{top:(v.top-O.top+_.top)/A.y,bottom:(O.bottom-v.bottom+_.bottom)/A.y,left:(v.left-O.left+_.left)/A.x,right:(O.right-v.right+_.right)/A.x}}const zH=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:f=0}=mi(t,e)||{};if(u==null)return{};const d=fN(f),h={x:n,y:r},g=ox(s),_=ix(g),E=await o.getDimensions(u),x=g==="y",v=x?"top":"left",b=x?"bottom":"right",T=x?"clientHeight":"clientWidth",A=i.reference[_]+i.reference[g]-h[g]-i.floating[_],O=h[g]-i.reference[g],V=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=V?V[T]:0;(!C||!await(o.isElement==null?void 0:o.isElement(V)))&&(C=a.floating[T]||i.floating[_]);const S=A/2-O/2,R=C/2-E[_]/2-1,k=So(d[v],R),N=So(d[b],R),D=k,P=C-E[_]-N,ce=C/2-E[_]/2+S,pe=y_(D,ce,P),Z=!l.arrow&&Iu(s)!=null&&ce!==pe&&i.reference[_]/2-(ce<D?k:N)-E[_]/2<0,ge=Z?ce<D?ce-D:ce-P:0;return{[g]:h[g]+ge,data:{[g]:pe,centerOffset:ce-pe-ge,...Z&&{alignmentOffset:ge}},reset:Z}}}),WH=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:E=!0,...x}=mi(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=gi(s),b=ni(a),T=gi(a)===a,A=await(l.isRTL==null?void 0:l.isRTL(u.floating)),O=h||(T||!E?[Fp(a)]:VH(a)),V=_!=="none";!h&&V&&O.push(...UH(a,E,_,A));const C=[a,...O],S=await xd(e,x),R=[];let k=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&R.push(S[v]),d){const pe=jH(s,o,A);R.push(S[pe[0]],S[pe[1]])}if(k=[...k,{placement:s,overflows:R}],!R.every(pe=>pe<=0)){var N,D;const pe=(((N=i.flip)==null?void 0:N.index)||0)+1,Z=C[pe];if(Z){var P;const j=d==="alignment"?b!==ni(Z):!1,B=((P=k[0])==null?void 0:P.overflows[0])>0;if(!j||B)return{data:{index:pe,overflows:k},reset:{placement:Z}}}let ge=(D=k.filter(j=>j.overflows[0]<=0).sort((j,B)=>j.overflows[1]-B.overflows[1])[0])==null?void 0:D.placement;if(!ge)switch(g){case"bestFit":{var ce;const j=(ce=k.filter(B=>{if(V){const X=ni(B.placement);return X===b||X==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(X=>X>0).reduce((X,te)=>X+te,0)]).sort((B,X)=>B[1]-X[1])[0])==null?void 0:ce[0];j&&(ge=j);break}case"initialPlacement":ge=a;break}if(s!==ge)return{reset:{placement:ge}}}return{}}}};function BS(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function zS(t){return OH.some(e=>t[e]>=0)}const HH=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=mi(t,e);switch(r){case"referenceHidden":{const i=await xd(e,{...s,elementContext:"reference"}),o=BS(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:zS(o)}}}case"escaped":{const i=await xd(e,{...s,altBoundary:!0}),o=BS(i,n.floating);return{data:{escapedOffsets:o,escaped:zS(o)}}}default:return{}}}}};async function qH(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=gi(n),a=Iu(n),l=ni(n)==="y",u=["left","top"].includes(o)?-1:1,f=i&&l?-1:1,d=mi(e,t);let{mainAxis:h,crossAxis:g,alignmentAxis:_}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof _=="number"&&(g=a==="end"?_*-1:_),l?{x:g*f,y:h*u}:{x:h*u,y:g*f}}const GH=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await qH(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},KH=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:v,y:b}=x;return{x:v,y:b}}},...l}=mi(t,e),u={x:n,y:r},f=await xd(e,l),d=ni(gi(s)),h=sx(d);let g=u[h],_=u[d];if(i){const x=h==="y"?"top":"left",v=h==="y"?"bottom":"right",b=g+f[x],T=g-f[v];g=y_(b,g,T)}if(o){const x=d==="y"?"top":"left",v=d==="y"?"bottom":"right",b=_+f[x],T=_-f[v];_=y_(b,_,T)}const E=a.fn({...e,[h]:g,[d]:_});return{...E,data:{x:E.x-n,y:E.y-r,enabled:{[h]:i,[d]:o}}}}}},QH=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=mi(t,e),f={x:n,y:r},d=ni(s),h=sx(d);let g=f[h],_=f[d];const E=mi(a,e),x=typeof E=="number"?{mainAxis:E,crossAxis:0}:{mainAxis:0,crossAxis:0,...E};if(l){const T=h==="y"?"height":"width",A=i.reference[h]-i.floating[T]+x.mainAxis,O=i.reference[h]+i.reference[T]-x.mainAxis;g<A?g=A:g>O&&(g=O)}if(u){var v,b;const T=h==="y"?"width":"height",A=["top","left"].includes(gi(s)),O=i.reference[d]-i.floating[T]+(A&&((v=o.offset)==null?void 0:v[d])||0)+(A?0:x.crossAxis),V=i.reference[d]+i.reference[T]+(A?0:((b=o.offset)==null?void 0:b[d])||0)-(A?x.crossAxis:0);_<O?_=O:_>V&&(_=V)}return{[h]:g,[d]:_}}}},YH=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...u}=mi(t,e),f=await xd(e,u),d=gi(s),h=Iu(s),g=ni(s)==="y",{width:_,height:E}=i.floating;let x,v;d==="top"||d==="bottom"?(x=d,v=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,x=h==="end"?"top":"bottom");const b=E-f.top-f.bottom,T=_-f.left-f.right,A=So(E-f[x],b),O=So(_-f[v],T),V=!e.middlewareData.shift;let C=A,S=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=b),V&&!h){const k=nr(f.left,0),N=nr(f.right,0),D=nr(f.top,0),P=nr(f.bottom,0);g?S=_-2*(k!==0||N!==0?k+N:nr(f.left,f.right)):C=E-2*(D!==0||P!==0?D+P:nr(f.top,f.bottom))}await l({...e,availableWidth:S,availableHeight:C});const R=await o.getDimensions(a.floating);return _!==R.width||E!==R.height?{reset:{rects:!0}}:{}}}};function qm(){return typeof window<"u"}function Ru(t){return hN(t)?(t.nodeName||"").toLowerCase():"#document"}function ur(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ps(t){var e;return(e=(hN(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function hN(t){return qm()?t instanceof Node||t instanceof ur(t).Node:!1}function qr(t){return qm()?t instanceof Element||t instanceof ur(t).Element:!1}function Rs(t){return qm()?t instanceof HTMLElement||t instanceof ur(t).HTMLElement:!1}function WS(t){return!qm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ur(t).ShadowRoot}function nf(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Gr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function ZH(t){return["table","td","th"].includes(Ru(t))}function Gm(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function ax(t){const e=lx(),n=qr(t)?Gr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function XH(t){let e=Co(t);for(;Rs(e)&&!fu(e);){if(ax(e))return e;if(Gm(e))return null;e=Co(e)}return null}function lx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function fu(t){return["html","body","#document"].includes(Ru(t))}function Gr(t){return ur(t).getComputedStyle(t)}function Km(t){return qr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Co(t){if(Ru(t)==="html")return t;const e=t.assignedSlot||t.parentNode||WS(t)&&t.host||Ps(t);return WS(e)?e.host:e}function pN(t){const e=Co(t);return fu(e)?t.ownerDocument?t.ownerDocument.body:t.body:Rs(e)&&nf(e)?e:pN(e)}function Ed(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=pN(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=ur(s);if(i){const a=__(o);return e.concat(o,o.visualViewport||[],nf(s)?s:[],a&&n?Ed(a):[])}return e.concat(s,Ed(s,[],n))}function __(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function mN(t){const e=Gr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Rs(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Vp(n)!==i||Vp(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function ux(t){return qr(t)?t:t.contextElement}function Al(t){const e=ux(t);if(!Rs(e))return ws(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=mN(e);let o=(i?Vp(n.width):n.width)/r,a=(i?Vp(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const JH=ws(0);function gN(t){const e=ur(t);return!lx()||!e.visualViewport?JH:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function eq(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ur(t)?!1:e}function ka(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=ux(t);let o=ws(1);e&&(r?qr(r)&&(o=Al(r)):o=Al(t));const a=eq(i,n,r)?gN(i):ws(0);let l=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,f=s.width/o.x,d=s.height/o.y;if(i){const h=ur(i),g=r&&qr(r)?ur(r):r;let _=h,E=__(_);for(;E&&r&&g!==_;){const x=Al(E),v=E.getBoundingClientRect(),b=Gr(E),T=v.left+(E.clientLeft+parseFloat(b.paddingLeft))*x.x,A=v.top+(E.clientTop+parseFloat(b.paddingTop))*x.y;l*=x.x,u*=x.y,f*=x.x,d*=x.y,l+=T,u+=A,_=ur(E),E=__(_)}}return Up({width:f,height:d,x:l,y:u})}function cx(t,e){const n=Km(t).scrollLeft;return e?e.left+n:ka(Ps(t)).left+n}function yN(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:cx(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function tq(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Ps(r),a=e?Gm(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},u=ws(1);const f=ws(0),d=Rs(r);if((d||!d&&!i)&&((Ru(r)!=="body"||nf(o))&&(l=Km(r)),Rs(r))){const g=ka(r);u=Al(r),f.x=g.x+r.clientLeft,f.y=g.y+r.clientTop}const h=o&&!d&&!i?yN(o,l,!0):ws(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+f.x+h.x,y:n.y*u.y-l.scrollTop*u.y+f.y+h.y}}function nq(t){return Array.from(t.getClientRects())}function rq(t){const e=Ps(t),n=Km(t),r=t.ownerDocument.body,s=nr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=nr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+cx(t);const a=-n.scrollTop;return Gr(r).direction==="rtl"&&(o+=nr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function sq(t,e){const n=ur(t),r=Ps(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const u=lx();(!u||u&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function iq(t,e){const n=ka(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Rs(t)?Al(t):ws(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,u=r*i.y;return{width:o,height:a,x:l,y:u}}function HS(t,e,n){let r;if(e==="viewport")r=sq(t,n);else if(e==="document")r=rq(Ps(t));else if(qr(e))r=iq(e,n);else{const s=gN(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Up(r)}function vN(t,e){const n=Co(t);return n===e||!qr(n)||fu(n)?!1:Gr(n).position==="fixed"||vN(n,e)}function oq(t,e){const n=e.get(t);if(n)return n;let r=Ed(t,[],!1).filter(a=>qr(a)&&Ru(a)!=="body"),s=null;const i=Gr(t).position==="fixed";let o=i?Co(t):t;for(;qr(o)&&!fu(o);){const a=Gr(o),l=ax(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||nf(o)&&!l&&vN(t,o))?r=r.filter(f=>f!==o):s=a,o=Co(o)}return e.set(t,r),r}function aq(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Gm(e)?[]:oq(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,f)=>{const d=HS(e,f,s);return u.top=nr(d.top,u.top),u.right=So(d.right,u.right),u.bottom=So(d.bottom,u.bottom),u.left=nr(d.left,u.left),u},HS(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function lq(t){const{width:e,height:n}=mN(t);return{width:e,height:n}}function uq(t,e,n){const r=Rs(e),s=Ps(e),i=n==="fixed",o=ka(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=ws(0);function u(){l.x=cx(s)}if(r||!r&&!i)if((Ru(e)!=="body"||nf(s))&&(a=Km(e)),r){const g=ka(e,!0,i,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else s&&u();i&&!r&&s&&u();const f=s&&!r&&!i?yN(s,a):ws(0),d=o.left+a.scrollLeft-l.x-f.x,h=o.top+a.scrollTop-l.y-f.y;return{x:d,y:h,width:o.width,height:o.height}}function gy(t){return Gr(t).position==="static"}function qS(t,e){if(!Rs(t)||Gr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ps(t)===n&&(n=n.ownerDocument.body),n}function _N(t,e){const n=ur(t);if(Gm(t))return n;if(!Rs(t)){let s=Co(t);for(;s&&!fu(s);){if(qr(s)&&!gy(s))return s;s=Co(s)}return n}let r=qS(t,e);for(;r&&ZH(r)&&gy(r);)r=qS(r,e);return r&&fu(r)&&gy(r)&&!ax(r)?n:r||XH(t)||n}const cq=async function(t){const e=this.getOffsetParent||_N,n=this.getDimensions,r=await n(t.floating);return{reference:uq(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function dq(t){return Gr(t).direction==="rtl"}const fq={convertOffsetParentRelativeRectToViewportRelativeRect:tq,getDocumentElement:Ps,getClippingRect:aq,getOffsetParent:_N,getElementRects:cq,getClientRects:nq,getDimensions:lq,getScale:Al,isElement:qr,isRTL:dq};function wN(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function hq(t,e){let n=null,r;const s=Ps(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const u=t.getBoundingClientRect(),{left:f,top:d,width:h,height:g}=u;if(a||e(),!h||!g)return;const _=oh(d),E=oh(s.clientWidth-(f+h)),x=oh(s.clientHeight-(d+g)),v=oh(f),T={rootMargin:-_+"px "+-E+"px "+-x+"px "+-v+"px",threshold:nr(0,So(1,l))||1};let A=!0;function O(V){const C=V[0].intersectionRatio;if(C!==l){if(!A)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!wN(u,t.getBoundingClientRect())&&o(),A=!1}try{n=new IntersectionObserver(O,{...T,root:s.ownerDocument})}catch{n=new IntersectionObserver(O,T)}n.observe(t)}return o(!0),i}function pq(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=ux(t),f=s||i?[...u?Ed(u):[],...Ed(e)]:[];f.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const d=u&&a?hq(u,n):null;let h=-1,g=null;o&&(g=new ResizeObserver(v=>{let[b]=v;b&&b.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var T;(T=g)==null||T.observe(e)})),n()}),u&&!l&&g.observe(u),g.observe(e));let _,E=l?ka(t):null;l&&x();function x(){const v=ka(t);E&&!wN(E,v)&&n(),E=v,_=requestAnimationFrame(x)}return n(),()=>{var v;f.forEach(b=>{s&&b.removeEventListener("scroll",n),i&&b.removeEventListener("resize",n)}),d==null||d(),(v=g)==null||v.disconnect(),g=null,l&&cancelAnimationFrame(_)}}const mq=GH,gq=KH,yq=WH,vq=YH,_q=HH,GS=zH,wq=QH,xq=(t,e,n)=>{const r=new Map,s={platform:fq,...n},i={...s.platform,_c:r};return BH(t,e,{...s,platform:i})};var Lh=typeof document<"u"?y.useLayoutEffect:y.useEffect;function $p(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!$p(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!$p(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function xN(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function KS(t,e){const n=xN(t);return Math.round(e*n)/n}function yy(t){const e=y.useRef(t);return Lh(()=>{e.current=t}),e}function Eq(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[f,d]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,g]=y.useState(r);$p(h,r)||g(r);const[_,E]=y.useState(null),[x,v]=y.useState(null),b=y.useCallback(j=>{j!==V.current&&(V.current=j,E(j))},[]),T=y.useCallback(j=>{j!==C.current&&(C.current=j,v(j))},[]),A=i||_,O=o||x,V=y.useRef(null),C=y.useRef(null),S=y.useRef(f),R=l!=null,k=yy(l),N=yy(s),D=yy(u),P=y.useCallback(()=>{if(!V.current||!C.current)return;const j={placement:e,strategy:n,middleware:h};N.current&&(j.platform=N.current),xq(V.current,C.current,j).then(B=>{const X={...B,isPositioned:D.current!==!1};ce.current&&!$p(S.current,X)&&(S.current=X,om.flushSync(()=>{d(X)}))})},[h,e,n,N,D]);Lh(()=>{u===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,d(j=>({...j,isPositioned:!1})))},[u]);const ce=y.useRef(!1);Lh(()=>(ce.current=!0,()=>{ce.current=!1}),[]),Lh(()=>{if(A&&(V.current=A),O&&(C.current=O),A&&O){if(k.current)return k.current(A,O,P);P()}},[A,O,P,k,R]);const pe=y.useMemo(()=>({reference:V,floating:C,setReference:b,setFloating:T}),[b,T]),Z=y.useMemo(()=>({reference:A,floating:O}),[A,O]),ge=y.useMemo(()=>{const j={position:n,left:0,top:0};if(!Z.floating)return j;const B=KS(Z.floating,f.x),X=KS(Z.floating,f.y);return a?{...j,transform:"translate("+B+"px, "+X+"px)",...xN(Z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:X}},[n,a,Z.floating,f.x,f.y]);return y.useMemo(()=>({...f,update:P,refs:pe,elements:Z,floatingStyles:ge}),[f,P,pe,Z,ge])}const bq=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?GS({element:r.current,padding:s}).fn(n):{}:r?GS({element:r,padding:s}).fn(n):{}}}},Tq=(t,e)=>({...mq(t),options:[t,e]}),Sq=(t,e)=>({...gq(t),options:[t,e]}),Cq=(t,e)=>({...wq(t),options:[t,e]}),Iq=(t,e)=>({...yq(t),options:[t,e]}),Rq=(t,e)=>({...vq(t),options:[t,e]}),kq=(t,e)=>({..._q(t),options:[t,e]}),Aq=(t,e)=>({...bq(t),options:[t,e]});var Pq="Arrow",EN=y.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return p.jsx(ft.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});EN.displayName=Pq;var Nq=EN;function Dq(t){const[e,n]=y.useState(void 0);return Hr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var dx="Popper",[bN,TN]=ja(dx),[Oq,SN]=bN(dx),CN=t=>{const{__scopePopper:e,children:n}=t,[r,s]=y.useState(null);return p.jsx(Oq,{scope:e,anchor:r,onAnchorChange:s,children:n})};CN.displayName=dx;var IN="PopperAnchor",RN=y.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=SN(IN,n),o=y.useRef(null),a=Qt(e,o);return y.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:p.jsx(ft.div,{...s,ref:a})});RN.displayName=IN;var fx="PopperContent",[Mq,Lq]=bN(fx),kN=y.forwardRef((t,e)=>{var be,Ft,Ye,ut,Zt,Xt;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:g="optimized",onPlaced:_,...E}=t,x=SN(fx,n),[v,b]=y.useState(null),T=Qt(e,Xn=>b(Xn)),[A,O]=y.useState(null),V=Dq(A),C=(V==null?void 0:V.width)??0,S=(V==null?void 0:V.height)??0,R=r+(i!=="center"?"-"+i:""),k=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},N=Array.isArray(u)?u:[u],D=N.length>0,P={padding:k,boundary:N.filter(Vq),altBoundary:D},{refs:ce,floatingStyles:pe,placement:Z,isPositioned:ge,middlewareData:j}=Eq({strategy:"fixed",placement:R,whileElementsMounted:(...Xn)=>pq(...Xn,{animationFrame:g==="always"}),elements:{reference:x.anchor},middleware:[Tq({mainAxis:s+S,alignmentAxis:o}),l&&Sq({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?Cq():void 0,...P}),l&&Iq({...P}),Rq({...P,apply:({elements:Xn,rects:Jn,availableWidth:Ns,availableHeight:Jr})=>{const{width:hr,height:_i}=Jn.reference,Ut=Xn.floating.style;Ut.setProperty("--radix-popper-available-width",`${Ns}px`),Ut.setProperty("--radix-popper-available-height",`${Jr}px`),Ut.setProperty("--radix-popper-anchor-width",`${hr}px`),Ut.setProperty("--radix-popper-anchor-height",`${_i}px`)}}),A&&Aq({element:A,padding:a}),Fq({arrowWidth:C,arrowHeight:S}),h&&kq({strategy:"referenceHidden",...P})]}),[B,X]=NN(Z),te=Is(_);Hr(()=>{ge&&(te==null||te())},[ge,te]);const le=(be=j.arrow)==null?void 0:be.x,se=(Ft=j.arrow)==null?void 0:Ft.y,Ie=((Ye=j.arrow)==null?void 0:Ye.centerOffset)!==0,[Ge,Ce]=y.useState();return Hr(()=>{v&&Ce(window.getComputedStyle(v).zIndex)},[v]),p.jsx("div",{ref:ce.setFloating,"data-radix-popper-content-wrapper":"",style:{...pe,transform:ge?pe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ge,"--radix-popper-transform-origin":[(ut=j.transformOrigin)==null?void 0:ut.x,(Zt=j.transformOrigin)==null?void 0:Zt.y].join(" "),...((Xt=j.hide)==null?void 0:Xt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx(Mq,{scope:n,placedSide:B,onArrowChange:O,arrowX:le,arrowY:se,shouldHideArrow:Ie,children:p.jsx(ft.div,{"data-side":B,"data-align":X,...E,ref:T,style:{...E.style,animation:ge?void 0:"none"}})})})});kN.displayName=fx;var AN="PopperArrow",jq={top:"bottom",right:"left",bottom:"top",left:"right"},PN=y.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=Lq(AN,r),o=jq[i.placedSide];return p.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:p.jsx(Nq,{...s,ref:n,style:{...s.style,display:"block"}})})});PN.displayName=AN;function Vq(t){return t!==null}var Fq=t=>({name:"transformOrigin",options:t,fn(e){var x,v,b;const{placement:n,rects:r,middlewareData:s}=e,o=((x=s.arrow)==null?void 0:x.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,f]=NN(n),d={start:"0%",center:"50%",end:"100%"}[f],h=(((v=s.arrow)==null?void 0:v.x)??0)+a/2,g=(((b=s.arrow)==null?void 0:b.y)??0)+l/2;let _="",E="";return u==="bottom"?(_=o?d:`${h}px`,E=`${-l}px`):u==="top"?(_=o?d:`${h}px`,E=`${r.floating.height+l}px`):u==="right"?(_=`${-l}px`,E=o?d:`${g}px`):u==="left"&&(_=`${r.floating.width+l}px`,E=o?d:`${g}px`),{data:{x:_,y:E}}}});function NN(t){const[e,n="center"]=t.split("-");return[e,n]}var Uq=CN,$q=RN,Bq=kN,zq=PN,vy="rovingFocusGroup.onEntryFocus",Wq={bubbles:!1,cancelable:!0},rf="RovingFocusGroup",[w_,DN,Hq]=cN(rf),[qq,ON]=ja(rf,[Hq]),[Gq,Kq]=qq(rf),MN=y.forwardRef((t,e)=>p.jsx(w_.Provider,{scope:t.__scopeRovingFocusGroup,children:p.jsx(w_.Slot,{scope:t.__scopeRovingFocusGroup,children:p.jsx(Qq,{...t,ref:e})})}));MN.displayName=rf;var Qq=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...d}=t,h=y.useRef(null),g=Qt(e,h),_=dN(i),[E,x]=W0({prop:o,defaultProp:a??null,onChange:l,caller:rf}),[v,b]=y.useState(!1),T=Is(u),A=DN(n),O=y.useRef(!1),[V,C]=y.useState(0);return y.useEffect(()=>{const S=h.current;if(S)return S.addEventListener(vy,T),()=>S.removeEventListener(vy,T)},[T]),p.jsx(Gq,{scope:n,orientation:r,dir:_,loop:s,currentTabStopId:E,onItemFocus:y.useCallback(S=>x(S),[x]),onItemShiftTab:y.useCallback(()=>b(!0),[]),onFocusableItemAdd:y.useCallback(()=>C(S=>S+1),[]),onFocusableItemRemove:y.useCallback(()=>C(S=>S-1),[]),children:p.jsx(ft.div,{tabIndex:v||V===0?-1:0,"data-orientation":r,...d,ref:g,style:{outline:"none",...t.style},onMouseDown:je(t.onMouseDown,()=>{O.current=!0}),onFocus:je(t.onFocus,S=>{const R=!O.current;if(S.target===S.currentTarget&&R&&!v){const k=new CustomEvent(vy,Wq);if(S.currentTarget.dispatchEvent(k),!k.defaultPrevented){const N=A().filter(Z=>Z.focusable),D=N.find(Z=>Z.active),P=N.find(Z=>Z.id===E),pe=[D,P,...N].filter(Boolean).map(Z=>Z.ref.current);VN(pe,f)}}O.current=!1}),onBlur:je(t.onBlur,()=>b(!1))})})}),LN="RovingFocusGroupItem",jN=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...a}=t,l=Rl(),u=i||l,f=Kq(LN,n),d=f.currentTabStopId===u,h=DN(n),{onFocusableItemAdd:g,onFocusableItemRemove:_,currentTabStopId:E}=f;return y.useEffect(()=>{if(r)return g(),()=>_()},[r,g,_]),p.jsx(w_.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:p.jsx(ft.span,{tabIndex:d?0:-1,"data-orientation":f.orientation,...a,ref:e,onMouseDown:je(t.onMouseDown,x=>{r?f.onItemFocus(u):x.preventDefault()}),onFocus:je(t.onFocus,()=>f.onItemFocus(u)),onKeyDown:je(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){f.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const v=Xq(x,f.orientation,f.dir);if(v!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let T=h().filter(A=>A.focusable).map(A=>A.ref.current);if(v==="last")T.reverse();else if(v==="prev"||v==="next"){v==="prev"&&T.reverse();const A=T.indexOf(x.currentTarget);T=f.loop?Jq(T,A+1):T.slice(A+1)}setTimeout(()=>VN(T))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:E!=null}):o})})});jN.displayName=LN;var Yq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Zq(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Xq(t,e,n){const r=Zq(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Yq[r]}function VN(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Jq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var eG=MN,tG=jN,x_=["Enter"," "],nG=["ArrowDown","PageUp","Home"],FN=["ArrowUp","PageDown","End"],rG=[...nG,...FN],sG={ltr:[...x_,"ArrowRight"],rtl:[...x_,"ArrowLeft"]},iG={ltr:["ArrowLeft"],rtl:["ArrowRight"]},sf="Menu",[bd,oG,aG]=cN(sf),[Va,UN]=ja(sf,[aG,TN,ON]),Qm=TN(),$N=ON(),[lG,Fa]=Va(sf),[uG,of]=Va(sf),BN=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=t,a=Qm(e),[l,u]=y.useState(null),f=y.useRef(!1),d=Is(i),h=dN(s);return y.useEffect(()=>{const g=()=>{f.current=!0,document.addEventListener("pointerdown",_,{capture:!0,once:!0}),document.addEventListener("pointermove",_,{capture:!0,once:!0})},_=()=>f.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",_,{capture:!0}),document.removeEventListener("pointermove",_,{capture:!0})}},[]),p.jsx(Uq,{...a,children:p.jsx(lG,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:u,children:p.jsx(uG,{scope:e,onClose:y.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:f,dir:h,modal:o,children:r})})})};BN.displayName=sf;var cG="MenuAnchor",hx=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Qm(n);return p.jsx($q,{...s,...r,ref:e})});hx.displayName=cG;var px="MenuPortal",[dG,zN]=Va(px,{forceMount:void 0}),WN=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=Fa(px,e);return p.jsx(dG,{scope:e,forceMount:n,children:p.jsx(No,{present:n||i.open,children:p.jsx(G0,{asChild:!0,container:s,children:r})})})};WN.displayName=px;var wr="MenuContent",[fG,mx]=Va(wr),HN=y.forwardRef((t,e)=>{const n=zN(wr,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Fa(wr,t.__scopeMenu),o=of(wr,t.__scopeMenu);return p.jsx(bd.Provider,{scope:t.__scopeMenu,children:p.jsx(No,{present:r||i.open,children:p.jsx(bd.Slot,{scope:t.__scopeMenu,children:o.modal?p.jsx(hG,{...s,ref:e}):p.jsx(pG,{...s,ref:e})})})})}),hG=y.forwardRef((t,e)=>{const n=Fa(wr,t.__scopeMenu),r=y.useRef(null),s=Qt(e,r);return y.useEffect(()=>{const i=r.current;if(i)return _P(i)},[]),p.jsx(gx,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:je(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),pG=y.forwardRef((t,e)=>{const n=Fa(wr,t.__scopeMenu);return p.jsx(gx,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),mG=cu("MenuContent.ScrollLock"),gx=y.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:g,disableOutsideScroll:_,...E}=t,x=Fa(wr,n),v=of(wr,n),b=Qm(n),T=$N(n),A=oG(n),[O,V]=y.useState(null),C=y.useRef(null),S=Qt(e,C,x.onContentChange),R=y.useRef(0),k=y.useRef(""),N=y.useRef(0),D=y.useRef(null),P=y.useRef("right"),ce=y.useRef(0),pe=_?K0:y.Fragment,Z=_?{as:mG,allowPinchZoom:!0}:void 0,ge=B=>{var be,Ft;const X=k.current+B,te=A().filter(Ye=>!Ye.disabled),le=document.activeElement,se=(be=te.find(Ye=>Ye.ref.current===le))==null?void 0:be.textValue,Ie=te.map(Ye=>Ye.textValue),Ge=IG(Ie,X,se),Ce=(Ft=te.find(Ye=>Ye.textValue===Ge))==null?void 0:Ft.ref.current;(function Ye(ut){k.current=ut,window.clearTimeout(R.current),ut!==""&&(R.current=window.setTimeout(()=>Ye(""),1e3))})(X),Ce&&setTimeout(()=>Ce.focus())};y.useEffect(()=>()=>window.clearTimeout(R.current),[]),dP();const j=y.useCallback(B=>{var te,le;return P.current===((te=D.current)==null?void 0:te.side)&&kG(B,(le=D.current)==null?void 0:le.area)},[]);return p.jsx(fG,{scope:n,searchRef:k,onItemEnter:y.useCallback(B=>{j(B)&&B.preventDefault()},[j]),onItemLeave:y.useCallback(B=>{var X;j(B)||((X=C.current)==null||X.focus(),V(null))},[j]),onTriggerLeave:y.useCallback(B=>{j(B)&&B.preventDefault()},[j]),pointerGraceTimerRef:N,onPointerGraceIntentChange:y.useCallback(B=>{D.current=B},[]),children:p.jsx(pe,{...Z,children:p.jsx(q0,{asChild:!0,trapped:s,onMountAutoFocus:je(i,B=>{var X;B.preventDefault(),(X=C.current)==null||X.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:p.jsx(H0,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:g,children:p.jsx(eG,{asChild:!0,...T,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:O,onCurrentTabStopIdChange:V,onEntryFocus:je(l,B=>{v.isUsingKeyboardRef.current||B.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(Bq,{role:"menu","aria-orientation":"vertical","data-state":aD(x.open),"data-radix-menu-content":"",dir:v.dir,...b,...E,ref:S,style:{outline:"none",...E.style},onKeyDown:je(E.onKeyDown,B=>{const te=B.target.closest("[data-radix-menu-content]")===B.currentTarget,le=B.ctrlKey||B.altKey||B.metaKey,se=B.key.length===1;te&&(B.key==="Tab"&&B.preventDefault(),!le&&se&&ge(B.key));const Ie=C.current;if(B.target!==Ie||!rG.includes(B.key))return;B.preventDefault();const Ce=A().filter(be=>!be.disabled).map(be=>be.ref.current);FN.includes(B.key)&&Ce.reverse(),SG(Ce)}),onBlur:je(t.onBlur,B=>{B.currentTarget.contains(B.target)||(window.clearTimeout(R.current),k.current="")}),onPointerMove:je(t.onPointerMove,Td(B=>{const X=B.target,te=ce.current!==B.clientX;if(B.currentTarget.contains(X)&&te){const le=B.clientX>ce.current?"right":"left";P.current=le,ce.current=B.clientX}}))})})})})})})});HN.displayName=wr;var gG="MenuGroup",yx=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(ft.div,{role:"group",...r,ref:e})});yx.displayName=gG;var yG="MenuLabel",qN=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(ft.div,{...r,ref:e})});qN.displayName=yG;var Bp="MenuItem",QS="menu.itemSelect",Ym=y.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=y.useRef(null),o=of(Bp,t.__scopeMenu),a=mx(Bp,t.__scopeMenu),l=Qt(e,i),u=y.useRef(!1),f=()=>{const d=i.current;if(!n&&d){const h=new CustomEvent(QS,{bubbles:!0,cancelable:!0});d.addEventListener(QS,g=>r==null?void 0:r(g),{once:!0}),aP(d,h),h.defaultPrevented?u.current=!1:o.onClose()}};return p.jsx(GN,{...s,ref:l,disabled:n,onClick:je(t.onClick,f),onPointerDown:d=>{var h;(h=t.onPointerDown)==null||h.call(t,d),u.current=!0},onPointerUp:je(t.onPointerUp,d=>{var h;u.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:je(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||x_.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Ym.displayName=Bp;var GN=y.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,o=mx(Bp,n),a=$N(n),l=y.useRef(null),u=Qt(e,l),[f,d]=y.useState(!1),[h,g]=y.useState("");return y.useEffect(()=>{const _=l.current;_&&g((_.textContent??"").trim())},[i.children]),p.jsx(bd.ItemSlot,{scope:n,disabled:r,textValue:s??h,children:p.jsx(tG,{asChild:!0,...a,focusable:!r,children:p.jsx(ft.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:je(t.onPointerMove,Td(_=>{r?o.onItemLeave(_):(o.onItemEnter(_),_.defaultPrevented||_.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:je(t.onPointerLeave,Td(_=>o.onItemLeave(_))),onFocus:je(t.onFocus,()=>d(!0)),onBlur:je(t.onBlur,()=>d(!1))})})})}),vG="MenuCheckboxItem",KN=y.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return p.jsx(JN,{scope:t.__scopeMenu,checked:n,children:p.jsx(Ym,{role:"menuitemcheckbox","aria-checked":zp(n)?"mixed":n,...s,ref:e,"data-state":_x(n),onSelect:je(s.onSelect,()=>r==null?void 0:r(zp(n)?!0:!n),{checkForDefaultPrevented:!1})})})});KN.displayName=vG;var QN="MenuRadioGroup",[_G,wG]=Va(QN,{value:void 0,onValueChange:()=>{}}),YN=y.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=Is(r);return p.jsx(_G,{scope:t.__scopeMenu,value:n,onValueChange:i,children:p.jsx(yx,{...s,ref:e})})});YN.displayName=QN;var ZN="MenuRadioItem",XN=y.forwardRef((t,e)=>{const{value:n,...r}=t,s=wG(ZN,t.__scopeMenu),i=n===s.value;return p.jsx(JN,{scope:t.__scopeMenu,checked:i,children:p.jsx(Ym,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":_x(i),onSelect:je(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});XN.displayName=ZN;var vx="MenuItemIndicator",[JN,xG]=Va(vx,{checked:!1}),eD=y.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=xG(vx,n);return p.jsx(No,{present:r||zp(i.checked)||i.checked===!0,children:p.jsx(ft.span,{...s,ref:e,"data-state":_x(i.checked)})})});eD.displayName=vx;var EG="MenuSeparator",tD=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(ft.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});tD.displayName=EG;var bG="MenuArrow",nD=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Qm(n);return p.jsx(zq,{...s,...r,ref:e})});nD.displayName=bG;var TG="MenuSub",[zK,rD]=Va(TG),fc="MenuSubTrigger",sD=y.forwardRef((t,e)=>{const n=Fa(fc,t.__scopeMenu),r=of(fc,t.__scopeMenu),s=rD(fc,t.__scopeMenu),i=mx(fc,t.__scopeMenu),o=y.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,u={__scopeMenu:t.__scopeMenu},f=y.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return y.useEffect(()=>f,[f]),y.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),p.jsx(hx,{asChild:!0,...u,children:p.jsx(GN,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":aD(n.open),...t,ref:B0(e,s.onTriggerChange),onClick:d=>{var h;(h=t.onClick)==null||h.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:je(t.onPointerMove,Td(d=>{i.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:je(t.onPointerLeave,Td(d=>{var g,_;f();const h=(g=n.content)==null?void 0:g.getBoundingClientRect();if(h){const E=(_=n.content)==null?void 0:_.dataset.side,x=E==="right",v=x?-5:5,b=h[x?"left":"right"],T=h[x?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:b,y:h.top},{x:T,y:h.top},{x:T,y:h.bottom},{x:b,y:h.bottom}],side:E}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:je(t.onKeyDown,d=>{var g;const h=i.searchRef.current!=="";t.disabled||h&&d.key===" "||sG[r.dir].includes(d.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),d.preventDefault())})})})});sD.displayName=fc;var iD="MenuSubContent",oD=y.forwardRef((t,e)=>{const n=zN(wr,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Fa(wr,t.__scopeMenu),o=of(wr,t.__scopeMenu),a=rD(iD,t.__scopeMenu),l=y.useRef(null),u=Qt(e,l);return p.jsx(bd.Provider,{scope:t.__scopeMenu,children:p.jsx(No,{present:r||i.open,children:p.jsx(bd.Slot,{scope:t.__scopeMenu,children:p.jsx(gx,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:je(t.onFocusOutside,f=>{f.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:je(t.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:je(t.onKeyDown,f=>{var g;const d=f.currentTarget.contains(f.target),h=iG[o.dir].includes(f.key);d&&h&&(i.onOpenChange(!1),(g=a.trigger)==null||g.focus(),f.preventDefault())})})})})})});oD.displayName=iD;function aD(t){return t?"open":"closed"}function zp(t){return t==="indeterminate"}function _x(t){return zp(t)?"indeterminate":t?"checked":"unchecked"}function SG(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function CG(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function IG(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=CG(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function RG(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],u=a.x,f=a.y,d=l.x,h=l.y;f>r!=h>r&&n<(d-u)*(r-f)/(h-f)+u&&(s=!s)}return s}function kG(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return RG(n,e)}function Td(t){return e=>e.pointerType==="mouse"?t(e):void 0}var AG=BN,PG=hx,NG=WN,DG=HN,OG=yx,MG=qN,LG=Ym,jG=KN,VG=YN,FG=XN,UG=eD,$G=tD,BG=nD,zG=sD,WG=oD,Zm="DropdownMenu",[HG,WK]=ja(Zm,[UN]),Fn=UN(),[qG,lD]=HG(Zm),uD=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,l=Fn(e),u=y.useRef(null),[f,d]=W0({prop:s,defaultProp:i??!1,onChange:o,caller:Zm});return p.jsx(qG,{scope:e,triggerId:Rl(),triggerRef:u,contentId:Rl(),open:f,onOpenChange:d,onOpenToggle:y.useCallback(()=>d(h=>!h),[d]),modal:a,children:p.jsx(AG,{...l,open:f,onOpenChange:d,dir:r,modal:a,children:n})})};uD.displayName=Zm;var cD="DropdownMenuTrigger",dD=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=lD(cD,n),o=Fn(n);return p.jsx(PG,{asChild:!0,...o,children:p.jsx(ft.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:B0(e,i.triggerRef),onPointerDown:je(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:je(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});dD.displayName=cD;var GG="DropdownMenuPortal",fD=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Fn(e);return p.jsx(NG,{...r,...n})};fD.displayName=GG;var hD="DropdownMenuContent",pD=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=lD(hD,n),i=Fn(n),o=y.useRef(!1);return p.jsx(DG,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:je(t.onCloseAutoFocus,a=>{var l;o.current||(l=s.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:je(t.onInteractOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,f=l.button===2||u;(!s.modal||f)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});pD.displayName=hD;var KG="DropdownMenuGroup",QG=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Fn(n);return p.jsx(OG,{...s,...r,ref:e})});QG.displayName=KG;var YG="DropdownMenuLabel",mD=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Fn(n);return p.jsx(MG,{...s,...r,ref:e})});mD.displayName=YG;var ZG="DropdownMenuItem",gD=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Fn(n);return p.jsx(LG,{...s,...r,ref:e})});gD.displayName=ZG;var XG="DropdownMenuCheckboxItem",yD=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Fn(n);return p.jsx(jG,{...s,...r,ref:e})});yD.displayName=XG;var JG="DropdownMenuRadioGroup",eK=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Fn(n);return p.jsx(VG,{...s,...r,ref:e})});eK.displayName=JG;var tK="DropdownMenuRadioItem",vD=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Fn(n);return p.jsx(FG,{...s,...r,ref:e})});vD.displayName=tK;var nK="DropdownMenuItemIndicator",_D=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Fn(n);return p.jsx(UG,{...s,...r,ref:e})});_D.displayName=nK;var rK="DropdownMenuSeparator",wD=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Fn(n);return p.jsx($G,{...s,...r,ref:e})});wD.displayName=rK;var sK="DropdownMenuArrow",iK=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Fn(n);return p.jsx(BG,{...s,...r,ref:e})});iK.displayName=sK;var oK="DropdownMenuSubTrigger",xD=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Fn(n);return p.jsx(zG,{...s,...r,ref:e})});xD.displayName=oK;var aK="DropdownMenuSubContent",ED=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Fn(n);return p.jsx(WG,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ED.displayName=aK;var lK=uD,uK=dD,cK=fD,bD=pD,TD=mD,SD=gD,CD=yD,ID=vD,RD=_D,kD=wD,AD=xD,PD=ED;const dK=lK,fK=uK,hK=y.forwardRef(({className:t,inset:e,children:n,...r},s)=>p.jsxs(AD,{ref:s,className:lt("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,p.jsx(s8,{className:"ml-auto h-4 w-4"})]}));hK.displayName=AD.displayName;const pK=y.forwardRef(({className:t,...e},n)=>p.jsx(PD,{ref:n,className:lt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));pK.displayName=PD.displayName;const ND=y.forwardRef(({className:t,sideOffset:e=4,...n},r)=>p.jsx(cK,{children:p.jsx(bD,{ref:r,sideOffset:e,className:lt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));ND.displayName=bD.displayName;const hc=y.forwardRef(({className:t,inset:e,...n},r)=>p.jsx(SD,{ref:r,className:lt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));hc.displayName=SD.displayName;const mK=y.forwardRef(({className:t,children:e,checked:n,...r},s)=>p.jsxs(CD,{ref:s,className:lt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(RD,{children:p.jsx(n8,{className:"h-4 w-4"})})}),e]}));mK.displayName=CD.displayName;const gK=y.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(ID,{ref:r,className:lt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(RD,{children:p.jsx(o8,{className:"h-2 w-2 fill-current"})})}),e]}));gK.displayName=ID.displayName;const yK=y.forwardRef(({className:t,inset:e,...n},r)=>p.jsx(TD,{ref:r,className:lt("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));yK.displayName=TD.displayName;const vK=y.forwardRef(({className:t,...e},n)=>p.jsx(kD,{ref:n,className:lt("-mx-1 my-1 h-px bg-muted",t),...e}));vK.displayName=kD.displayName;function _K({publicId:t,title:e}){const n=`${window.location.origin}/display/${t}`,{user:r}=Yt(),[s,i]=y.useState(!1),o=async d=>{if(r)try{if(i(!0),await Wm({userId:r.uid,actionType:"message",cooldownPeriod:1e4,maxActions:5})){Ae.error("You're sharing too frequently. Please slow down.");return}await Hm(r.uid,"message",t)}catch(h){console.error("Error recording share:",h)}finally{i(!1)}},a=async()=>{try{await navigator.clipboard.writeText(n),Ae.success("Link copied to clipboard!"),r&&o("clipboard")}catch(d){console.error("Failed to copy link:",d),Ae.error("Failed to copy link")}},l=()=>{const d=encodeURIComponent(`Check out this sports card display: ${e}`),h=encodeURIComponent(n);window.open(`https://twitter.com/intent/tweet?text=${d}&url=${h}`,"_blank"),r&&o()},u=()=>{const d=encodeURIComponent(n);window.open(`https://www.facebook.com/sharer/sharer.php?u=${d}`,"_blank"),r&&o()},f=()=>{const d=encodeURIComponent(`Check out this sports card display: ${e}`),h=encodeURIComponent(`I found this awesome sports card display that I think you'll like:

${n}`);window.open(`mailto:?subject=${d}&body=${h}`,"_blank"),r&&o()};return p.jsxs(dK,{children:[p.jsx(fK,{asChild:!0,children:p.jsxs(kt,{variant:"outline",size:"sm",className:"flex items-center gap-2",disabled:s,children:[p.jsx(v8,{className:"w-4 h-4"}),"Share"]})}),p.jsxs(ND,{align:"end",children:[p.jsxs(hc,{onClick:a,children:[p.jsx(f8,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Copy Link"})]}),p.jsxs(hc,{onClick:l,children:[p.jsx(w8,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Twitter"})]}),p.jsxs(hc,{onClick:u,children:[p.jsx(l8,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Facebook"})]}),p.jsxs(hc,{onClick:f,children:[p.jsx(p8,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Email"})]})]})]})}function wK(){const{id:t}=xw(),{displayCase:e,cards:n,isLoading:r}=y7(t);return r?p.jsx("div",{className:"text-center mt-10",children:"Loading..."}):e?p.jsxs("div",{className:"p-4 space-y-6 max-w-6xl mx-auto",children:[p.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("h1",{className:"text-3xl font-bold mb-2",children:e.name}),e.description&&p.jsx("p",{className:"text-gray-500 max-w-2xl mx-auto",children:e.description})]}),p.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400 mb-2",children:[p.jsxs("span",{children:["Created: ",e.createdAt.toLocaleDateString()]}),p.jsxs("span",{children:["Theme: ",e.background||"Default"]}),p.jsx(v7,{displayCaseId:e.id})]}),p.jsxs("div",{className:"mt-4 flex justify-center space-x-2",children:[(e==null?void 0:e.publicId)&&p.jsx(_K,{publicId:e.publicId,title:e.name}),(e==null?void 0:e.userId)&&p.jsx(NH,{sellerId:e.userId,displayCaseId:e.id,sellerName:"Owner"})]})]}),p.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:p.jsx(AH,{displayCaseId:e.id})}),p.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Cards"}),n.length===0?p.jsx("div",{className:"text-center text-gray-400 italic mt-8",children:"No cards in this display case yet."}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:n.map(s=>p.jsx("div",{className:"relative group",children:s.imageUrl?p.jsxs(p.Fragment,{children:[p.jsx("img",{src:s.imageUrl,alt:`${s.playerName} ${s.year} ${s.cardSet}`,className:"rounded-xl w-full shadow-md aspect-[2/3] object-cover"}),p.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-70 opacity-0 group-hover:opacity-100 transition-all duration-200 flex items-center justify-center text-white text-sm rounded-xl p-2",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"font-semibold",children:s.playerName}),p.jsxs("div",{className:"text-xs",children:[s.year," ",s.cardSet]}),s.price&&p.jsxs("div",{className:"text-xs mt-1",children:["$",s.price.toLocaleString()]})]})})]}):p.jsx("div",{className:"rounded-xl w-full shadow-md aspect-[2/3] bg-gray-100 flex items-center justify-center",children:p.jsxs("div",{className:"text-center p-4",children:[p.jsx("div",{className:"font-semibold",children:s.playerName}),p.jsxs("div",{className:"text-xs text-gray-600",children:[s.year," ",s.cardSet]})]})})},s.id))}),p.jsx("div",{className:"block md:hidden text-xs text-gray-400 mt-2 text-center",children:"Tap cards to view details"})]})]}),e.comments.length>0&&p.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Comments"}),p.jsx("div",{className:"space-y-4",children:e.comments.map((s,i)=>p.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[p.jsx("p",{className:"text-gray-700",children:s.text}),p.jsx("p",{className:"text-sm text-gray-500 mt-2",children:s.timestamp.toLocaleDateString()})]},i))})]})]}):p.jsx("div",{className:"text-center mt-10",children:"Display case not found."})}async function xK(t){const n=mm().currentUser;if(!n)throw new Error("User must be authenticated to create a display case");console.log("createDisplayCase: Creating display case with data:",t);const r=Vt(De,"users",n.uid,"display_cases"),s=await La(r,{...t,userId:n.uid,createdAt:new Date});return console.log("createDisplayCase: Display case created with ID:",s.id),s.id}function DD(){const{user:t}=Yt(),e=gm(),n=["displayCases",t==null?void 0:t.uid],{data:r,isLoading:s,refetch:i}=$k({queryKey:n,queryFn:async()=>{if(!t)return[];const u=Vt(De,"users",t.uid,"display_cases");return(await ar(u)).docs.map(d=>({...d.data(),id:d.id}))},enabled:!!t}),o=Tc({mutationFn:async u=>{await Ts(jt(De,"users",t.uid,"display_cases",u))},onSuccess:()=>{e.invalidateQueries({queryKey:n})}}),a=Tc({mutationFn:async u=>xK(u),onSuccess:()=>{e.invalidateQueries({queryKey:n})}}),l=Tc({mutationFn:async({id:u,data:f})=>{if(!t)throw new Error("User must be authenticated to update a display case");const d=jt(De,"users",t.uid,"display_cases",u);return await ou(d,{...f,updatedAt:new Date}),u},onSuccess:()=>{e.invalidateQueries({queryKey:n})}});return{displayCases:r,isLoading:s,deleteDisplayCase:o.mutate,createDisplayCase:a.mutateAsync,updateDisplayCase:(u,f)=>l.mutateAsync({id:u,data:f}),isCreating:a.isPending,isUpdating:l.isPending,refetch:i}}const OD=({isOpen:t,onClose:e,title:n,children:r,className:s=""})=>{if(!t)return null;const i=o=>{o.target===o.currentTarget&&e()};return p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:i,children:p.jsxs("div",{className:`bg-white rounded-lg shadow-xl p-6 w-full max-w-md transform transition-all ${t?"scale-100 opacity-100":"scale-95 opacity-0"} ${s}`,children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h2",{className:"text-xl font-semibold",children:n}),p.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Close modal",children:"✕"})]}),r]})})},MD=y.forwardRef(({className:t,onCheckedChange:e,...n},r)=>p.jsx("input",{type:"checkbox",className:lt("h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",t),ref:r,onChange:s=>e==null?void 0:e(s.target.checked),...n}));function EK({isOpen:t,onClose:e}){const[n,r]=y.useState(""),[s,i]=y.useState([]),[o,a]=y.useState("wood"),[l,u]=y.useState(!0),{createDisplayCase:f,isCreating:d}=DD(),{data:h=[]}=Xd(),{user:g}=Yt(),_=Array.from(new Set(h.flatMap(v=>v.tags||[]))).sort(),E=v=>{i(b=>b.includes(v)?b.filter(T=>T!==v):[...b,v])},x=async v=>{if(v.preventDefault(),!n.trim()){Ae.error("Please enter a display case name");return}if(s.length===0){Ae.error("Please select at least one tag");return}const T=h.filter(A=>A.tags&&A.tags.some(O=>s.includes(O))).map(A=>A.id);console.log("Creating display case with:",{name:n,cardIds:T,isPublic:l,selectedTags:s,theme:o}),console.log("Public status:",l?"Public":"Private");try{const A=await f({name:n.trim(),cardIds:T,isPublic:l,tags:s,theme:o});if(console.log("Display case created, ID:",A),l&&g){console.log("Creating public copy of display case");const O=jt(De,"public_display_cases",A);await Jv(O,{name:n.trim(),cardIds:T,isPublic:!0,tags:s,theme:o,userId:g.uid,ownerName:g.displayName||"Anonymous",createdAt:new Date}),console.log("Public copy created successfully")}else console.log("Display case is private, skipping public copy creation");console.log("Display case created successfully"),r(""),i([]),a("wood"),u(!0),e()}catch(A){console.error("Error creating display case:",A),Ae.error("Failed to create display case")}};return p.jsx(OD,{isOpen:t,onClose:e,title:"Create Display Case",children:p.jsxs("form",{onSubmit:x,className:"space-y-6",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Lr,{htmlFor:"name",children:"Display Case Name"}),p.jsx(An,{id:"name",value:n,onChange:v=>r(v.target.value),placeholder:"My Favorite Cards",required:!0,className:"w-full"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Lr,{children:"Select Tags"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:_.length===0?p.jsx("span",{className:"text-gray-500",children:"No tags found in your collection."}):_.map(v=>p.jsxs("label",{className:"flex items-center gap-1 bg-gray-100 px-2 py-1 rounded cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:s.includes(v),onChange:()=>E(v)}),p.jsx("span",{className:"text-sm",children:v})]},v))})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Lr,{htmlFor:"theme",children:"Background Theme"}),p.jsxs("select",{id:"theme",value:o,onChange:v=>a(v.target.value),className:"w-full border rounded px-2 py-1","aria-label":"Theme selection",children:[p.jsx("option",{value:"wood",children:"Wood"}),p.jsx("option",{value:"velvet",children:"Velvet"}),p.jsx("option",{value:"glass",children:"Glass"})]})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(MD,{id:"public",checked:l,onCheckedChange:v=>u(v)}),p.jsx(Lr,{htmlFor:"public",children:"Make this display case public"})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[p.jsx(kt,{type:"button",variant:"outline",onClick:e,disabled:d,children:"Cancel"}),p.jsx(kt,{type:"submit",disabled:d||!n.trim()||s.length===0,children:d?p.jsxs("span",{className:"flex items-center",children:[p.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Display Case"})]})]})})}function bK(){const{displayCases:t,isLoading:e}=DD(),[n,r]=y.useState(!1),s=vi();return p.jsxs("div",{className:"container mx-auto px-4 py-8",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsx("h1",{className:"text-3xl font-bold",children:"My Display Cases"}),p.jsx(kt,{onClick:()=>r(!0),children:"Create Display Case"})]}),e?p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((i,o)=>p.jsx(p_,{className:"h-48 rounded-lg"},o))}):(t==null?void 0:t.length)===0?p.jsxs("div",{className:"text-center py-12",children:[p.jsx("h2",{className:"text-xl font-semibold text-gray-600 mb-4",children:"No display cases yet"}),p.jsx("p",{className:"text-gray-500 mb-6",children:"Create your first display case to showcase your favorite cards"}),p.jsx(kt,{onClick:()=>r(!0),children:"Create Display Case"})]}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t==null?void 0:t.map(i=>p.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>s(`/display-case/${i.id}`),children:[p.jsx("h2",{className:"text-xl font-semibold mb-2",children:i.name}),p.jsxs("p",{className:"text-gray-500",children:[i.cardIds.length," cards"]}),p.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[p.jsx("span",{className:"text-sm text-gray-500",children:i.isPublic?"Public":"Private"}),p.jsxs("span",{className:"text-sm text-gray-500",children:["Created ",new Date(i.createdAt.toDate()).toLocaleDateString()]})]})]},i.id))}),p.jsx(EK,{isOpen:n,onClose:()=>r(!1)})]})}function TK({isOpen:t,onClose:e,displayCase:n}){const[r,s]=y.useState(""),[i,o]=y.useState([]),[a,l]=y.useState("wood"),[u,f]=y.useState(!0),[d,h]=y.useState(!1),{data:g=[]}=Xd(),{user:_}=Yt();console.log("EditDisplayCaseModal rendered with display case:",n),y.useEffect(()=>{if(n){console.log("Setting initial form values:",n),console.log("isPublic value from database:",n.isPublic),s(n.name||""),o(n.tags||[]),l(n.theme||"wood");const T=n.isPublic===!0;console.log("Setting isPublic to:",T),f(T)}},[n]);const E=Array.from(new Set(g.flatMap(T=>T.tags||[]))).sort();console.log("Available tags:",E),console.log("Selected tags:",i);const x=T=>{o(A=>A.includes(T)?A.filter(O=>O!==T):[...A,T])},v=async()=>{if(!(_!=null&&_.uid)){Ae.error("You must be logged in to update a display case");return}h(!0);const T={name:r.trim(),tags:i,isPublic:u,theme:a,updatedAt:new Date};console.log("Directly updating display case",n.id,"with data:",T),console.log("isPublic value being saved:",u),console.log("Previous isPublic value:",n.isPublic);try{const A=jt(De,"users",_.uid,"display_cases",n.id);await ou(A,T),console.log("Successfully updated main display case document");const O=jt(De,"public_display_cases",n.id),V=n.isPublic===!0;if(console.log("Was previously public:",V),console.log("Is now public:",u),u!==V)if(u){console.log("Making display case public");const C={...T,id:n.id,userId:_.uid,ownerName:_.displayName||"Anonymous",createdAt:n.createdAt};await Jv(O,C),console.log("Successfully created public copy")}else{console.log("Making display case private");try{(await Ct(O)).exists()?(await Ts(O),console.log("Successfully removed public copy")):console.log("Public copy doesn't exist, no need to delete")}catch(C){console.error("Error removing from public collection:",C)}}else if(u){console.log("Updating public display case data");try{if((await Ct(O)).exists())await ou(O,T),console.log("Successfully updated existing public copy");else{console.log("Public copy doesn't exist, creating new one");const S={...T,id:n.id,userId:_.uid,ownerName:_.displayName||"Anonymous",createdAt:n.createdAt};await Jv(O,S),console.log("Successfully created new public copy")}}catch(C){console.error("Error updating public display case:",C)}}console.log("Display case updated successfully"),Ae.success("Display case updated successfully"),e()}catch(A){console.error("Error updating display case:",A),Ae.error("Failed to update display case: "+(A instanceof Error?A.message:String(A)))}finally{h(!1)}},b=async T=>{if(T.preventDefault(),!r.trim()){Ae.error("Please enter a display case name");return}if(i.length===0){Ae.error("Please select at least one tag");return}await v()};return p.jsx(OD,{isOpen:t,onClose:e,title:"Edit Display Case",children:p.jsxs("form",{onSubmit:b,className:"space-y-6 p-1",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Lr,{htmlFor:"name",children:"Display Case Name"}),p.jsx(An,{id:"name",value:r,onChange:T=>s(T.target.value),placeholder:"My Favorite Cards",required:!0,className:"w-full"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Lr,{children:"Select Tags"}),p.jsx("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto border p-2 rounded",children:E.length===0?p.jsx("span",{className:"text-gray-500",children:"No tags found in your collection."}):E.map(T=>p.jsxs("label",{className:"flex items-center gap-1 bg-gray-100 px-2 py-1 rounded cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:i.includes(T),onChange:()=>x(T)}),p.jsx("span",{className:"text-sm",children:T})]},T))})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Lr,{htmlFor:"theme",children:"Background Theme"}),p.jsxs("select",{id:"theme",value:a,onChange:T=>l(T.target.value),className:"w-full border rounded px-2 py-1","aria-label":"Theme selection",children:[p.jsx("option",{value:"wood",children:"Wood"}),p.jsx("option",{value:"velvet",children:"Velvet"}),p.jsx("option",{value:"glass",children:"Glass"})]})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(MD,{id:"public",checked:u,onCheckedChange:T=>f(T)}),p.jsx(Lr,{htmlFor:"public",children:"Make this display case public"})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[p.jsx(kt,{type:"button",variant:"outline",onClick:e,disabled:d,children:"Cancel"}),p.jsx(kt,{type:"submit",disabled:d||!r.trim()||i.length===0,children:d?p.jsxs("span",{className:"flex items-center",children:[p.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Update Display Case"})]})]})})}function SK({displayCase:t,isOwner:e,userId:n}){const[r,s]=y.useState(!1),[i,o]=y.useState(!1),[a,l]=y.useState(!1),u=vi();if(!e)return null;const f=async()=>{if(!(!t.id||!n)){l(!0);try{const d=jt(De,"users",n,"display_cases",t.id);if(await Ts(d),t.isPublic){console.log("Deleting from public collection");const h=jt(De,"public_display_cases",t.id);try{(await Ct(h)).exists()&&await Ts(h)}catch(g){console.error("Error deleting from public collection:",g)}}Ae.success("Display case deleted successfully"),u("/display-cases")}catch(d){console.error("Error deleting display case:",d),Ae.error("Failed to delete display case"),l(!1)}}};return p.jsxs("div",{className:"flex gap-2",children:[p.jsx(kt,{variant:"outline",size:"sm",onClick:()=>s(!0),children:"Edit"}),p.jsxs(X0,{open:i,onOpenChange:o,children:[p.jsx(b8,{asChild:!0,children:p.jsx(kt,{variant:"destructive",size:"sm",children:"Delete"})}),p.jsxs(Um,{children:[p.jsxs($m,{children:[p.jsx(Bm,{children:"Are you sure?"}),p.jsxs(ex,{children:['This will permanently delete your display case "',t.name,'". This action cannot be undone.']})]}),p.jsxs(J0,{children:[p.jsx(kt,{variant:"outline",onClick:()=>o(!1),disabled:a,children:"Cancel"}),p.jsx(kt,{variant:"destructive",onClick:f,disabled:a,children:a?"Deleting...":"Delete"})]})]})]}),r&&p.jsx(TK,{isOpen:r,onClose:()=>s(!1),displayCase:t})]})}const YS={wood:"bg-amber-50 border-amber-200",velvet:"bg-purple-50 border-purple-200",glass:"bg-blue-50 border-blue-200"},CK=({cards:t})=>{const[e,n]=y.useState(!1);return t.length===0?p.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded mb-4",children:"No cards found"}):p.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("h3",{className:"font-bold",children:"Card Data Debugger"}),p.jsxs("button",{onClick:()=>n(!e),className:"px-2 py-1 bg-blue-500 text-white rounded",children:[e?"Hide":"Show"," Details"]})]}),p.jsxs("div",{children:["Found ",t.length," cards"]}),e&&p.jsx("div",{className:"mt-3 space-y-3 max-h-80 overflow-auto",children:t.map((r,s)=>p.jsx("div",{className:"border p-3 rounded bg-white",children:p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsxs("p",{children:[p.jsx("strong",{children:"ID:"})," ",r.id]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Player:"})," ",r.playerName]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Tags:"})," ",Array.isArray(r.tags)?r.tags.join(", "):"No tags"]}),p.jsxs("p",{className:"break-all",children:[p.jsx("strong",{children:"Image URL:"})," ",r.imageUrl||"MISSING"]})]}),p.jsx("div",{children:r.imageUrl?p.jsxs("div",{children:[p.jsx("p",{className:"mb-1 text-green-600",children:"Image Preview:"}),p.jsx("img",{src:r.imageUrl,alt:r.playerName||"Card",className:"max-h-40 border object-contain"})]}):p.jsx("div",{className:"bg-red-50 p-2 text-red-600",children:"No image URL available"})})]})},s))})]})};function IK(){const{id:t}=xw(),[e,n]=y.useState(null),[r,s]=y.useState([]),[i,o]=y.useState([]),[a,l]=y.useState(!0),[u,f]=y.useState(null),{user:d}=Yt();return y.useEffect(()=>{async function h(){if(!(!t||!(d!=null&&d.uid))){l(!0);try{console.log("Fetching display case with ID:",t);const g=jt(De,"users",d.uid,"display_cases",t);let _=await Ct(g);if(!_.exists()){console.log("Display case not found in user's collection, trying public collection");const E=jt(De,"public_display_cases",t);_=await Ct(E)}if(_.exists()){const E={id:_.id,..._.data()};console.log("Found display case:",E),n(E),o(E.cardIds||[])}else console.log("Display case not found in either location"),f("Display case not found.")}catch(g){console.error("Error fetching display case:",g),f("Failed to load display case.")}finally{l(!1)}}}h()},[t,d]),y.useEffect(()=>{async function h(){if(!(!(d!=null&&d.uid)||!e))try{console.log("Fetching cards for display case with tags:",e.tags);const g=[];if(i.length>0){console.log("Fetching specific cards by ID:",i);for(const _ of i){let E=null;try{const x=jt(De,"users",d.uid,"cards",_),v=await Ct(x);v.exists()&&(E={id:v.id,...v.data()})}catch(x){console.log("Error fetching from cards collection:",x)}if(!E)try{const x=jt(De,"users",d.uid,"collection",_),v=await Ct(x);v.exists()&&(E={id:v.id,...v.data()})}catch(x){console.log("Error fetching from collection:",x)}E&&g.push(E)}}else if(e.tags&&e.tags.length>0){console.log("No cardIds, using tag matching instead");try{const _=Vt(De,"users",d.uid,"cards");(await ar(_)).forEach(x=>{const v=x.data(),b=Array.isArray(v.tags)?v.tags:[],T=e.tags;b.some(A=>T.includes(A))&&g.push({id:x.id,...v})})}catch(_){console.log("Error fetching from cards collection for tag matching:",_)}try{const _=Vt(De,"users",d.uid,"collection");(await ar(_)).forEach(x=>{const v=x.data(),b=Array.isArray(v.tags)?v.tags:[],T=e.tags;b.some(A=>T.includes(A))&&(g.some(A=>A.id===x.id)||g.push({id:x.id,...v}))})}catch(_){console.log("Error fetching from collection for tag matching:",_)}}console.log("Found matching cards:",g),s(g)}catch(g){console.error("Error fetching matching cards:",g)}}h()},[e,i,d]),a?p.jsx("div",{className:lt("min-h-screen py-10",e!=null&&e.theme?YS[e.theme]:"bg-muted"),children:p.jsx("div",{className:"max-w-6xl mx-auto px-4",children:p.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 animate-pulse",children:[p.jsx("div",{className:"h-8 w-64 bg-muted rounded mb-4"}),p.jsx("div",{className:"h-4 w-48 bg-muted rounded mb-6"}),p.jsx("div",{className:"h-4 w-full bg-muted rounded mb-6"}),p.jsx("div",{className:"h-[60vh] w-full bg-muted rounded"})]})})}):u?p.jsx("div",{className:"max-w-6xl mx-auto px-4 py-10",children:p.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:p.jsx("div",{className:"text-red-500",children:u})})}):e?p.jsx("div",{className:lt("min-h-screen py-10",YS[e.theme]),children:p.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[p.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[p.jsx("h1",{className:"text-2xl font-bold mb-2",children:e.name}),p.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:e.createdAt&&`Created on ${new Date(e.createdAt.seconds?e.createdAt.seconds*1e3:e.createdAt).toLocaleDateString()}`}),e.tags&&e.tags.length>0&&p.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:e.tags.map(h=>p.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded-full border",children:["#",h]},h))})]}),p.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[p.jsx(CK,{cards:r}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:r.length>0?r.map(h=>p.jsxs("div",{className:"relative group",children:[h.imageUrl?p.jsx("img",{src:h.imageUrl,alt:h.playerName||"Card",className:"w-full h-auto rounded-lg border object-contain aspect-[3/4]"}):p.jsx("div",{className:"w-full aspect-[3/4] bg-gray-200 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-gray-500",children:h.playerName||"No Image"})}),p.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-70 opacity-0 group-hover:opacity-100 transition-all duration-200 flex items-center justify-center text-white text-xs rounded-lg p-2",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"font-semibold",children:h.playerName||"Unknown"}),p.jsxs("div",{children:[h.year," ",h.cardSet]}),p.jsx("div",{className:"mt-1",children:h.condition})]})})]},h.id)):p.jsx("div",{className:"col-span-full text-center py-12 text-muted-foreground",children:"No cards in this display case yet."})})]})]})}):null}function RK(){const{id:t}=xw(),{user:e}=Yt(),n=vi(),[r,s]=y.useState(null),[i,o]=y.useState(!0);y.useEffect(()=>{async function l(){if(!(!t||!e)){o(!0);try{const u=jt(De,"users",e.uid,"display_cases",t),f=await Ct(u);f.exists()?s({id:f.id,...f.data()}):Ae.error("Display case not found")}catch(u){console.error("Error fetching display case:",u),Ae.error("Failed to load display case")}finally{o(!1)}}}l()},[t,e]);const a=e&&r?e.uid===r.userId:!1;return i?p.jsx("div",{className:"p-8 flex justify-center",children:p.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):r?p.jsxs("div",{className:"min-h-screen",children:[a&&e&&p.jsx("div",{className:"bg-white border-b mb-4",children:p.jsx("div",{className:"max-w-6xl mx-auto px-4 py-3 flex justify-end",children:p.jsx(SK,{displayCase:r,isOwner:a,userId:e.uid})})}),p.jsx(IK,{})]}):p.jsxs("div",{className:"p-8 text-center",children:[p.jsx("h1",{className:"text-xl font-bold text-red-500",children:"Display case not found"}),p.jsx(kt,{className:"mt-4",onClick:()=>n("/display-cases"),children:"Back to Display Cases"})]})}function kK(){const{user:t}=Yt(),e=vi();return y.useEffect(()=>{t&&e("/dashboard")},[t,e]),p.jsx("main",{className:"min-h-screen flex items-center justify-center",children:p.jsx("h1",{className:"text-3xl font-bold",children:"Sign in to your account"})})}const ZS=({children:t})=>{const{user:e,loading:n}=Yt();return n?p.jsx("div",{className:"flex items-center justify-center min-h-screen",children:p.jsx("div",{className:"text-center",children:p.jsx("p",{className:"text-lg",children:"Loading..."})})}):e?p.jsx(p.Fragment,{children:t}):p.jsx(CL,{to:"/login",replace:!0})},AK=()=>(console.log("App component rendering..."),p.jsxs(p.Fragment,{children:[p.jsx(g7,{children:p.jsxs(RL,{children:[p.jsx(ki,{path:"/",element:p.jsx(kK,{})}),p.jsx(ki,{path:"/dashboard",element:p.jsx(ZS,{children:p.jsx(rB,{})})}),p.jsx(ki,{path:"/collection",element:p.jsx(ZS,{children:p.jsx(p7,{})})}),p.jsx(ki,{path:"/login",element:p.jsx(m7,{})}),p.jsx(ki,{path:"/display-cases",element:p.jsx(bK,{})}),p.jsx(ki,{path:"/display-case/:id",element:p.jsx(RK,{})}),p.jsx(ki,{path:"/display/:publicId",element:p.jsx(wK,{})})]})}),p.jsx(Ck,{position:"top-right"})]}));console.log("Starting app initialization...");const PK=new RU,E_=document.getElementById("root");console.log("Root element:",E_);E_?(_y.createRoot(E_).render(p.jsx(q.StrictMode,{children:p.jsx(DU,{client:PK,children:p.jsx(XL,{children:p.jsx(fU,{children:p.jsx(AK,{})})})})})),console.log("App rendered successfully")):console.error("Failed to find root element!");
